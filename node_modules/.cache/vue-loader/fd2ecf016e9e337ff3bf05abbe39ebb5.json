{"remainingRequest":"C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\src\\views\\club\\SearchClub.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\src\\views\\club\\SearchClub.vue","mtime":1608703214138},{"path":"C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport back from \"@/components/Botton/back.vue\";\r\nimport { apiGetAllClubs, apiJoinClub } from \"@/api/Club.js\";\r\nimport model from \"@/components/model\";\r\nimport { apiGetClubMatchs } from \"@/api/ClubActivitys.js\";\r\nexport default {\r\n  components: {\r\n    back,\r\n    model,\r\n  },\r\n  data() {\r\n    return {\r\n      // 篩選\r\n      filter: false,\r\n\r\n      category: [],\r\n      categoryType: 0,\r\n      isOpen: false,\r\n      isMember: 0,\r\n      uname: \"\",\r\n      clickClubId: undefined,\r\n      isCallBack: false,\r\n      callBackMsg: \"\",\r\n      clubList: [],\r\n      searchList: [],\r\n      searchVal: \"\",\r\n      matchId: \"\",\r\n\r\n      IndexNum: 1,\r\n      isNoData: false,\r\n      isLoading:　false,\r\n      // 防止连点\r\n      isDisable: false,\r\n\r\n      noMission: false,\r\n\r\n      // v-infinite-scroll 套件\r\n      busy: false,\r\n      immediate: false,\r\n      totalPages: 0,\r\n\r\n      categoryBusy: false,\r\n      categoryImmediate: true,\r\n      categoryIndexNum: 1,\r\n      categoryTotalPages: 0\r\n    };\r\n  },\r\n\r\n  created() {\r\n    // 判斷是否有會員 1 = 有  2 = 無\r\n    this.isMember = localStorage.getItem(\"isMember\");\r\n\r\n    // 獲取使用者名稱\r\n    this.uname = localStorage.getItem(\"uname\");\r\n\r\n    // 獲取联赛列表\r\n    this.matchType();\r\n\r\n    // 獲取所有俱樂部列表\r\n    this.getCategoryClubs();\r\n  },\r\n  // mounted() {\r\n  //   window.addEventListener(\"scroll\", this.handleScroll, true);\r\n  // },\r\n  methods: {\r\n\r\n    // 右移無限加載\r\n    // handleScroll() {\r\n    //   let category = document.getElementById(\"category\");\r\n    //   let categoryWrap = document.getElementById(\"categoryWrap\");\r\n    //   let categoryWidth = category.getBoundingClientRect().width;\r\n    //   let categoryWrapWidth = categoryWrap.getBoundingClientRect().width;\r\n    //   let scrollMove = category.scrollLeft;\r\n    //   let moveOffset = categoryWrapWidth - categoryWidth;\r\n\r\n    //   if (scrollMove == moveOffset) {\r\n    //     if (this.IndexNum >= this.totalPages) {\r\n    //       return;\r\n    //     }\r\n    //     this.IndexNum++;\r\n    //     this.matchType();\r\n    //   }\r\n    // },\r\n    toCreatRule() {\r\n      this.$router.push(\"/CreateClubRule\");\r\n    },\r\n\r\n    // 獲取導覽聯賽種類\r\n    matchType() {\r\n      let data1 = {\r\n        index: this.categoryIndexNum,\r\n        count: 10,\r\n      };\r\n      apiGetClubMatchs(data1, true).then(res => {\r\n        this.category = res.Data.Data\r\n        this.categoryTotalPages = res.Data.TotalPages\r\n      })\r\n      // .then(() => {\r\n      //   this.getCategoryClubs(this.category[0].MatchId)\r\n      // });\r\n    },\r\n    // 獲取賽事種類的俱樂部清單\r\n    getCategoryClubs(matchId) {\r\n      let data = {\r\n        MatchId: matchId,\r\n        ClubName: \"\",\r\n        index: 1,\r\n        count: 10,\r\n      };\r\n      this.isLoading = true;\r\n      this.isNoData = false;\r\n      apiGetAllClubs(data, true).then(res => {\r\n        if(Math.abs(res.Code) >= 600 || res.Data.Data.length == 0) {\r\n          this.isNoData = true;\r\n          this.isLoading = false;\r\n        } else {\r\n          this.isLoading = false;\r\n          this.isNoData = false;\r\n          this.clubList = res.Data.Data;\r\n          this.totalPages = res.Data.TotalPages;\r\n        }\r\n        this.filter = false;\r\n      });\r\n\r\n    },\r\n\r\n    // 搜尋\r\n    // searchClub() {\r\n    //   let data = {\r\n    //     MatchId: this.matchId,\r\n    //     ClubName: this.searchVal,\r\n    //     index: 1,\r\n    //     count: 10,\r\n    //   };\r\n    //   apiGetAllClubs(data, true).then(res => {\r\n    //     this.clubList = res.Data.Data;\r\n    //   });\r\n    // },\r\n\r\n    // 申請加入俱樂部\r\n    joinClub() {\r\n      let data = {\r\n        ClubId: this.clickClubId,\r\n        UName: this.uname,\r\n        Type: 0 // 0 申请进入  1 退出  2 被踢\r\n      };\r\n      apiJoinClub(data, true).then(res => {\r\n        this.isCallBack = true;\r\n        this.callBackMsg = res.Message;\r\n        this.isOpen = false;\r\n      });\r\n    },\r\n\r\n    // 聯賽無限加載\r\n    loadCategory() {\r\n      if (this.categoryIndexNum >= this.categoryTotalPages) {\r\n        this.categoryBusy = true;\r\n        return;\r\n      }\r\n      this.categoryIndexNum++\r\n      let data1 = {\r\n        index: this.categoryIndexNum,\r\n        count: 10,\r\n      };\r\n      apiGetClubMatchs(data1, true).then(res => {\r\n        res.Data.Data.forEach(el => {\r\n          this.category.push(el)\r\n        });\r\n      })\r\n    },\r\n\r\n    // 俱樂部無限加載\r\n    load() {\r\n      if(this.IndexNum >= this.totalPages) {\r\n        this.busy = true;\r\n        return\r\n      }\r\n      this.IndexNum++;\r\n      let data = {\r\n        MatchId: this.matchId,\r\n        ClubName: \"\",\r\n        index: this.IndexNum,\r\n        count: 10,\r\n      };\r\n      apiGetAllClubs(data, true).then(res => {\r\n        if (res.Data.Data.length == 0) {\r\n          this.busy = true;\r\n        } else if(res.Data.Data.length > 0){\r\n          res.Data.Data.forEach(el => {\r\n            this.clubList.push(el);\r\n            this.busy = false;\r\n          })\r\n        }\r\n      });\r\n    },\r\n\r\n    // 查看俱樂部詳情\r\n    selectClub(id) {\r\n      localStorage.setItem(\"selectClub\", id);\r\n      this.$router.push(\"/clubData\");\r\n    },\r\n  }\r\n};\r\n",null]}