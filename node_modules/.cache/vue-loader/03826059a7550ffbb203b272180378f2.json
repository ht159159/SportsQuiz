{"remainingRequest":"C:\\work\\竞猜可换色板\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\work\\竞猜可换色板\\src\\views\\personalCenter\\CashFlowLog.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\work\\竞猜可换色板\\src\\views\\personalCenter\\CashFlowLog.vue","mtime":1608885900135},{"path":"C:\\work\\竞猜可换色板\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\work\\竞猜可换色板\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\work\\竞猜可换色板\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\work\\竞猜可换色板\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport back from \"@/components/Botton/back.vue\";\r\nimport { apiGetMemLogTypes, apiGetMemFundLogs } from \"@/api/Club.js\";\r\nexport default {\r\n    components: {\r\n        back\r\n    },\r\n    data() {\r\n        return {\r\n            filter:　false,\r\n            typeId: \"0\",\r\n            indexNum: 1,\r\n            totalPages: \"\",\r\n            count: 5,\r\n            cashFlowLog: [],\r\n            cashFlowCategory: [],\r\n            busy: false,\r\n            immediate: false,\r\n            loading: false,\r\n            noData: false,\r\n        }\r\n    },\r\n    created() {\r\n        this.getMemLogTypes();\r\n        this.getMemFundLogs();\r\n    },\r\n    methods: {\r\n        // 獲取類別列表\r\n        getMemLogTypes() {\r\n            let data = {\r\n                rptId: 0\r\n            }\r\n            apiGetMemLogTypes(data, true).then(res => {\r\n                if (res.Code == \"600\" || res.data.length == 0) {\r\n                    this.loading = false;\r\n                    this.noData = true;\r\n                    return\r\n                }\r\n                this.cashFlowCategory = res.data;\r\n            });\r\n        },\r\n\r\n        // 獲取金流列表\r\n        getMemFundLogs() {\r\n            this.loading = true;\r\n            this.noData = false;\r\n            let data = {\r\n                typeId: this.typeId,\r\n                index: this.indexNum,\r\n                count: 10 \r\n            };\r\n            apiGetMemFundLogs(data, true).then(res => {\r\n                if (res.Code == \"600\" || res.data.Data.length == 0) {\r\n                    this.loading = false;\r\n                    this.noData = true;\r\n                    return\r\n                }\r\n                this.loading = false;\r\n                this.noData = false;\r\n                this.cashFlowLog = res.data.Data;\r\n                this.totalPages = res.data.TatolPages;\r\n            });\r\n        },\r\n\r\n        // 點選類別\r\n        clickType(typeId) {\r\n            this.cashFlowLog = [];\r\n            this.indexNum = 1;\r\n            this.typeId = typeId;\r\n            this.getMemFundLogs();\r\n            this.filter = false;\r\n        },\r\n\r\n        // 無限加載\r\n        load() {\r\n            console.log(this.totalPages)\r\n            if(this.indexNum >= this.totalPages) {\r\n                return\r\n            }\r\n            this.busy = true;\r\n            this.indexNum++;\r\n            let data = {\r\n                typeId: this.typeId,\r\n                index: this.indexNum,\r\n                count: 10 \r\n            };\r\n            this.loading = true;\r\n            apiGetMemFundLogs(data, true).then(res => {\r\n                if (res.Code == \"600\" || res.data.Data.length == 0) {\r\n                    this.loading = false;\r\n                    this.busy = true;\r\n                    return\r\n                } else {\r\n                    res.data.Data.forEach(el => {\r\n                        this.cashFlowLog.push(el);\r\n                        this.busy = false;\r\n                    });\r\n                    this.loading = false;\r\n                    this.noData = false;\r\n                }\r\n            });\r\n        }\r\n    },\r\n}\r\n",{"version":3,"sources":["CashFlowLog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CashFlowLog.vue","sourceRoot":"src/views/personalCenter","sourcesContent":["<template>\r\n    <div class=\"cash-flow-log\">\r\n        <div class=\"cash-flow-log-header\">\r\n            <div class=\"cash-flow-log-header-wrap\">\r\n                <back class=\"back-icon img-he\"></back>\r\n                <h3>{{ $t('CashFlowLog') }}</h3>\r\n                <!--金流日志-->\r\n            </div>\r\n            <div class=\"filter\" @click=\"filter = !filter\">\r\n                <span>{{ $t(\"Filter\") }}</span\r\n                ><!--篩選-->\r\n            </div>\r\n        </div>\r\n\r\n        <!--篩選頁-->\r\n        <div class=\"filter-wrap\" :class=\"{ popLeftIn: filter }\">\r\n            <div class=\"back-cash-flow-log-list-wrap\" @click=\"filter = false\">\r\n                <div class=\"back-cash-flow-log-list\"></div>\r\n                <!-- 回金流日志 -->\r\n                <p>{{ $t(\"BackCashFlowLog\") }}</p>\r\n            </div> \r\n            <ul class=\"category-wrap\">\r\n                <li class=\"category-list\" @click=\"clickType(0)\">\r\n                    <p>{{ $t('All') }}</p>\r\n                </li>\r\n                <li class=\"category-list\" v-for=\"item in cashFlowCategory\" @click=\"clickType(item.Id)\">\r\n                    <p>{{ item.Name }}</p>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n\r\n        <ul v-if=\"!filter\" class=\"cash-flow-log-content\" v-infinite-scroll=\"load\" infinite-scroll-disabled=\"busy\" infinite-scroll-immediate=\"immediate\">\r\n            <li class=\"cash-flow-log-list\" v-for=\"item in cashFlowLog\">\r\n                <img class=\"icon\" src=\"../../assets/myself/lingdang_03.png\">\r\n                <div class=\"cash-flow-log-list-text\">\r\n                    <div class=\"title\">{{ item.TypeName }}</div>\r\n                    <div class=\"date\">{{ item.CreateTime }}</div>\r\n                </div>\r\n                <div class=\"amount\">\r\n                    <span v-if=\"item.Amount > 0\">+</span>\r\n                    {{ item.Amount }}\r\n                </div>\r\n            </li>\r\n            <!-- 【 加载中… 】 -->\r\n            <li style=\"font-size: .24rem;text-align:center;line-height: .48rem\" v-if=\"loading\">\r\n                {{ $t('WipeLoading') }}...  \r\n            </li>\r\n            <!-- 【 暂无数据 】 -->\r\n            <div class=\"no-Data\" v-if=\"noData == true\">\r\n                <p>{{ $t(\"NoData\") }}</p>\r\n            </div>\r\n        </ul>\r\n\r\n    </div>\r\n</template>\r\n<script>\r\nimport back from \"@/components/Botton/back.vue\";\r\nimport { apiGetMemLogTypes, apiGetMemFundLogs } from \"@/api/Club.js\";\r\nexport default {\r\n    components: {\r\n        back\r\n    },\r\n    data() {\r\n        return {\r\n            filter:　false,\r\n            typeId: \"0\",\r\n            indexNum: 1,\r\n            totalPages: \"\",\r\n            count: 5,\r\n            cashFlowLog: [],\r\n            cashFlowCategory: [],\r\n            busy: false,\r\n            immediate: false,\r\n            loading: false,\r\n            noData: false,\r\n        }\r\n    },\r\n    created() {\r\n        this.getMemLogTypes();\r\n        this.getMemFundLogs();\r\n    },\r\n    methods: {\r\n        // 獲取類別列表\r\n        getMemLogTypes() {\r\n            let data = {\r\n                rptId: 0\r\n            }\r\n            apiGetMemLogTypes(data, true).then(res => {\r\n                if (res.Code == \"600\" || res.data.length == 0) {\r\n                    this.loading = false;\r\n                    this.noData = true;\r\n                    return\r\n                }\r\n                this.cashFlowCategory = res.data;\r\n            });\r\n        },\r\n\r\n        // 獲取金流列表\r\n        getMemFundLogs() {\r\n            this.loading = true;\r\n            this.noData = false;\r\n            let data = {\r\n                typeId: this.typeId,\r\n                index: this.indexNum,\r\n                count: 10 \r\n            };\r\n            apiGetMemFundLogs(data, true).then(res => {\r\n                if (res.Code == \"600\" || res.data.Data.length == 0) {\r\n                    this.loading = false;\r\n                    this.noData = true;\r\n                    return\r\n                }\r\n                this.loading = false;\r\n                this.noData = false;\r\n                this.cashFlowLog = res.data.Data;\r\n                this.totalPages = res.data.TatolPages;\r\n            });\r\n        },\r\n\r\n        // 點選類別\r\n        clickType(typeId) {\r\n            this.cashFlowLog = [];\r\n            this.indexNum = 1;\r\n            this.typeId = typeId;\r\n            this.getMemFundLogs();\r\n            this.filter = false;\r\n        },\r\n\r\n        // 無限加載\r\n        load() {\r\n            console.log(this.totalPages)\r\n            if(this.indexNum >= this.totalPages) {\r\n                return\r\n            }\r\n            this.busy = true;\r\n            this.indexNum++;\r\n            let data = {\r\n                typeId: this.typeId,\r\n                index: this.indexNum,\r\n                count: 10 \r\n            };\r\n            this.loading = true;\r\n            apiGetMemFundLogs(data, true).then(res => {\r\n                if (res.Code == \"600\" || res.data.Data.length == 0) {\r\n                    this.loading = false;\r\n                    this.busy = true;\r\n                    return\r\n                } else {\r\n                    res.data.Data.forEach(el => {\r\n                        this.cashFlowLog.push(el);\r\n                        this.busy = false;\r\n                    });\r\n                    this.loading = false;\r\n                    this.noData = false;\r\n                }\r\n            });\r\n        }\r\n    },\r\n}\r\n</script>"]}]}