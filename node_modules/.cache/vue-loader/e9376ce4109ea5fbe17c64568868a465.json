{"remainingRequest":"C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\src\\views\\Task.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\src\\views\\Task.vue","mtime":1606095199797},{"path":"C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport back from \"@/components/Botton/back.vue\";\r\nimport { apiGetMissionList, apiAddMission, apiReceiveMissionReward } from \"@/api/mission.js\";\r\nexport default {\r\n  components: {\r\n    back\r\n  },\r\n  data() {\r\n    return {\r\n      category: [this.$t('RecommendedTasks'), this.$t('Processing'), this.$t('Completed')], //  【 推荐任务 】【 进行中 】【 已完成 】\r\n      categoryType: 0,\r\n      dailyMissionList: [],\r\n      specialMissionList: [],\r\n      activityMissionList: [],\r\n      ongoingMissionList: [],\r\n      confirmAlert: false,\r\n      addMissionData: {\r\n        missionId: ''\r\n      },\r\n      selectMission: '',\r\n      ReceiveMissionRewardData: {\r\n        umissionid: ''\r\n      },\r\n\r\n      // 防止连点\r\n      isDisable: false,\r\n\r\n      noMission: false,\r\n      isLoading: false,\r\n    };\r\n  },\r\n\r\n  created() {\r\n    this.getTaskList(this.categoryType);\r\n  },\r\n\r\n  methods: {\r\n    alertBox(i) {\r\n      this.confirmAlert = true\r\n      this.selectMission = i\r\n      // 推荐任务\r\n      if (!this.selectMission.IsComplete) {\r\n        this.addMissionData.missionId = i.Id\r\n      }\r\n\r\n      // 已完成任务\r\n      // if (this.selectMission.IsComplete) {\r\n      //   this.ReceiveMissionRewardData.umissionid = i.UMissionId\r\n\r\n      // }\r\n    },\r\n\r\n    confirm() {\r\n\r\n      // 防止连点\r\n      if(this.isDisable){\r\n        return false;\r\n      }\r\n      this.isDisable = true\r\n\r\n      // 推荐任务\r\n      if (!this.selectMission.IsComplete) {\r\n        apiAddMission(this.addMissionData, true).then(res => {\r\n          this.Alert.showMsg('领取成功', 'success', 1200, true, true);\r\n          this.getTaskList(0)\r\n          this.confirmAlert = false\r\n          this.isDisable = false// 防止连点\r\n        })\r\n      }\r\n\r\n      // 已完成任务\r\n      // if (this.selectMission.IsComplete) {\r\n      //   apiReceiveMissionReward(this.ReceiveMissionRewardData, true).then(res => {\r\n      //     this.Alert.showMsg('领取成功', 'success', 1200, true);\r\n      //     this.getTaskList(2)\r\n      //     this.confirmAlert = false\r\n      //     this.isDisable = false// 防止连点\r\n      //   })\r\n      // }\r\n    },\r\n\r\n    close() {\r\n      this.confirmAlert = false\r\n    },\r\n\r\n    receive(i) {\r\n      this.ReceiveMissionRewardData.umissionid = i.UMissionId\r\n      apiReceiveMissionReward(this.ReceiveMissionRewardData, true).then(res => {\r\n        this.Alert.showMsg('领取成功', 'success', 1200, true, true);\r\n        this.getTaskList(2)\r\n        this.confirmAlert = false\r\n        this.isDisable = false// 防止连点\r\n      })\r\n    },\r\n\r\n    // 獲取任務列表\r\n    // 推薦任務   > api 參數帶0，分頁categoryType =  0\r\n    // 进行中任務 > api 參數帶1，分頁categoryType =  1\r\n    // 已完成任務 > api 參數帶2，分頁categoryType =  2\r\n    getTaskList(index) {\r\n      this.noMission = false\r\n      this.dailyMissionList = [];\r\n      this.specialMissionList = [];\r\n      this.activityMissionList = [];\r\n      this.ongoingMissionList = [];\r\n      this.categoryType = index;\r\n      this.isLoading = true;\r\n      let data = {\r\n        status: index\r\n      };\r\n      apiGetMissionList(data, true).then(res => {\r\n        if (index == 0) {\r\n          this.dailyMissionList = res.DailyMission;\r\n          this.specialMissionList = res.SpecialMission;\r\n          this.activityMissionList = res.ActivityMission;\r\n          this.timeDelT()\r\n          if (this.dailyMissionList.length < 1 && this.specialMissionList.length < 1 && this.activityMissionList.length < 1) {\r\n            this.noMission = true;\r\n            this.isLoading = false;\r\n          } else {\r\n            this.noMission = false;\r\n            this.isLoading = false;\r\n          }\r\n        }\r\n        if (index == 1 || index == 2) {\r\n          this.dailyMissionList = res.DailyMission;\r\n          this.specialMissionList = res.SpecialMission;\r\n          this.activityMissionList = res.ActivityMission;\r\n          for (let d = 0; d < this.dailyMissionList.length; d++) {\r\n            this.ongoingMissionList.push(this.dailyMissionList[d]);\r\n          }\r\n          for (let s = 0; s < this.specialMissionList.length; s++) {\r\n            this.ongoingMissionList.push(this.specialMissionList[s]);\r\n          }\r\n          for (let a = 0; a < this.activityMissionList.length; a++) {\r\n            this.timeDelT()\r\n            this.ongoingMissionList.push(this.activityMissionList[a]);\r\n          }\r\n\r\n          if (this.ongoingMissionList.length < 1) {\r\n            this.noMission = true;\r\n            this.isLoading = false;\r\n          } else {\r\n            this.noMission = false;\r\n            this.isLoading = false;\r\n          }\r\n        }\r\n      });\r\n\r\n    },\r\n\r\n    // 时间去掉T\r\n    timeDelT () {\r\n      for (let i = 0; i < this.activityMissionList.length; i++) {\r\n        this.activityMissionList[i].EndDate = this.activityMissionList[i].EndDate.replace('T', ' ')\r\n      }\r\n    }\r\n  }\r\n};\r\n",null]}