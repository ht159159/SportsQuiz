{"remainingRequest":"C:\\work\\竞猜可换色板\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\work\\竞猜可换色板\\src\\views\\club\\ClubActivitiesRelease.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\work\\竞猜可换色板\\src\\views\\club\\ClubActivitiesRelease.vue","mtime":1604049391363},{"path":"C:\\work\\竞猜可换色板\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\work\\竞猜可换色板\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\work\\竞猜可换色板\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\work\\竞猜可换色板\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport back from \"@/components/Botton/back.vue\";\r\nimport model from \"@/components/model\";\r\nimport { apiGetClubActivityMatchInfo, apiAddClubActivity } from \"@/api/ClubActivitys.js\";\r\nimport { swiper, swiperSlide } from \"vue-awesome-swiper\";\r\nimport \"swiper/css/swiper.css\";\r\nexport default {\r\n  components: {\r\n    back,\r\n    swiper,\r\n    swiperSlide,\r\n    model\r\n  },\r\n  data() {\r\n    return {\r\n      league: [],\r\n      leagueNewAry: [],\r\n      leagueId: \"\",\r\n      isSelect: false,\r\n      leagueNewAryIndex: undefined,\r\n      leagueNewAryItemIndex: undefined,\r\n      ticket: \"\",\r\n      selectNum: [],\r\n      sessionIndex: undefined,\r\n      acvtiveTitle: \"\",\r\n      sessionNum: \"\",\r\n      isClickTwice: false,\r\n      // clubId\r\n      clubId: \"\",\r\n      //swiper\r\n      swiperOption: {\r\n        pagination: {\r\n          el: \".swiper-pagination\"\r\n        },\r\n        // on: {\r\n        //   // 使用es6的箭头函数，使this指向vue对象\r\n        //   slideNextTransitionEnd: () => {\r\n        //     this.index += 1;\r\n        //     this.loadActivityMatchInfo()\r\n        //   }\r\n        // }\r\n      },\r\n      isFancyBoxOpen: false\r\n    };\r\n  },\r\n  created() {\r\n    localStorage.setItem(\"categoryIndex\", 1);\r\n    this.getActivityMatchInfo();\r\n  },\r\n  methods: {\r\n    // 活動發布輪播\r\n    activesSlide() {\r\n      this.leagueNewAry = [];\r\n      for (var i = 0, len = this.league.length; i < len; i += 6) {\r\n        this.leagueNewAry.push(this.league.slice(i, i + 6));\r\n      }\r\n    },\r\n\r\n    // 獲取聯賽資料\r\n    getActivityMatchInfo() {\r\n      // 獲取clubId\r\n      this.clubId = localStorage.getItem(\"ClubId\");\r\n      let data = {\r\n        clubId: this.clubId,\r\n      };\r\n      apiGetClubActivityMatchInfo(data, true).then(res => {\r\n        this.league = res.Data.ActivityMatches;\r\n\r\n        // 門票\r\n        this.ticket = res.Data.JoinAmount;\r\n        // 場次\r\n        let str = res.Data.SelectNum;\r\n        this.selectNum = str.split(',');\r\n\r\n        this.activesSlide();\r\n      });\r\n    },\r\n\r\n    // 聯賽資料加載\r\n    // loadActivityMatchInfo() {\r\n    //   // 獲取clubId\r\n    //   // this.clubId = localStorage.getItem(\"ClubId\");\r\n    //   let data = {\r\n    //     clubId: this.clubId,\r\n    //     index: this.index,\r\n    //     count: 7\r\n    //   };\r\n    //   apiGetClubActivityMatchInfo(data, true).then(res => {\r\n    //     res.Data.ActivityMatches.Data.forEach(el => {\r\n    //       this.league.push(el);\r\n    //     });\r\n    //     this.activesSlide();\r\n    //   });\r\n    // },\r\n\r\n    // 點選聯賽\r\n    selectLeague(index, indexs) {\r\n      if (this.leagueNewAryIndex == index && this.leagueNewAryItemIndex == indexs) {\r\n        this.leagueNewAryIndex = undefined;\r\n        this.leagueNewAryItemIndex = undefined;\r\n        this.leagueId = \"\";\r\n        return;\r\n      }\r\n      this.leagueNewAryIndex = index;\r\n      this.leagueNewAryItemIndex = indexs;\r\n\r\n      // 儲存點選到的聯賽ID\r\n      this.leagueId = this.leagueNewAry[index][indexs].MatchId;\r\n    },\r\n\r\n    //選擇場次\r\n    selectSession(index) {\r\n      if (this.sessionIndex == index) {\r\n        this.sessionIndex = undefined;\r\n        this.sessionNum = \"\";\r\n        return;\r\n      }\r\n      this.sessionIndex = index;\r\n      this.sessionNum = this.selectNum[index];\r\n    },\r\n\r\n    // 發布活動\r\n    releaseActive() {\r\n      if(this.leagueId == \"\") {\r\n        this.$message({\r\n          message: this.$t(\"PleaseSelectALeague\"),\r\n          type: \"warning\",\r\n          center: true,\r\n          duration: 1200\r\n      });\r\n        this.isFancyBoxOpen = false;\r\n        return;\r\n      } \r\n      if(this.acvtiveTitle == \"\") {\r\n        this.$message({\r\n          message: this.$t(\"ActiveTitle\"),\r\n          type: \"warning\",\r\n          center: true,\r\n          duration: 1200\r\n        });\r\n        this.isFancyBoxOpen = false;\r\n        return;\r\n      }\r\n      if(this.sessionNum == \"\") {\r\n        this.$message({\r\n          message: this.$t(\"PleaseSelectTheSession\"),\r\n          type: \"warning\",\r\n          center: true,\r\n          duration: 1200\r\n        });\r\n        this.isFancyBoxOpen = false;\r\n        return;\r\n      }\r\n\r\n      if(this.isClickTwice == false) {  // 防連點\r\n        let data = {\r\n          ClubId: this.clubId,\r\n          SelectLeague: this.leagueId,\r\n          NumGames: this.sessionNum,\r\n          ActivityContent: this.acvtiveTitle,\r\n        };\r\n        apiAddClubActivity(data, true).then(res => {\r\n          if (res.Success == false) {\r\n            this.$message({\r\n              message: res.Message,\r\n              type: \"warning\",\r\n              center: true,\r\n              duration: 3000\r\n            });\r\n          } else {\r\n            this.$message({\r\n              message: res.Message,\r\n              type: \"success\",\r\n              center: true,\r\n              duration: 3000\r\n            });\r\n            setTimeout(() => {\r\n              this.$router.push('/ClubActivities')\r\n            }, 3000);\r\n          };\r\n          this.isFancyBoxOpen = false;\r\n        });\r\n        this.isClickTwice = true;\r\n      }\r\n    }\r\n  },\r\n  beforeDestroy() {\r\n    localStorage.setItem(\"categoryIndex\", 1);\r\n  }\r\n};\r\n",{"version":3,"sources":["ClubActivitiesRelease.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ClubActivitiesRelease.vue","sourceRoot":"src/views/club","sourcesContent":["<template>\r\n  <div class=\"activities-release\">\r\n    <div class=\"activities-release-header\">\r\n      <div class=\"activities-release-header-wrap\">\r\n        <back class=\"back-icon img-he\"></back>\r\n        <h3>{{ $t(\"MyClub\") }}</h3>\r\n        <!--我的俱乐部-->\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"activities-release-content\">\r\n      <p class=\"activities-release-title\">{{ $t(\"PleaseSelectALeague\") }}</p>\r\n      <!-- 请选择联赛 -->\r\n      <!-- Swiper -->\r\n      <swiper class=\"swiper\" :options=\"swiperOption\" ref=\"mySwiper\">\r\n        <swiper-slide v-for=\"(item, index) in leagueNewAry\">\r\n          <div class=\"league-box\" v-for=\"(items, indexs) in item\" @click=\"selectLeague(index, indexs)\">\r\n            <div :class=\"[leagueNewAryIndex == index && leagueNewAryItemIndex == indexs? 'selested': 'unSelect']\"></div>\r\n            <!-- <img :src=\"items.MatchImg\" /> -->\r\n            <div class=\"league-box-img\" :style=\"{ backgroundImage: 'url(' + items.MatchImg + ')' }\"></div>\r\n            <p class=\"matchName\">{{ items.MatchName }}</p>\r\n          </div>\r\n        </swiper-slide>\r\n        <div class=\"swiper-pagination\" slot=\"pagination\"></div>\r\n      </swiper>\r\n\r\n      <!-- 輸入活動標題 -->\r\n      <p class=\"activities-release-title\">{{ $t(\"ActiveTitle\") }}</p>\r\n      <input class=\"enter-title\" type=\"text\" :placeholder=\"$t('ActiveTitleTip')\" v-model=\"acvtiveTitle\">\r\n      <!-- 選擇門票 -->\r\n      <p class=\"activities-release-title\">{{ $t(\"PleaseSelectTickets\") }}</p>\r\n      <!-- 请选择门票 -->\r\n      <div class=\"select-wrap\">\r\n        <p class=\"select-title\">{{ $t(\"Tickets\") }}</p>\r\n        <!-- 门票 -->\r\n        <input type=\"text\" placeholder=\"0\" v-model=\"ticket\" disabled=\"disabled\"/>\r\n      </div>\r\n\r\n      <!-- 選擇場次 -->\r\n      <p class=\"activities-release-title\">{{ $t(\"PleaseSelectTheSession\") }}</p>\r\n      <!-- 请选择场次 -->\r\n      <div class=\"select-wrap\">\r\n        <p class=\"select-titlet\">{{ $t(\"Session\") }}</p><!-- 場次 -->\r\n        <div :class=\"[sessionIndex == index ?'select-num-active':'select-num']\" v-for=\"(num, index) in selectNum\" @click=\"selectSession(index)\">{{ num }}</div>\r\n      </div>\r\n    </div>\r\n    <button class=\"activities-release-btn\" @click=\"isFancyBoxOpen = true\">{{ $t('Confirm') }}</button>\r\n    <transition name=\"fade\">\r\n\t\t  <model v-if=\"isFancyBoxOpen\"></model>\r\n\t  </transition>\r\n\t  <transition name=\"fade\">\r\n      <div class=\"fancy-box\" v-if=\"isFancyBoxOpen\">\r\n        <img src=\"../../assets/club/ticket-header.png\" alt=\"\">\r\n        <div class=\"fancy-box-content\">\r\n          <p>{{ $t('SureToCreateThisEvent') }}?</p>\r\n        </div>\r\n        <div class=\"fancy-box-btn\">\r\n          <div class=\"fancy-box-btn-confirm\" @click=\"releaseActive()\">{{ $t('Confirm') }}</div>\r\n          <div class=\"fancy-box-btn-cancel\" @click=\"isFancyBoxOpen = !isFancyBoxOpen\">{{ $t('Cancel') }}</div>\r\n        </div>\r\n      </div>\r\n\t  </transition>\r\n  </div>\r\n</template>\r\n<script>\r\nimport back from \"@/components/Botton/back.vue\";\r\nimport model from \"@/components/model\";\r\nimport { apiGetClubActivityMatchInfo, apiAddClubActivity } from \"@/api/ClubActivitys.js\";\r\nimport { swiper, swiperSlide } from \"vue-awesome-swiper\";\r\nimport \"swiper/css/swiper.css\";\r\nexport default {\r\n  components: {\r\n    back,\r\n    swiper,\r\n    swiperSlide,\r\n    model\r\n  },\r\n  data() {\r\n    return {\r\n      league: [],\r\n      leagueNewAry: [],\r\n      leagueId: \"\",\r\n      isSelect: false,\r\n      leagueNewAryIndex: undefined,\r\n      leagueNewAryItemIndex: undefined,\r\n      ticket: \"\",\r\n      selectNum: [],\r\n      sessionIndex: undefined,\r\n      acvtiveTitle: \"\",\r\n      sessionNum: \"\",\r\n      isClickTwice: false,\r\n      // clubId\r\n      clubId: \"\",\r\n      //swiper\r\n      swiperOption: {\r\n        pagination: {\r\n          el: \".swiper-pagination\"\r\n        },\r\n        // on: {\r\n        //   // 使用es6的箭头函数，使this指向vue对象\r\n        //   slideNextTransitionEnd: () => {\r\n        //     this.index += 1;\r\n        //     this.loadActivityMatchInfo()\r\n        //   }\r\n        // }\r\n      },\r\n      isFancyBoxOpen: false\r\n    };\r\n  },\r\n  created() {\r\n    localStorage.setItem(\"categoryIndex\", 1);\r\n    this.getActivityMatchInfo();\r\n  },\r\n  methods: {\r\n    // 活動發布輪播\r\n    activesSlide() {\r\n      this.leagueNewAry = [];\r\n      for (var i = 0, len = this.league.length; i < len; i += 6) {\r\n        this.leagueNewAry.push(this.league.slice(i, i + 6));\r\n      }\r\n    },\r\n\r\n    // 獲取聯賽資料\r\n    getActivityMatchInfo() {\r\n      // 獲取clubId\r\n      this.clubId = localStorage.getItem(\"ClubId\");\r\n      let data = {\r\n        clubId: this.clubId,\r\n      };\r\n      apiGetClubActivityMatchInfo(data, true).then(res => {\r\n        this.league = res.Data.ActivityMatches;\r\n\r\n        // 門票\r\n        this.ticket = res.Data.JoinAmount;\r\n        // 場次\r\n        let str = res.Data.SelectNum;\r\n        this.selectNum = str.split(',');\r\n\r\n        this.activesSlide();\r\n      });\r\n    },\r\n\r\n    // 聯賽資料加載\r\n    // loadActivityMatchInfo() {\r\n    //   // 獲取clubId\r\n    //   // this.clubId = localStorage.getItem(\"ClubId\");\r\n    //   let data = {\r\n    //     clubId: this.clubId,\r\n    //     index: this.index,\r\n    //     count: 7\r\n    //   };\r\n    //   apiGetClubActivityMatchInfo(data, true).then(res => {\r\n    //     res.Data.ActivityMatches.Data.forEach(el => {\r\n    //       this.league.push(el);\r\n    //     });\r\n    //     this.activesSlide();\r\n    //   });\r\n    // },\r\n\r\n    // 點選聯賽\r\n    selectLeague(index, indexs) {\r\n      if (this.leagueNewAryIndex == index && this.leagueNewAryItemIndex == indexs) {\r\n        this.leagueNewAryIndex = undefined;\r\n        this.leagueNewAryItemIndex = undefined;\r\n        this.leagueId = \"\";\r\n        return;\r\n      }\r\n      this.leagueNewAryIndex = index;\r\n      this.leagueNewAryItemIndex = indexs;\r\n\r\n      // 儲存點選到的聯賽ID\r\n      this.leagueId = this.leagueNewAry[index][indexs].MatchId;\r\n    },\r\n\r\n    //選擇場次\r\n    selectSession(index) {\r\n      if (this.sessionIndex == index) {\r\n        this.sessionIndex = undefined;\r\n        this.sessionNum = \"\";\r\n        return;\r\n      }\r\n      this.sessionIndex = index;\r\n      this.sessionNum = this.selectNum[index];\r\n    },\r\n\r\n    // 發布活動\r\n    releaseActive() {\r\n      if(this.leagueId == \"\") {\r\n        this.$message({\r\n          message: this.$t(\"PleaseSelectALeague\"),\r\n          type: \"warning\",\r\n          center: true,\r\n          duration: 1200\r\n      });\r\n        this.isFancyBoxOpen = false;\r\n        return;\r\n      } \r\n      if(this.acvtiveTitle == \"\") {\r\n        this.$message({\r\n          message: this.$t(\"ActiveTitle\"),\r\n          type: \"warning\",\r\n          center: true,\r\n          duration: 1200\r\n        });\r\n        this.isFancyBoxOpen = false;\r\n        return;\r\n      }\r\n      if(this.sessionNum == \"\") {\r\n        this.$message({\r\n          message: this.$t(\"PleaseSelectTheSession\"),\r\n          type: \"warning\",\r\n          center: true,\r\n          duration: 1200\r\n        });\r\n        this.isFancyBoxOpen = false;\r\n        return;\r\n      }\r\n\r\n      if(this.isClickTwice == false) {  // 防連點\r\n        let data = {\r\n          ClubId: this.clubId,\r\n          SelectLeague: this.leagueId,\r\n          NumGames: this.sessionNum,\r\n          ActivityContent: this.acvtiveTitle,\r\n        };\r\n        apiAddClubActivity(data, true).then(res => {\r\n          if (res.Success == false) {\r\n            this.$message({\r\n              message: res.Message,\r\n              type: \"warning\",\r\n              center: true,\r\n              duration: 3000\r\n            });\r\n          } else {\r\n            this.$message({\r\n              message: res.Message,\r\n              type: \"success\",\r\n              center: true,\r\n              duration: 3000\r\n            });\r\n            setTimeout(() => {\r\n              this.$router.push('/ClubActivities')\r\n            }, 3000);\r\n          };\r\n          this.isFancyBoxOpen = false;\r\n        });\r\n        this.isClickTwice = true;\r\n      }\r\n    }\r\n  },\r\n  beforeDestroy() {\r\n    localStorage.setItem(\"categoryIndex\", 1);\r\n  }\r\n};\r\n</script>\r\n"]}]}