{"remainingRequest":"C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\src\\views\\personalCenter\\History.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\src\\views\\personalCenter\\History.vue","mtime":1608184895506},{"path":"C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport Vue from \"vue\";\r\nimport { Toast } from \"vant\";\r\n\r\nVue.use(Toast);\r\nimport { apiGetContactUsInfo } from \"@/api/Appsetting.js\";\r\nimport { apiGetMemberMatchAndUserRank } from \"@/api/match.js\";\r\nimport back from \"@/components/Botton/back.vue\";\r\nexport default {\r\n  name: \"history\",\r\n  components: {\r\n    back\r\n  },\r\n  filters: {\r\n    state(val) {\r\n      if ((val = \"已结算\")) {\r\n        return 1;\r\n      } else {\r\n        return 2;\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      list: [this.$t('Ordinary'), this.$t('Rank'), this.$t('Challenge')],\r\n      num: 0,\r\n      imgSrc: \"\",\r\n      showImg: false,\r\n      nomsg: true,\r\n      noMore: false,\r\n      noMore1: false,\r\n      noMore2: false,\r\n      // load: false,\r\n      usualList: [], //普通赛列表1\r\n      rankList: [], //排位赛列表2\r\n      challageList: [], //挑战赛列表3\r\n      letfTeam: \"\",\r\n      battle: \"\",\r\n      rightTeam: \"\",\r\n      isLoading: false, //下拉\r\n      loading: false, //上拉\r\n      finished: false, //是否已加载完所有数据\r\n      indexNum: 1,\r\n      show: true,\r\n      states: true,\r\n      states2: false,\r\n      IndexNum: 1,\r\n      busy: false,\r\n      typeNum: 1,\r\n      typeNum2: 1,\r\n      lang: \"\",\r\n      totalPages: \"\",\r\n      immediate: true,\r\n      noData: false,\r\n      usualListLoading: false,\r\n      rankListLoading: false,\r\n      challageList: false,\r\n    };\r\n  },\r\n  methods: {\r\n    goBack() {\r\n      this.$router.go(-1);\r\n    },\r\n    getHistoryList() {\r\n      this.busy = true;\r\n      let data = {\r\n        index: this.IndexNum,\r\n        count: 10,\r\n        type: this.typeNum //普通赛\r\n      };\r\n      this.loading = true;\r\n      this.noData = false;\r\n      apiGetMemberMatchAndUserRank(data, true).then(res => {\r\n        if(Math.abs(res.Code) >= 600 || res.Data.length <= 0) {\r\n          this.loading = false;\r\n          this.noData = true;\r\n        } else {\r\n          this.busy = false;\r\n          this.totalPages = res.TotalPages;\r\n          if (this.typeNum == 1) {\r\n            this.usualList = res.Data;\r\n          }\r\n          if (this.typeNum == 2) {\r\n            this.rankList = res.Data;\r\n          }\r\n          if (this.typeNum == 3) {\r\n            this.challageList = res.Data;\r\n          }\r\n          this.loading = false;\r\n          this.noData = false;\r\n        }\r\n      })\r\n    },\r\n    getNum(index) {\r\n      this.num = index;\r\n      if (this.num == 0) {\r\n        this.typeNum = 1;\r\n        this.IndexNum = 1;\r\n        this.usualList = [];\r\n        this.getHistoryList();\r\n      }\r\n      if (index == 1) {\r\n        this.typeNum = 2;\r\n        this.IndexNum = 1;\r\n        this.rankList = [];\r\n        this.getHistoryList()\r\n      }\r\n      if (index == 2) {\r\n        this.typeNum = 3;\r\n        this.IndexNum = 1;\r\n        this.challageList = [];\r\n        this.getHistoryList()\r\n      }\r\n    },\r\n    load() {\r\n      if (this.IndexNum >= this.totalPages) {\r\n        this.loading = false;\r\n        this.busy = true;\r\n        return\r\n      }\r\n      this.busy = true;\r\n      this.IndexNum++;\r\n      let data = {\r\n        index: this.IndexNum,\r\n        count: 10,\r\n        type: this.typeNum\r\n      };\r\n\r\n      if (data.type == 1) {\r\n        this.loading = true;\r\n        this.noData = false;\r\n        apiGetMemberMatchAndUserRank(data, true).then(res => {\r\n          for (let i = 0; i < res.Data.length; i++) {\r\n            if (res.Data.length !== 0) {\r\n              this.usualList.push(res.Data[i]);\r\n            }\r\n          }\r\n          this.busy = false;\r\n          this.loading = false;\r\n        });\r\n      } else if (data.type == 2) {\r\n        this.loading = true;\r\n        apiGetMemberMatchAndUserRank(data, true).then(res => {\r\n          for (let i = 0; i < res.Data.length; i++) {\r\n            if (res.Data.length !== 0) {\r\n              this.rankList.push(res.Data[i]);\r\n            }\r\n          }\r\n          this.busy = false;\r\n          this.loading = false;\r\n        });\r\n      } else if (data.type == 3) {\r\n        this.loading = true;\r\n        apiGetMemberMatchAndUserRank(data, true).then(res => {\r\n          for (let i = 0; i < res.Data.length; i++) {\r\n            if (res.Data.length !== 0) {\r\n              this.challageList.push(res.Data[i]);\r\n            }\r\n          }\r\n          this.busy = false;\r\n          this.loading = false;\r\n        });\r\n      }\r\n    },\r\n  },\r\n  created() {\r\n    this.lang = JSON.parse(localStorage.getItem(\"lang\")).tag;\r\n    this.getHistoryList();\r\n  }\r\n};\r\n",null]}