{"remainingRequest":"C:\\work\\竞猜可换色板\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\work\\竞猜可换色板\\src\\views\\club\\ClubActivities.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\work\\竞猜可换色板\\src\\views\\club\\ClubActivities.vue","mtime":1606980099172},{"path":"C:\\work\\竞猜可换色板\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\work\\竞猜可换色板\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\work\\竞猜可换色板\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\work\\竞猜可换色板\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport back from \"@/components/Botton/back.vue\";\r\nimport model from \"@/components/model\";\r\nimport { apiBuyClubActivityTicket, apiUpdateClubActivityStatus, apiGetClubActivityList} from \"@/api/ClubActivitys.js\";\r\nimport { apiGetClubGamblingList, apiUpdateClubGamblingsStatus} from \"@/api/ClubGamblings.js\";\r\nexport default {\r\n  components: {\r\n    back,\r\n    model\r\n  },\r\n  data() {\r\n    return {\r\n      lang: \"\",\r\n      isEnglish: false,\r\n\r\n      isManagement: 0,\r\n      clubId: undefined,\r\n      isOpen: false,\r\n\r\n      activeCategoryIndex: 0,\r\n      tabIndex: 0,\r\n      betTabIndex: 0,\r\n      latestActivitiesObj: [],\r\n      historyActivitiesObj: [],\r\n      isTicketTipOpen: false,\r\n      ticketTipText:\r\n        `${this.$t(\"RuleOfActivity\")}：<br />1、${this.$t(\"VictoryOrDefeat\")}：<br />①${this.$t(\"VictoryOrDefeatOne\")}<br />②${this.$t(\"VictoryOrDefeatTwo\")}<br />2、${this.$t(\"ParticipationRules\")}：<br />①${this.$t(\"ParticipationRulesOne\")}<br />②${this.$t(\"ParticipationRulesTwo\")}<br />3、${this.$t(\"RewardRules\")}：<br />①${this.$t(\"RewardRulesOne\")}<br />②${this.$t(\"RewardRulesTwo\")}<br />③${this.$t(\"RewardRulesThree\")}<br />${this.$t(\"ActivityRulesWarning\")}`,\r\n      avtiveId: \"\",\r\n      activeNodata: false,\r\n      historyNoData: false,\r\n      matchName: \"\",\r\n      // 投注活動\r\n      betMyList: [],\r\n      betOtherList: [],\r\n      betMyListNoData: false,\r\n      betOtherListNoData: false,\r\n\r\n      wipeLoading: false,\r\n      callBackMsg: \"\",\r\n\r\n      // v-infinite-scroll 套件\r\n      busy: false,\r\n      immediate: false,\r\n      lastestIndexNum: 1,\r\n      historyIndexNum: 1,\r\n      lastestTotalPages: \"\",\r\n      historyTotalPages:\"\",\r\n\r\n      // 彈窗\r\n      isTicketTipType: \"\",\r\n      deleteData:\"\"\r\n    };\r\n  },\r\n  created() {\r\n    // 讀取語系\r\n    this.lang = JSON.parse(localStorage.getItem(\"lang\")).tag;\r\n    // 讀取是否為管理階\r\n    this.isManagement = localStorage.getItem(\"isManagement\");\r\n    // 取得clubId\r\n    this.clubId = localStorage.getItem(\"ClubId\");\r\n\r\n\r\n    if (localStorage.getItem(\"activeCategoryIndex\") == null) {\r\n      localStorage.setItem(\"activeCategoryIndex\", 0);\r\n    }\r\n    if (localStorage.getItem(\"tabIndex\") == null) {\r\n      localStorage.setItem(\"tabIndex\", 0);\r\n    }\r\n    if (localStorage.getItem(\"betTabIndex\") == null) {\r\n      localStorage.setItem(\"betTabIndex\", 0);\r\n    }\r\n\r\n    if (localStorage.getItem(\"activeCategoryIndex\") == \"0\") {\r\n      this.getLastestActivies();\r\n      this.activeCategoryIndex = 0;\r\n      this.tabIndex = localStorage.getItem(\"tabIndex\");\r\n      if (this.tabIndex == 1) {\r\n        this.getHistoryActivies();\r\n      }\r\n    } else if (localStorage.getItem(\"activeCategoryIndex\") == \"1\") {\r\n      this.activeCategoryIndex = 1;\r\n      this.getActiveBetList();\r\n      this.betTabIndex = localStorage.getItem(\"betTabIndex\");\r\n    }\r\n  },\r\n  methods: {\r\n    // 獲取最新活動\r\n    getLastestActivies() {\r\n      let data = {\r\n        Type: 1,\r\n        index: this.lastestIndexNum,\r\n        count: 10\r\n      }\r\n      apiGetClubActivityList(data, true).then(res => {\r\n        if (res.Code == \"600\") {\r\n          this.isOpen = true;\r\n          this.callBackMsg = res.Message;\r\n          this.busy = true;\r\n          return;\r\n        }\r\n        res.Data.Data.length <= 0 ? this.activeNodata = true : this.activeNodata = false;\r\n        // 俱樂部活動頁的資料\r\n        this.latestActivitiesObj = res.Data.Data;\r\n        this.lastestTotalPages = res.Data.TotalPages;\r\n      })\r\n      // this.busy = false;\r\n      this.tabIndex = 0;\r\n      localStorage.setItem(\"activeCategoryIndex\", this.activeCategoryIndex);\r\n    },\r\n\r\n    // 無限加載最新活動\r\n    loadLastest() {\r\n      if (this.lastestIndexNum >= this.lastestTotalPages ) {\r\n        return\r\n      }\r\n      this.busy = true;\r\n      this.lastestIndexNum++;\r\n      let data = {\r\n        Type: 1,\r\n        index: this.lastestIndexNum,\r\n        count: 10\r\n      }\r\n      apiGetClubActivityList(data, true).then(res => {\r\n        if (res.Code == \"600\") {\r\n          this.isOpen = true;\r\n          this.callBackMsg = res.Message;\r\n          this.busy = true;\r\n          return;\r\n        }\r\n        // 俱樂部活動頁的資料\r\n        if (res.Data.Data.length == 0) {\r\n          this.busy = true;\r\n        } else if(res.Data.Data.length > 0){\r\n          res.Data.Data.forEach(el => {\r\n            this.latestActivitiesObj.push(el);\r\n            this.busy = false;\r\n          })\r\n        }\r\n      })\r\n    },\r\n\r\n\r\n    // 獲取歷史活動\r\n    getHistoryActivies() {\r\n      let data = {\r\n        Type: 2,\r\n        index: this.historyIndexNum,\r\n        count: 10\r\n      }\r\n      apiGetClubActivityList(data, true).then(res => {\r\n        if (res.Code == \"600\") {\r\n          this.isOpen = true;\r\n          this.callBackMsg = res.Message;\r\n          return;\r\n        }\r\n        res.Data.Data.length <= 0 ? this.historyNoData = true : this.historyNoData = false;\r\n        // 俱樂部活動頁的資料\r\n        this.historyActivitiesObj = res.Data.Data;\r\n        this.historyTotalPages = res.Data.TotalPages;\r\n      })\r\n      this.tabIndex = 1;\r\n      localStorage.setItem(\"activeCategoryIndex\", this.activeCategoryIndex);\r\n    },\r\n\r\n    // 無限加載歷史活動\r\n    loadHistory() {\r\n      if (this.historyIndexNum >= this.historyTotalPages ) {\r\n        return\r\n      }\r\n      this.busy = true;\r\n      this.historyIndexNum++;\r\n      let data = {\r\n        Type: 2,\r\n        index: this.historyIndexNum,\r\n        count: 10\r\n      }\r\n      apiGetClubActivityList(data, true).then(res => {\r\n        if (res.Code == \"600\") {\r\n          this.isOpen = true;\r\n          this.callBackMsg = res.Message;\r\n          this.busy = true;\r\n          return;\r\n        }\r\n        // 俱樂部活動頁的資料\r\n        if (res.Data.Data.length == 0) {\r\n          this.busy = true;\r\n        } else if(res.Data.Data.length > 0){\r\n          res.Data.Data.forEach(el => {\r\n            this.historyActivitiesObj.push(el);\r\n            this.busy = false;\r\n          })\r\n        }\r\n      })\r\n    },\r\n\r\n    // 取得俱樂部投注列表\r\n    getActiveBetList() {\r\n      apiGetClubGamblingList(\"\", true).then(res => {\r\n        this.betMyList = res.Data.MyGamblings;\r\n        this.betOtherList = res.Data.OtherGamblings;\r\n        if (this.betMyList == null || this.betMyList.length == 0) {\r\n          this.betMyListNoData = true;\r\n        }\r\n        if (this.betOtherList == null || this.betOtherList.length == 0) {\r\n          this.betOtherListNoData = true;\r\n        }\r\n      });\r\n       this.betTabIndex = 0;\r\n      localStorage.setItem(\"activeCategoryIndex\", this.activeCategoryIndex);\r\n    },\r\n\r\n    // 切換俱樂部挑戰分頁\r\n    changeTabIndex(index) {\r\n      this.tabIndex = index;\r\n      localStorage.setItem(\"tabIndex\", index);\r\n      // 最新\r\n      if (index == 0) {\r\n        this.latestActivitiesObj = [];\r\n        this.lastestIndexNum = 1;\r\n        this.busy = false;\r\n        this.getLastestActivies();\r\n      }\r\n      // 歷史\r\n      if (index == 1) {\r\n        this.historyActivitiesObj = [];\r\n        this.historyIndexNum = 1;\r\n        this.busy = false;\r\n        this.getHistoryActivies();\r\n      }\r\n    },\r\n    // 切換俱樂部投注分頁\r\n    changeBetTabIndex(index) {\r\n      this.betTabIndex = index;\r\n      localStorage.setItem(\"betTabIndex\", index);\r\n    },\r\n\r\n    // 活動開啟發佈頁面\r\n    activesRelease() {\r\n      this.$router.push('/ClubActivitiesRelease');\r\n    },\r\n\r\n    // 購買活動門票\r\n    getTicket() {\r\n      console.log(this.avtiveId)\r\n      let data = {\r\n        ClubActivityId: this.avtiveId\r\n      };\r\n      apiBuyClubActivityTicket(data, true).then(res => {\r\n        if(Math.abs(res.Code) >= 600) {\r\n          let vm = this;\r\n          const m = vm.$message({\r\n            message: res.Message,\r\n            duration: 3000,\r\n            type: \"error\",\r\n            center: true\r\n          });\r\n          setTimeout(() => m.close(), 2000);\r\n          return;\r\n        }\r\n        localStorage.setItem(\"AcvtiveId\", this.avtiveId);\r\n        let vm = this;\r\n        const m = vm.$message({\r\n          message: this.$t('SuccessfulPurchase'),\r\n          duration: 3000,\r\n          type: \"success\",\r\n          center: true\r\n        });\r\n        setTimeout(() => m.close(), 2000);\r\n        setTimeout(() => {\r\n          this.isTicketTipOpen = false;\r\n          this.$router.push(\"/ClubActivityMatch\");\r\n        }, 3000);\r\n      });\r\n    },\r\n\r\n    // 繼續下注\r\n    continueBet(avtiveId) {\r\n      localStorage.setItem(\"AcvtiveId\", avtiveId);\r\n      this.$router.push(\"/ClubActivityMatch\");\r\n    },\r\n\r\n    // 參加成功\r\n    goResultDetail(avtiveId){\r\n      localStorage.setItem(\"AcvtiveId\", avtiveId);\r\n      this.$router.push(\"/ActivityMatchResultDetail\");\r\n    },\r\n\r\n    // 刪除最新活動\r\n    deleteActive(){\r\n      let data = {\r\n          Status: -1,\r\n          ClubActivityId: this.avtiveId,\r\n      };\r\n      apiUpdateClubActivityStatus(data, true).then(res => {\r\n        if (Math.abs(res.Code) >= 600) {\r\n          let vm = this;\r\n          const x = vm.$message({\r\n            message: res.Message,\r\n            duration: 3000,\r\n            type: \"warning\",\r\n            center: true\r\n          });\r\n          setTimeout(() => x.close(), 1000);\r\n        } else {\r\n          let vm = this;\r\n          const m = vm.$message({\r\n            message: this.$t('successfullyDeleted'),\r\n            duration: 3000,\r\n            type: \"success\",\r\n            center: true\r\n          });\r\n          setTimeout(() => {\r\n            m.close();\r\n            if (this.tabIndex == 0) {\r\n              this.getLastestActivies();\r\n              this.tabIndex = 0\r\n              return;\r\n            }\r\n            if (this.tabIndex == 1) {\r\n              this.getHistoryActivies();\r\n              this.tabIndex = 1;\r\n              return;\r\n            }\r\n          }, 1000);\r\n        }\r\n        this.isTicketTipOpen = false;\r\n      });\r\n    },\r\n\r\n    // 前往俱樂部投注\r\n    goBet(id) {\r\n      localStorage.setItem(\"betId\", id);\r\n      setTimeout(() => {\r\n        this.$router.push(\"/clubActiveBet\");\r\n      }, 250);\r\n    },\r\n\r\n    // 查看單一賽果 type:  1 = 發起人賽果;  2 = 其他人賽果\r\n    goBetResult(type, id) {\r\n      localStorage.setItem(\"betId\", id);\r\n      localStorage.setItem(\"singleResult\", true)\r\n      if (type == 1) {\r\n        setTimeout(() => {\r\n          this.$router.push(\"/InitiatorBetResult\");\r\n        }, 250);\r\n      } else {\r\n        setTimeout(() => {\r\n          this.$router.push(\"/BetResult\");\r\n        }, 250);\r\n      }\r\n    },\r\n\r\n    // 俱樂部投注刪除\r\n    betDelete() {\r\n      let data = {\r\n        Id: this.deleteData.Id,\r\n        Status: -1,\r\n      }\r\n      apiUpdateClubGamblingsStatus(data, true).then(res => {\r\n        if (Math.abs(res.Code) >= 600) {\r\n          let vm = this;\r\n          const m = vm.$message({\r\n            message: res.Message,\r\n            duration: 3000,\r\n            type: \"warning\",\r\n            center: true\r\n          });\r\n          setTimeout(() => m.close(), 2000);\r\n          this.isTicketTipOpen = false;\r\n          return;\r\n        }\r\n        if(res.Success) {\r\n          let vm = this;\r\n          const m = vm.$message({\r\n            message: this.$t('successfullyDeleted'),\r\n            duration: 3000,\r\n            type: \"success\",\r\n            center: true\r\n          });\r\n          setTimeout(() => m.close(), 2000);\r\n          // 再獲取一次列表\r\n          this.getActiveBetList();\r\n          this.isTicketTipOpen = false;\r\n          return;\r\n        }else if (res.Success == false) {\r\n          let vm = this;\r\n          const m = vm.$message({\r\n            message: this.$t(\"DataError\"),\r\n            duration: 3000,\r\n            type: \"warning\",\r\n            center: true\r\n          });\r\n          setTimeout(() => m.close(), 2000);\r\n          return;\r\n        }\r\n        this.isTicketTipOpen = false;\r\n      });\r\n    },\r\n    //刪除活動function選擇\r\n    deleteFunction () {\r\n      this.isTicketTipType == 'delete' ? this.deleteActive() : this.betDelete()\r\n    },\r\n\r\n    //彈窗顯示\r\n    isTicketTipShow (e,delData) {\r\n      this.isTicketTipType = e.toElement.className;\r\n      this.deleteData = delData;\r\n      this.isTicketTipOpen = !this.isTicketTipOpen;\r\n\r\n    },\r\n    // 彈窗確認按鈕事件\r\n    confirmBtnEvent() {\r\n      this.$router.push(\"/CreateClub\");\r\n    },\r\n  },\r\n};\r\n",{"version":3,"sources":["ClubActivities.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6QA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ClubActivities.vue","sourceRoot":"src/views/club","sourcesContent":["<template>\r\n  <!-- 俱乐部活动 -->\r\n  <div class=\"myclub-activities\">\r\n\t<div class=\"myclub-activities-header\">\r\n\t\t<div class=\"myclub-activities-header-wrap\">\r\n\t\t\t<back class=\"back-icon img-he\"></back>\r\n\t\t\t<h3>{{ $t(\"ClubActivities\") }}</h3>\r\n\t\t\t<!--俱乐部活动-->\r\n\t\t</div>\r\n\t</div>\r\n\t<div class=\"activities-type\">\r\n\t\t<div class=\"activities-type-btn\" :class=\"{ 'activities-type-btn-active': activeCategoryIndex == 0 }\" @click=\"activeCategoryIndex = 0; getLastestActivies();\">{{ $t(\"ClubChallenge\") }}</div>\r\n\t\t<div class=\"activities-type-btn\" :class=\"{ 'activities-type-btn-active': activeCategoryIndex == 1 }\" @click=\"activeCategoryIndex = 1; getActiveBetList();\">{{ $t(\"ClubBetting\") }}</div>\r\n\t</div>\r\n\t<!-- 俱樂部挑戰 -->\r\n\t<div class=\"activities-challenge-wrap\" v-show=\"activeCategoryIndex == 0\">\r\n\t\t<!-- 挑戰最新活動 -->\r\n\t\t<div class=\"activities-challenge-tab\">\r\n\t\t\t<div class=\"activities-challenge-tab-wrap\">\r\n\t\t\t\t<p class=\"activities-challenge-title\" :class=\"{ 'titile-focus': tabIndex == 0 }\" @click=\"changeTabIndex(0)\">{{ $t(\"latestActivity\") }}</p>\r\n\t\t\t\t<!-- 最新活動 -->\r\n\t\t\t\t<div class=\"divider\"></div>\r\n\t\t\t\t<!-- 分隔線 -->\r\n\t\t\t\t<p class=\"activities-challenge-title\" :class=\"{ 'titile-focus': tabIndex == 1 }\" @click=\"changeTabIndex(1)\">{{ $t(\"HistoricalActivity\") }}</p>\r\n\t\t\t\t<!-- 历史活动 -->\r\n\t\t\t</div>\r\n\t\t\t<div class=\"check-result\" @click=\"$router.push('/ClubActivityMatchResult')\">\r\n\t\t\t\t<p class=\"check-result-text\">{{ $t(\"ViewResults\") }}</p>\r\n\t\t\t\t<!-- 查看赛果 -->\r\n\t\t\t\t<div class=\"check-result-arrow\"></div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"activities-challenge\" :class=\"[isManagement== 1 ? 'activities-challenge-new': 'activities-challenge-new-member']\" v-show=\"tabIndex == 0\">\r\n\t\t\t<div v-if=\"activeNodata == false\" class=\"activities-challenge-content-wrap\">\r\n\t\t\t\t<div v-if=\"latestActivitiesObj.length <= 0\" class=\"sipeLoading\">{{ $t(\"WipeLoading\") }}</div>\r\n\t\t\t\t<div class=\"activities-challenge-content\" v-infinite-scroll=\"loadLastest\"  infinite-scroll-disabled=\"busy\" infinite-scroll-immediate=\"immediate\">\r\n\t\t\t\t\t<div class=\"block\" v-for=\"item in latestActivitiesObj\">\r\n\t\t\t\t\t\t<img :src=\"item.ActivityImg\" alt=\"\" />\r\n\t\t\t\t\t\t<p class=\"date\">{{ item.CreateTime }}</p>\r\n\t\t\t\t\t\t<div class=\"abridge-content\">{{ item.ActivityContent }}</div>\r\n\t\t\t\t\t\t<div class=\"activities-challenge-btn-wrap\">\r\n\t\t\t\t\t\t\t<!-- 立即参与 -->\r\n\t\t\t\t\t\t\t<div class=\"join\" v-if=\"item.Status == 1\" @click=\"isTicketTipShow($event); avtiveId = item.Id; matchName = item.MatchName; isEnglish = true\">{{ $t(\"JoinNow\") }}</div>\r\n\t\t\t\t\t\t\t<!-- 繼續下注 -->\r\n\t\t\t\t\t\t\t<div class=\"join\" v-if=\"item.Status == 2\" @click=\" avtiveId = item.Id; continueBet(avtiveId); isEnglish = false\">{{ $t(\"KeepBetting\") }}</div>\r\n\t\t\t\t\t\t\t<!--  活動結束 -->\r\n\t\t\t\t\t\t\t<div class=\"notJoin\" v-if=\"item.Status == 0\">{{ $t(\"CanNotBet\") }}</div>\r\n\t\t\t\t\t\t\t<!-- 參加成功 -->\r\n\t\t\t\t\t\t\t<div class=\"joinSuccess\" v-if=\"item.Status == 3\" @click=\" avtiveId = item.Id; goResultDetail(avtiveId); isEnglish = false\">{{ $t(\"BetSuccessful\") }}</div>\r\n              <!-- 刪除 -->\r\n\t\t\t\t\t\t\t<div class=\"delete\" v-if=\"isManagement == 1\" @click=\"isTicketTipShow($event,latestActivitiesObj); avtiveId = item.Id; isEnglish = false\"></div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<!-- 俱乐部活动無資料 -->\r\n\t\t\t<div class=\"no-data\" v-else>\r\n\t\t\t\t<p>{{ $t(\"NoData\") }}</p>\r\n\t\t\t\t<!-- 【 暂无数据 】 -->\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<!-- 歷史活動 -->\r\n\t\t<div class=\"activities-challenge \" :class=\"[isManagement== 1 ? 'activities-challenge-history': 'activities-challenge-history-member']\" v-show=\"tabIndex == 1\">\r\n\t\t\t<div v-if=\"historyNoData == false\" class=\"activities-challenge-content\">\r\n\t\t\t\t<div v-if=\"historyActivitiesObj.length <= 0\" class=\"sipeLoading\">{{ $t(\"WipeLoading\") }}</div>\r\n\t\t\t\t<div class=\"activities-challenge-content\" v-infinite-scroll=\"loadHistory\"  infinite-scroll-disabled=\"busy\" infinite-scroll-immediate=\"immediate\">\r\n\t\t\t\t\t<div class=\"block\" v-for=\"(item, index) in historyActivitiesObj\">\r\n\t\t\t\t\t\t<img :src=\"item.ActivityImg\" alt=\"\" />\r\n\t\t\t\t\t\t<p class=\"date\">{{ item.CreateTime }}</p>\r\n\t\t\t\t\t\t<div class=\"abridge-content\">{{ item.ActivityContent }}</div>\r\n\t\t\t\t\t\t<div class=\"activities-challenge-btn-wrap\">\r\n\t\t\t\t\t\t\t<!-- 立即参与 -->\r\n\t\t\t\t\t\t\t<div class=\"join\" v-if=\"item.Status == 1\" @click=\"isTicketTipShow($event); avtiveId = item.Id; matchName = item.MatchName;\">{{ $t(\"JoinNow\") }}</div>\r\n\t\t\t\t\t\t\t<!-- 繼續下注 -->\r\n\t\t\t\t\t\t\t<div class=\"join\" v-if=\"item.Status == 2\" @click=\" avtiveId = item.Id; continueBet(avtiveId);\">{{ $t(\"KeepBetting\") }}</div>\r\n\t\t\t\t\t\t\t<!--  活動結束 -->\r\n\t\t\t\t\t\t\t<div class=\"notJoin\" v-if=\"item.Status == 0\">{{ $t(\"CanNotBet\") }}</div>\r\n\t\t\t\t\t\t\t<!-- 參加成功 -->\r\n\t\t\t\t\t\t\t<div class=\"joinSuccess\" v-if=\"item.Status == 3\" @click=\" avtiveId = item.Id; goResultDetail(avtiveId);\">{{ $t(\"BetSuccessful\") }}</div>\r\n              <!-- 刪除 -->\r\n\t\t\t\t\t\t\t<!-- <div class=\"delete\" v-if=\"isManagement == 1\" @click=\"isTicketTipShow($event,item); avtiveId = item.Id\"></div> -->\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<!-- 俱乐部活动無資料 -->\r\n\t\t\t<div class=\"no-data\" v-else>\r\n\t\t\t\t<p>{{ $t(\"NoData\") }}</p>\r\n\t\t\t\t<!-- 【 暂无数据 】 -->\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"release-btn-wrap\" v-if=\"isManagement == 1\">\r\n\t\t\t<div class=\"release-btn\" @click=\"activesRelease()\">{{ $t(\"Release\") }}</div>\r\n\t\t\t<!--發布-->\r\n\t\t</div>\r\n\t</div>\r\n\t<!-- 俱樂部投注 -->\r\n\t<div class=\"activities-bet-wrap\" v-show=\"activeCategoryIndex == 1\">\r\n\t\t<!-- 我的活动 -->\r\n\t\t<div class=\"activities-bet-tab\">\r\n\t\t\t<div class=\"activities-bet-tab-wrap\">\r\n\t\t\t\t<p class=\"activities-bet-tab-title\" :class=\"{ 'titile-focus': betTabIndex == 0 }\" @click=\"changeBetTabIndex(0)\">{{ $t(\"MyActivities\") }}</p>\r\n\t\t\t\t<!-- 我的活动 -->\r\n\t\t\t\t<div class=\"divider\"></div>\r\n\t\t\t\t<p class=\"activities-bet-tab-title\" :class=\"{ 'titile-focus': betTabIndex == 1 }\" @click=\"changeBetTabIndex(1)\">{{ $t(\"ClubActivities\") }}</p>\r\n\t\t\t\t<!-- 俱樂部活動 -->\r\n\t\t\t</div>\r\n\t\t\t<div class=\"check-result\" v-if=\"betTabIndex == 0\" @click=\"$router.push('/InitiatorBetResult')\">\r\n\t\t\t\t<p class=\"check-result-text\">{{ $t(\"ViewResults\") }}</p>\r\n\t\t\t\t<!-- 查看赛果 -->\r\n\t\t\t\t<div class=\"check-result-arrow\"></div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"check-result\" v-if=\"betTabIndex == 1\" @click=\"$router.push('/BetResult')\">\r\n\t\t\t\t<p class=\"check-result-text\">{{ $t(\"ViewResults\") }}</p>\r\n\t\t\t\t<!-- 查看赛果 -->\r\n\t\t\t\t<div class=\"check-result-arrow\"></div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"activities-bet\" v-show=\"betTabIndex == 0\">\r\n\t\t\t<div v-if=\"betMyListNoData == false\" class=\"activities-bet-content-list-wrap\">\r\n\t\t\t\t<div v-if=\"betMyList.length <= 0\" class=\"sipeLoading\">{{ $t(\"WipeLoading\") }}</div>\r\n\t\t\t\t<div class=\"activities-bet-content\">\r\n\t\t\t\t\t<div class=\"activities-bet-content-list\" v-for=\"item in betMyList\">\r\n\t\t\t\t\t\t<img v-if=\"item.ClubGambling.GamblingImg\" :src=\"item.ClubGambling.GamblingImg\" />\r\n            <img v-else src=\"@/assets/instead_logo1.png\" alt=\"\" class=\"sport-main-collapse-img\">\r\n\t\t\t\t\t\t<div class=\"activities-bet-content-list-left\">\r\n\t\t\t\t\t\t\t<div class=\"activities-bet-content-list-left-up\">\r\n\t\t\t\t\t\t\t\t<div class=\"activities-bet-content-list-left-up-title\">{{ item.ClubGambling.GamblingTitle }}</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class=\"activities-bet-content-list-left-up-date\">\r\n                <span>{{ $t('Deadline') }} : </span> \r\n                <p>{{ item.ClubGambling.Etime.slice( 0, item.ClubGambling.Etime.indexOf(\"T\") ) }}</p> \r\n                </div>\r\n\t\t\t\t\t\t\t<div class=\"activities-bet-content-list-left-down\">\r\n\t\t\t\t\t\t\t\t<div class=\"activities-bet-content-list-detail\">\r\n                  <p>{{ $t('Position') }} : </p>\r\n                  <p class=\"text-blue\">{{ item.ClubGambling.BetPosition }}</p>\r\n                  </div>\r\n                <div class=\"activities-bet-content-list-detail\">\r\n                  <p>{{ $t('Odds') }} : </p>\r\n                  <span>{{ item.ClubGambling.OddsValue }}</span>\r\n                </div>\r\n                <div class=\"activities-bet-content-list-detail\">\r\n                  <p>{{ $t('CashPledge') }} : </p>\r\n                  <span>{{ item.ClubGambling.Deposit }}</span>\r\n                </div>\r\n                <div class=\"activities-bet-content-list-detail\">\r\n                  <p>{{ $t('TotalAmountBet') }} : </p>\r\n                  <span>{{ item.ClubGambling.BettedAmount }}</span>\r\n                </div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"activities-bet-content-list-right\">\r\n\t\t\t\t\t\t\t<div class=\"bet-status-btn watchResult\" @click=\"goBetResult(1, item.ClubGambling.Id)\"></div>\r\n\t\t\t\t\t\t\t<div class=\"del\" @click=\"isTicketTipShow($event,item.ClubGambling)\"></div>\r\n              <!-- betDelete(item.ClubGambling) -->\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<!-- 我的投注無資料 -->\r\n\t\t\t<div class=\"no-data\" v-else>\r\n\t\t\t\t<p>{{ $t(\"NoData\") }}</p>\r\n\t\t\t\t<!-- 【 暂无数据 】 -->\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<!-- 投注俱樂部活動 -->\r\n\t\t<div class=\"activities-bet\" v-show=\"betTabIndex == 1\">\r\n\t\t\t<div v-if=\"betOtherListNoData == false\" class=\"activities-bet-content-list-wrap\">\r\n\t\t\t\t<div v-if=\"betOtherList.length <= 0\" class=\"sipeLoading\">{{ $t(\"WipeLoading\") }}</div>\r\n\t\t\t\t<div class=\"activities-bet-content\">\r\n\t\t\t\t\t<div class=\"activities-bet-content-list\" v-for=\"item in betOtherList\">\r\n\t\t\t\t\t\t<img v-if=\"item.ClubGambling.GamblingImg\" :src=\"item.ClubGambling.GamblingImg\" />\r\n            <img v-else src=\"@/assets/instead_logo1.png\" alt=\"\" class=\"sport-main-collapse-img\">\r\n\t\t\t\t\t\t<div class=\"activities-bet-content-list-left\">\r\n\t\t\t\t\t\t\t<div class=\"activities-bet-content-list-left-up\">\r\n\t\t\t\t\t\t\t\t<div class=\"activities-bet-content-list-left-up-title\">{{ item.ClubGambling.GamblingTitle }}</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class=\"activities-bet-content-list-left-up-date\">\r\n                <span>{{ $t('Deadline') }} : </span> \r\n                <p>{{ item.ClubGambling.Etime.slice( 0, item.ClubGambling.Etime.indexOf(\"T\") ) }}</p>\r\n              </div>\r\n\t\t\t\t\t\t\t<div class=\"activities-bet-content-list-left-down\">\r\n\t\t\t\t\t\t\t\t<div class=\"activities-bet-content-list-detail\">\r\n                  <p>{{ $t('Position') }} : </p>\r\n                  <span class=\"text-blue\">{{ item.ClubGambling.BetPosition }}</span>\r\n                  </div>\r\n                <div class=\"activities-bet-content-list-detail\">\r\n                  <p>{{ $t('Odds') }} : </p>\r\n                  <span>{{ item.ClubGambling.OddsValue }}</span>\r\n                </div>\r\n                <div class=\"activities-bet-content-list-detail\">\r\n                  <p>{{ $t('CashPledge') }} : </p>\r\n                  <span>{{ item.ClubGambling.Deposit }}</span>\r\n                </div>\r\n                <div class=\"activities-bet-content-list-detail\">\r\n                  <p>{{ $t('TotalAmountBet') }} : </p>\r\n                  <span>{{ item.ClubGambling.BettedAmount }}</span>\r\n                </div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"activities-bet-content-list-right\">\r\n\t\t\t\t\t\t\t<div class=\"bet-status-btn watchResult\" v-if=\"item.JoinStatus == '观看赛果' || item.JoinStatus == 'Watch the result'\" @click=\"goBetResult(2, item.ClubGambling.Id)\"></div>\r\n\t\t\t\t\t\t\t<!-- 查看賽果 -->\r\n\t\t\t\t\t\t\t<div class=\"bet-status-btn participate\" v-if=\"item.JoinStatus == '参与活动'  || item.JoinStatus == 'Participate'\" @click=\"goBet(item.ClubGambling.Id)\"></div>\r\n\t\t\t\t\t\t\t<!-- 立即参与 -->\r\n\t\t\t\t\t\t\t<div class=\"bet-status-btn unableParticipate\" v-if=\"item.JoinStatus == '无法参加' || item.JoinStatus == 'Unable to participate'\"></div>\r\n\t\t\t\t\t\t\t<!--  活動結束 -->\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<!-- 其他投注無資料 -->\r\n\t\t\t<div class=\"no-data\" v-else>\r\n\t\t\t\t<p>{{ $t(\"NoData\") }}</p>\r\n\t\t\t\t<!-- 【 暂无数据 】 -->\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"release-btn-wrap\">\r\n\t\t\t<div class=\"release-btn\" @click=\"$router.push('/gameSport')\">{{ $t(\"Release\") }}</div>\r\n\t\t\t<!--發布-->\r\n\t\t</div>\r\n\t</div>\r\n\t<!-- 購買門票彈窗 -->\r\n\t<transition name=\"fade\">\r\n\t\t<model v-if=\"isTicketTipOpen\"></model>\r\n\t</transition>\r\n\t<transition name=\"fade\">\r\n\t\t<div class=\"ticketTip\" :class=\"{'ticketTip-US': lang == 'en-US' && isEnglish == true}\" v-if=\"isTicketTipOpen\">\r\n\t\t\t<img src=\"../../assets/club/ticket-header.png\" alt=\"\">\r\n\t\t\t<p class=\"ticketTip-title\" :class=\"{ deleteConent: isTicketTipType == 'del' || isTicketTipType == 'delete' }\">\r\n        <span v-if=\"isTicketTipType == 'join'\">{{ $t('LeagueGame') }}</span>\r\n\t\t\t\t<!-- 本次联赛的竞赛活动为 --> \r\n        <span v-if=\"isTicketTipType == 'join'\">{{ matchName }}</span>\r\n        <span v-if=\"isTicketTipType == 'del' || isTicketTipType == 'delete'\">{{ $t('SureToDeleteThisEvent') }}</span>\r\n\r\n\t\t\t</p>\r\n\t\t\t<p class=\"ticketTip-content\" v-html=\"ticketTipText\" v-if=\"isTicketTipType == 'join'\"></p>\r\n\t\t\t<div class=\"ticketTip-btn\">\r\n\t\t\t\t<p v-if=\"isTicketTipType == 'join'\">{{ $t('ActiveTicket') }}</p>\r\n\t\t\t\t<!-- 门票需消耗100金币 -->\r\n\t\t\t\t<div class=\"ticketTip-btn-buy\" @click=\"getTicket()\" v-if=\"isTicketTipType == 'join'\">{{ $t('BuyNow') }}</div>\r\n\t\t\t\t<!-- 立即购买 -->\r\n\r\n        <!-- 確定刪除活動 -->\r\n        <div class=\"ticketTip-btn-buy\" @click=\"deleteFunction()\" v-if=\"isTicketTipType == 'del' || isTicketTipType == 'delete'\">{{ $t('Confirm') }}</div>\r\n        \r\n\t\t\t\t<div class=\"ticketTip-btn-cancel\" @click=\"isTicketTipOpen = !isTicketTipOpen\">{{ $t('Cancel') }}</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</transition>\r\n\r\n    <!-- 彈窗 -->\r\n    <transition name=\"fade\">\r\n      <model v-if=\"isOpen\"></model>\r\n    </transition>\r\n    <transition name=\"fade\">\r\n      <div class=\"fancyBox\" v-if=\"isOpen\">\r\n        <span>{{ callBackMsg }}!</span>\r\n        <div class=\"fancy-box-btn-wrap\">\r\n          <p class=\"confirmBtn\" @click=\"confirmBtnEvent()\">\r\n            {{ $t(\"Confirm\") }}\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </transition>\r\n</div>\r\n</template>\r\n<script>\r\nimport back from \"@/components/Botton/back.vue\";\r\nimport model from \"@/components/model\";\r\nimport { apiBuyClubActivityTicket, apiUpdateClubActivityStatus, apiGetClubActivityList} from \"@/api/ClubActivitys.js\";\r\nimport { apiGetClubGamblingList, apiUpdateClubGamblingsStatus} from \"@/api/ClubGamblings.js\";\r\nexport default {\r\n  components: {\r\n    back,\r\n    model\r\n  },\r\n  data() {\r\n    return {\r\n      lang: \"\",\r\n      isEnglish: false,\r\n\r\n      isManagement: 0,\r\n      clubId: undefined,\r\n      isOpen: false,\r\n\r\n      activeCategoryIndex: 0,\r\n      tabIndex: 0,\r\n      betTabIndex: 0,\r\n      latestActivitiesObj: [],\r\n      historyActivitiesObj: [],\r\n      isTicketTipOpen: false,\r\n      ticketTipText:\r\n        `${this.$t(\"RuleOfActivity\")}：<br />1、${this.$t(\"VictoryOrDefeat\")}：<br />①${this.$t(\"VictoryOrDefeatOne\")}<br />②${this.$t(\"VictoryOrDefeatTwo\")}<br />2、${this.$t(\"ParticipationRules\")}：<br />①${this.$t(\"ParticipationRulesOne\")}<br />②${this.$t(\"ParticipationRulesTwo\")}<br />3、${this.$t(\"RewardRules\")}：<br />①${this.$t(\"RewardRulesOne\")}<br />②${this.$t(\"RewardRulesTwo\")}<br />③${this.$t(\"RewardRulesThree\")}<br />${this.$t(\"ActivityRulesWarning\")}`,\r\n      avtiveId: \"\",\r\n      activeNodata: false,\r\n      historyNoData: false,\r\n      matchName: \"\",\r\n      // 投注活動\r\n      betMyList: [],\r\n      betOtherList: [],\r\n      betMyListNoData: false,\r\n      betOtherListNoData: false,\r\n\r\n      wipeLoading: false,\r\n      callBackMsg: \"\",\r\n\r\n      // v-infinite-scroll 套件\r\n      busy: false,\r\n      immediate: false,\r\n      lastestIndexNum: 1,\r\n      historyIndexNum: 1,\r\n      lastestTotalPages: \"\",\r\n      historyTotalPages:\"\",\r\n\r\n      // 彈窗\r\n      isTicketTipType: \"\",\r\n      deleteData:\"\"\r\n    };\r\n  },\r\n  created() {\r\n    // 讀取語系\r\n    this.lang = JSON.parse(localStorage.getItem(\"lang\")).tag;\r\n    // 讀取是否為管理階\r\n    this.isManagement = localStorage.getItem(\"isManagement\");\r\n    // 取得clubId\r\n    this.clubId = localStorage.getItem(\"ClubId\");\r\n\r\n\r\n    if (localStorage.getItem(\"activeCategoryIndex\") == null) {\r\n      localStorage.setItem(\"activeCategoryIndex\", 0);\r\n    }\r\n    if (localStorage.getItem(\"tabIndex\") == null) {\r\n      localStorage.setItem(\"tabIndex\", 0);\r\n    }\r\n    if (localStorage.getItem(\"betTabIndex\") == null) {\r\n      localStorage.setItem(\"betTabIndex\", 0);\r\n    }\r\n\r\n    if (localStorage.getItem(\"activeCategoryIndex\") == \"0\") {\r\n      this.getLastestActivies();\r\n      this.activeCategoryIndex = 0;\r\n      this.tabIndex = localStorage.getItem(\"tabIndex\");\r\n      if (this.tabIndex == 1) {\r\n        this.getHistoryActivies();\r\n      }\r\n    } else if (localStorage.getItem(\"activeCategoryIndex\") == \"1\") {\r\n      this.activeCategoryIndex = 1;\r\n      this.getActiveBetList();\r\n      this.betTabIndex = localStorage.getItem(\"betTabIndex\");\r\n    }\r\n  },\r\n  methods: {\r\n    // 獲取最新活動\r\n    getLastestActivies() {\r\n      let data = {\r\n        Type: 1,\r\n        index: this.lastestIndexNum,\r\n        count: 10\r\n      }\r\n      apiGetClubActivityList(data, true).then(res => {\r\n        if (res.Code == \"600\") {\r\n          this.isOpen = true;\r\n          this.callBackMsg = res.Message;\r\n          this.busy = true;\r\n          return;\r\n        }\r\n        res.Data.Data.length <= 0 ? this.activeNodata = true : this.activeNodata = false;\r\n        // 俱樂部活動頁的資料\r\n        this.latestActivitiesObj = res.Data.Data;\r\n        this.lastestTotalPages = res.Data.TotalPages;\r\n      })\r\n      // this.busy = false;\r\n      this.tabIndex = 0;\r\n      localStorage.setItem(\"activeCategoryIndex\", this.activeCategoryIndex);\r\n    },\r\n\r\n    // 無限加載最新活動\r\n    loadLastest() {\r\n      if (this.lastestIndexNum >= this.lastestTotalPages ) {\r\n        return\r\n      }\r\n      this.busy = true;\r\n      this.lastestIndexNum++;\r\n      let data = {\r\n        Type: 1,\r\n        index: this.lastestIndexNum,\r\n        count: 10\r\n      }\r\n      apiGetClubActivityList(data, true).then(res => {\r\n        if (res.Code == \"600\") {\r\n          this.isOpen = true;\r\n          this.callBackMsg = res.Message;\r\n          this.busy = true;\r\n          return;\r\n        }\r\n        // 俱樂部活動頁的資料\r\n        if (res.Data.Data.length == 0) {\r\n          this.busy = true;\r\n        } else if(res.Data.Data.length > 0){\r\n          res.Data.Data.forEach(el => {\r\n            this.latestActivitiesObj.push(el);\r\n            this.busy = false;\r\n          })\r\n        }\r\n      })\r\n    },\r\n\r\n\r\n    // 獲取歷史活動\r\n    getHistoryActivies() {\r\n      let data = {\r\n        Type: 2,\r\n        index: this.historyIndexNum,\r\n        count: 10\r\n      }\r\n      apiGetClubActivityList(data, true).then(res => {\r\n        if (res.Code == \"600\") {\r\n          this.isOpen = true;\r\n          this.callBackMsg = res.Message;\r\n          return;\r\n        }\r\n        res.Data.Data.length <= 0 ? this.historyNoData = true : this.historyNoData = false;\r\n        // 俱樂部活動頁的資料\r\n        this.historyActivitiesObj = res.Data.Data;\r\n        this.historyTotalPages = res.Data.TotalPages;\r\n      })\r\n      this.tabIndex = 1;\r\n      localStorage.setItem(\"activeCategoryIndex\", this.activeCategoryIndex);\r\n    },\r\n\r\n    // 無限加載歷史活動\r\n    loadHistory() {\r\n      if (this.historyIndexNum >= this.historyTotalPages ) {\r\n        return\r\n      }\r\n      this.busy = true;\r\n      this.historyIndexNum++;\r\n      let data = {\r\n        Type: 2,\r\n        index: this.historyIndexNum,\r\n        count: 10\r\n      }\r\n      apiGetClubActivityList(data, true).then(res => {\r\n        if (res.Code == \"600\") {\r\n          this.isOpen = true;\r\n          this.callBackMsg = res.Message;\r\n          this.busy = true;\r\n          return;\r\n        }\r\n        // 俱樂部活動頁的資料\r\n        if (res.Data.Data.length == 0) {\r\n          this.busy = true;\r\n        } else if(res.Data.Data.length > 0){\r\n          res.Data.Data.forEach(el => {\r\n            this.historyActivitiesObj.push(el);\r\n            this.busy = false;\r\n          })\r\n        }\r\n      })\r\n    },\r\n\r\n    // 取得俱樂部投注列表\r\n    getActiveBetList() {\r\n      apiGetClubGamblingList(\"\", true).then(res => {\r\n        this.betMyList = res.Data.MyGamblings;\r\n        this.betOtherList = res.Data.OtherGamblings;\r\n        if (this.betMyList == null || this.betMyList.length == 0) {\r\n          this.betMyListNoData = true;\r\n        }\r\n        if (this.betOtherList == null || this.betOtherList.length == 0) {\r\n          this.betOtherListNoData = true;\r\n        }\r\n      });\r\n       this.betTabIndex = 0;\r\n      localStorage.setItem(\"activeCategoryIndex\", this.activeCategoryIndex);\r\n    },\r\n\r\n    // 切換俱樂部挑戰分頁\r\n    changeTabIndex(index) {\r\n      this.tabIndex = index;\r\n      localStorage.setItem(\"tabIndex\", index);\r\n      // 最新\r\n      if (index == 0) {\r\n        this.latestActivitiesObj = [];\r\n        this.lastestIndexNum = 1;\r\n        this.busy = false;\r\n        this.getLastestActivies();\r\n      }\r\n      // 歷史\r\n      if (index == 1) {\r\n        this.historyActivitiesObj = [];\r\n        this.historyIndexNum = 1;\r\n        this.busy = false;\r\n        this.getHistoryActivies();\r\n      }\r\n    },\r\n    // 切換俱樂部投注分頁\r\n    changeBetTabIndex(index) {\r\n      this.betTabIndex = index;\r\n      localStorage.setItem(\"betTabIndex\", index);\r\n    },\r\n\r\n    // 活動開啟發佈頁面\r\n    activesRelease() {\r\n      this.$router.push('/ClubActivitiesRelease');\r\n    },\r\n\r\n    // 購買活動門票\r\n    getTicket() {\r\n      console.log(this.avtiveId)\r\n      let data = {\r\n        ClubActivityId: this.avtiveId\r\n      };\r\n      apiBuyClubActivityTicket(data, true).then(res => {\r\n        if(Math.abs(res.Code) >= 600) {\r\n          let vm = this;\r\n          const m = vm.$message({\r\n            message: res.Message,\r\n            duration: 3000,\r\n            type: \"error\",\r\n            center: true\r\n          });\r\n          setTimeout(() => m.close(), 2000);\r\n          return;\r\n        }\r\n        localStorage.setItem(\"AcvtiveId\", this.avtiveId);\r\n        let vm = this;\r\n        const m = vm.$message({\r\n          message: this.$t('SuccessfulPurchase'),\r\n          duration: 3000,\r\n          type: \"success\",\r\n          center: true\r\n        });\r\n        setTimeout(() => m.close(), 2000);\r\n        setTimeout(() => {\r\n          this.isTicketTipOpen = false;\r\n          this.$router.push(\"/ClubActivityMatch\");\r\n        }, 3000);\r\n      });\r\n    },\r\n\r\n    // 繼續下注\r\n    continueBet(avtiveId) {\r\n      localStorage.setItem(\"AcvtiveId\", avtiveId);\r\n      this.$router.push(\"/ClubActivityMatch\");\r\n    },\r\n\r\n    // 參加成功\r\n    goResultDetail(avtiveId){\r\n      localStorage.setItem(\"AcvtiveId\", avtiveId);\r\n      this.$router.push(\"/ActivityMatchResultDetail\");\r\n    },\r\n\r\n    // 刪除最新活動\r\n    deleteActive(){\r\n      let data = {\r\n          Status: -1,\r\n          ClubActivityId: this.avtiveId,\r\n      };\r\n      apiUpdateClubActivityStatus(data, true).then(res => {\r\n        if (Math.abs(res.Code) >= 600) {\r\n          let vm = this;\r\n          const x = vm.$message({\r\n            message: res.Message,\r\n            duration: 3000,\r\n            type: \"warning\",\r\n            center: true\r\n          });\r\n          setTimeout(() => x.close(), 1000);\r\n        } else {\r\n          let vm = this;\r\n          const m = vm.$message({\r\n            message: this.$t('successfullyDeleted'),\r\n            duration: 3000,\r\n            type: \"success\",\r\n            center: true\r\n          });\r\n          setTimeout(() => {\r\n            m.close();\r\n            if (this.tabIndex == 0) {\r\n              this.getLastestActivies();\r\n              this.tabIndex = 0\r\n              return;\r\n            }\r\n            if (this.tabIndex == 1) {\r\n              this.getHistoryActivies();\r\n              this.tabIndex = 1;\r\n              return;\r\n            }\r\n          }, 1000);\r\n        }\r\n        this.isTicketTipOpen = false;\r\n      });\r\n    },\r\n\r\n    // 前往俱樂部投注\r\n    goBet(id) {\r\n      localStorage.setItem(\"betId\", id);\r\n      setTimeout(() => {\r\n        this.$router.push(\"/clubActiveBet\");\r\n      }, 250);\r\n    },\r\n\r\n    // 查看單一賽果 type:  1 = 發起人賽果;  2 = 其他人賽果\r\n    goBetResult(type, id) {\r\n      localStorage.setItem(\"betId\", id);\r\n      localStorage.setItem(\"singleResult\", true)\r\n      if (type == 1) {\r\n        setTimeout(() => {\r\n          this.$router.push(\"/InitiatorBetResult\");\r\n        }, 250);\r\n      } else {\r\n        setTimeout(() => {\r\n          this.$router.push(\"/BetResult\");\r\n        }, 250);\r\n      }\r\n    },\r\n\r\n    // 俱樂部投注刪除\r\n    betDelete() {\r\n      let data = {\r\n        Id: this.deleteData.Id,\r\n        Status: -1,\r\n      }\r\n      apiUpdateClubGamblingsStatus(data, true).then(res => {\r\n        if (Math.abs(res.Code) >= 600) {\r\n          let vm = this;\r\n          const m = vm.$message({\r\n            message: res.Message,\r\n            duration: 3000,\r\n            type: \"warning\",\r\n            center: true\r\n          });\r\n          setTimeout(() => m.close(), 2000);\r\n          this.isTicketTipOpen = false;\r\n          return;\r\n        }\r\n        if(res.Success) {\r\n          let vm = this;\r\n          const m = vm.$message({\r\n            message: this.$t('successfullyDeleted'),\r\n            duration: 3000,\r\n            type: \"success\",\r\n            center: true\r\n          });\r\n          setTimeout(() => m.close(), 2000);\r\n          // 再獲取一次列表\r\n          this.getActiveBetList();\r\n          this.isTicketTipOpen = false;\r\n          return;\r\n        }else if (res.Success == false) {\r\n          let vm = this;\r\n          const m = vm.$message({\r\n            message: this.$t(\"DataError\"),\r\n            duration: 3000,\r\n            type: \"warning\",\r\n            center: true\r\n          });\r\n          setTimeout(() => m.close(), 2000);\r\n          return;\r\n        }\r\n        this.isTicketTipOpen = false;\r\n      });\r\n    },\r\n    //刪除活動function選擇\r\n    deleteFunction () {\r\n      this.isTicketTipType == 'delete' ? this.deleteActive() : this.betDelete()\r\n    },\r\n\r\n    //彈窗顯示\r\n    isTicketTipShow (e,delData) {\r\n      this.isTicketTipType = e.toElement.className;\r\n      this.deleteData = delData;\r\n      this.isTicketTipOpen = !this.isTicketTipOpen;\r\n\r\n    },\r\n    // 彈窗確認按鈕事件\r\n    confirmBtnEvent() {\r\n      this.$router.push(\"/CreateClub\");\r\n    },\r\n  },\r\n};\r\n</script>\r\n"]}]}