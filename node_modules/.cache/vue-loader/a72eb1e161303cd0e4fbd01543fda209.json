{"remainingRequest":"C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\src\\views\\ForgetPassword.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\src\\views\\ForgetPassword.vue","mtime":1606980098646},{"path":"C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { apiResetPasswordByPhoneNumber, apiGetSMSCode } from \"@/api/User\";\r\nimport back from \"../components/Botton/back.vue\";\r\n\r\nexport default {\r\n  components: {\r\n    back\r\n  },\r\n  data() {\r\n    return {\r\n      UName: \"\",\r\n      PhoneNumber: \"\",\r\n      SMSCode: \"\",\r\n      ResetPassword: \"\",\r\n      ResetPasswordVerify: \"\",\r\n      CodeContent: \"获取验证码\",\r\n      button: false\r\n    };\r\n  },\r\n  methods: {\r\n    backPassword() {\r\n      let data = {\r\n        UName: this.UName,\r\n        PhoneNumber: this.PhoneNumber,\r\n        SMSCode: this.SMSCode,\r\n        ResetPassword: this.ResetPassword,\r\n        ResetPasswordVerify: this.ResetPasswordVerify\r\n      };\r\n      if (this.UName == \"\") {\r\n        const m = this.$message({\r\n          message: this.$t(\"AccountEmpty\"),\r\n          duration: 1000,\r\n          type: \"error\",\r\n          center: true\r\n        });\r\n        setTimeout(() => m.close(), 1200);\r\n        return;\r\n      };\r\n      if (this.PhoneNumber == \"\") {\r\n        const m = this.$message({\r\n          message: this.$t(\"PhoneBlank\"),\r\n          duration: 1000,\r\n          type: \"error\",\r\n          center: true\r\n        });\r\n        setTimeout(() => m.close(), 1200);\r\n        return;\r\n      };\r\n      if (this.SMSCode == \"\") {\r\n        const m = this.$message({\r\n          message: this.$t(\"SMSEmpty\"),\r\n          duration: 1000,\r\n          type: \"error\",\r\n          center: true\r\n        });\r\n        setTimeout(() => m.close(), 1200);\r\n        return;\r\n      };\r\n      if (this.ResetPassword == \"\") {\r\n        const m = this.$message({\r\n          message: this.$t(\"PasswordBlank\"),\r\n          duration: 1000,\r\n          type: \"error\",\r\n          center: true\r\n        });\r\n        setTimeout(() => m.close(), 1200);\r\n        return;\r\n      };\r\n      if (this.ResetPassword != this.ResetPasswordVerify) {\r\n        const m = this.$message({\r\n          message: this.$t(\"PasswordAreInconsistent\"),\r\n          duration: 1000,\r\n          type: \"error\",\r\n          center: true\r\n        });\r\n        setTimeout(() => m.close(), 1200);\r\n        return;\r\n      }\r\n      apiResetPasswordByPhoneNumber(data).then(res => {\r\n        if(Math.abs(res.Code) >= 600) {\r\n          const m = this.$message({\r\n            message: res.Message,\r\n            duration: 1000,\r\n            type: \"error\",\r\n            center: true\r\n          });\r\n          setTimeout(() => m.close(), 1200);\r\n        } else {\r\n          const m = this.$message({\r\n            message: this.$t(\"Modify_Success\"),\r\n            duration: 1000,\r\n            type: \"success\",\r\n            center: true\r\n          });\r\n          setTimeout(() => m.close(), 1200);\r\n          setTimeout(() => {\r\n            this.$router.push(\"/\");\r\n          });\r\n        }\r\n      });\r\n    },\r\n    getCode() {\r\n      if (!/^1(3|4|5|6|7|8|9)\\d{9}$/.test(this.PhoneNumber)) {\r\n        this.$message({\r\n          message: this.$t(\"WrongFormatOfPhoneNumber\"),\r\n          duration: 3000,\r\n          type: \"error\",\r\n          center: true\r\n        });\r\n        return false;\r\n      }\r\n      this.CodeContent = 60;\r\n      let cleari = setInterval(() => {\r\n        let second = this.CodeContent;\r\n        second = second - 1;\r\n        this.CodeContent = second;\r\n        this.button = true;\r\n        if (this.CodeContent === 0) {\r\n          clearInterval(cleari);\r\n          this.CodeContent = \"获取验证码\";\r\n          this.button = false;\r\n        }\r\n      }, 1000);\r\n\r\n      let phone = this.PhoneNumber;\r\n\r\n      apiGetSMSCode(phone).then(res => {});\r\n    }\r\n  }\r\n};\r\n",null]}