{"remainingRequest":"C:\\work\\竞猜可换色板\\node_modules\\thread-loader\\dist\\cjs.js!C:\\work\\竞猜可换色板\\node_modules\\babel-loader\\lib\\index.js!C:\\work\\竞猜可换色板\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\work\\竞猜可换色板\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\work\\竞猜可换色板\\src\\views\\Match.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\work\\竞猜可换色板\\src\\views\\Match.vue","mtime":1605599793593},{"path":"C:\\work\\竞猜可换色板\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\work\\竞猜可换色板\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\work\\竞猜可换色板\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\work\\竞猜可换色板\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\work\\竞猜可换色板\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.match\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:\\\\work\\\\\\u7ADE\\u731C\\u53EF\\u6362\\u8272\\u677F\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport NavBottom from \"@/components/Main/NavBottom.vue\";\nimport back from \"../components/Botton/back.vue\";\nimport model from \"../components/model\";\nimport FlowAd from \"@/components/FlowAd\";\nimport { apiGetFlowAdByType } from \"@/api/FlowAd.js\";\nimport { apiGetBetResponse, apiBet, apiGetMatchItemAndMainPlay } from \"../api/match.js\";\nimport { betSuccess, betPass } from \"@/utils/medias\";\nexport default {\n  watch: {\n    //获得钱\n    betnum: function betnum() {\n      if (this.betinfo.PlayType == 3 || this.betinfo.PlayType == 4 || this.betinfo.PlayType == 5 || this.betinfo.PlayType == 6) {\n        this.money = (this.betnum * this.betinfo.OddsValue).toFixed(2);\n      } else {\n        this.money = (this.betnum * this.betinfo.OddsValue - this.betnum).toFixed(2);\n      }\n\n      this.rangeValue = parseInt(this.betnum);\n    }\n  },\n  components: {\n    NavBottom: NavBottom,\n    back: back,\n    model: model,\n    FlowAd: FlowAd\n  },\n  data: function data() {\n    return {\n      titlenum: \"\",\n      tab1: false,\n      tab2: false,\n      tab3: false,\n      show: false,\n      showbet: false,\n      betnum: 0,\n      rangeValue: 0,\n      rangeMaxVal: 0,\n      money: \"\",\n      playtype: 0,\n      playId: \"\",\n      betinfo: \"\",\n      num: 0,\n      fastnum: \"\",\n      loading: false,\n      isrunTwice: false,\n      IsOddsChange: false,\n      lastOdds: \"\",\n      newOdds: \"\",\n      timer: {\n        timer1: \"\",\n        timer2: \"\",\n        timer3: \"\"\n      },\n      countDownTimer: \"\",\n      countDownTime: 30,\n      isOpenAd: false,\n      adTypeId: 0,\n      isDisable: false,\n      teamMatchItem: []\n    };\n  },\n  created: function created() {\n    // this.gettitlenum();\n    this.$store.commit(\"upMatchitems\", \"\");\n    this.titlenum = localStorage.getItem(\"titlenum\");\n    this.initGetMatchPlay(); // await this.default();\n  },\n  methods: {\n    fastbet: function fastbet(id) {\n      this.fastnum = id;\n      this.betnum = id;\n    },\n    getTime: function getTime(time) {\n      if (time == \"\") {\n        return \"0\";\n      }\n\n      var timeNum = Number(time);\n      return timeNum < 45 ? this.$t(\"FirstHalf\") + timeNum + \"'\" // 【 上半场 】\n      : timeNum == 45 ? this.$t(\"Halftime\") // 【 半场 】\n      : this.$t(\"SecondHalf\") + (timeNum - 45) + \"\"; // 【 下半场 】\n    },\n    gojump: function gojump(id) {\n      this.$router.push(\"/matchmore\");\n    },\n    //关闭下注\n    closedialog: function closedialog() {\n      this.showbet = false;\n    },\n    //下注界面\n    showBetFn: function showBetFn(id) {\n      var _this = this;\n\n      this.betnum = 0;\n      this.playId = id;\n\n      if (this.playId == -1) {\n        return;\n      }\n\n      var data = {\n        playId: id,\n        betType: 1\n      };\n      apiGetBetResponse(data, true).then(function (res) {\n        if (res.Code === 600) {\n          _this.$message({\n            message: res.Message,\n            duration: 3000,\n            type: \"error\",\n            center: true\n          });\n        } else {\n          _this.showbet = true;\n          _this.betinfo = res; // 上次的舊賠率\n\n          _this.lastOdds = _this.betinfo.OddsValue; // 投注金額預設最低投注金額\n\n          _this.betnum = res.MinBetIntegral;\n          _this.rangeValue = _this.betnum; // 判斷最大單筆投注金額回傳是否為-1 如是拉桿的最大值為10000\n\n          if (res.MaxBetIntegral === -1) _this.rangeMaxVal = 10000;else _this.rangeMaxVal = res.MaxBetIntegral; // 判斷玩家餘額大於最大可投注額時，滾動條最大值設為最大可投注額\n\n          if (_this.betinfo.AvailableIntegral > _this.rangeMaxVal) {\n            _this.rangeMaxVal = 10000;\n            _this.isDisable = false;\n            return;\n          } // 判斷玩家餘額小於最小可投注額時，指针放置在开始位置显示最小可投注额 且不可拖动\n\n\n          if (_this.betinfo.AvailableIntegral < _this.betinfo.MinBetIntegral) {\n            _this.isDisable = true;\n            return;\n          } // 判斷玩家餘額小於最大可投注額時，滾動條最大值設為玩家餘額\n\n\n          if (_this.betinfo.AvailableIntegral < _this.rangeMaxVal) {\n            _this.rangeMaxVal = _this.betinfo.AvailableIntegral;\n            _this.isDisable = false;\n            return;\n          }\n        }\n      });\n    },\n    changeRangeVal: function changeRangeVal() {\n      this.betnum = this.rangeValue;\n      var tooltip = document.querySelector(\".slide-tooltip\");\n      var rangeBtn = document.querySelector(\".el-slider__bar\");\n      var tooltipWidth = tooltip.getBoundingClientRect().width; // 提示框最正確的寬度\n\n      var rangeBtnOffset = rangeBtn.offsetWidth; // 拖動拉桿時拉桿條的偏移量\n\n      var rangeBtnOffsetParent = rangeBtn.offsetParent.offsetLeft; // 拉桿條離父層左邊(父層padding-left)的偏移量\n\n      var tolerance = tooltipWidth / 2 + (rangeBtnOffsetParent - tooltipWidth); // 公差\n\n      if (!this.isrunTwice) {\n        tooltip.style.left = tolerance + \"px\";\n        this.isrunTwice = true;\n      } else {\n        tooltip.style.left = rangeBtnOffset + tolerance + \"px\";\n      }\n    },\n    //投注金额\n    addbet: function addbet() {\n      this.betnum = this.betnum + 10;\n    },\n    losebet: function losebet() {\n      if (this.betnum == 0) {\n        return;\n      }\n\n      this.betnum = this.betnum - 10;\n    },\n    //可赢金额\n    getmoney1: function getmoney1() {// this.money = this.betnum * this.betinfo.OddsValue;\n      // this.money = this.money.toFixed(2);\n    },\n    // 點擊下注時判斷\n    betClick: function betClick() {\n      var _this2 = this;\n\n      this.newChangeOdds().then(function () {\n        // 如果兩個賠率不同\n        if (_this2.lastOdds !== _this2.newOdds) {\n          _this2.showbet = false;\n          _this2.IsOddsChange = true;\n\n          _this2.getMatchPlay();\n        } else {\n          _this2.bet();\n        }\n      });\n    },\n    // 若前後賠率相同則執行投注\n    bet: function () {\n      var _bet = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var _this3 = this;\n\n        var hthis, data;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                hthis = this;\n                data = {\n                  playId: this.playId,\n                  betIntegral: this.betnum,\n                  betType: 1\n                };\n\n                if (!(this.betnum >= 10)) {\n                  _context.next = 7;\n                  break;\n                }\n\n                _context.next = 5;\n                return apiBet(data, true).then(function (res) {\n                  if (res.IsBetSucceed) {\n                    _this3.$message({\n                      message: _this3.$t(\"BettingSuccess\"),\n                      // 【 下注成功 】\n                      duration: 2500,\n                      type: \"success\",\n                      center: true\n                    });\n\n                    _this3.fastnum = \"\";\n                    _this3.showbet = false; // 下注成功音效\n\n                    betSuccess.play(); // 彈出廣告\n\n                    _this3.adTypeId = 2;\n                    var _data = {\n                      flowAdTypeId: _this3.adTypeId\n                    };\n                    apiGetFlowAdByType(_data, true).then(function (res) {\n                      if (Object.keys(res.Data).length > 0) {\n                        _this3.isOpenAd = true;\n                      } else {\n                        _this3.isOpenAd = false;\n                      }\n                    });\n                  } else if (res.Code == 600) {\n                    _this3.$message({\n                      message: res.Message,\n                      duration: 3000,\n                      type: \"error\",\n                      center: true\n                    });\n\n                    if (res.Message == \"余额不足\") {\n                      // 彈出廣告\n                      setTimeout(function () {\n                        _this3.isOpenAd = true;\n                        _this3.adTypeId = 2;\n                      }, 1000);\n                      _this3.showbet = false;\n                    }\n                  }\n                });\n\n              case 5:\n                _context.next = 8;\n                break;\n\n              case 7:\n                this.$message.error(this.$t(\"BetErrorMessage\")); // 【 投注金额需要大于10元 】\n\n              case 8:\n                // 刷新API\n                this.getMatchPlay();\n\n              case 9:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function bet() {\n        return _bet.apply(this, arguments);\n      }\n\n      return bet;\n    }(),\n    default: function () {\n      var _default2 = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2() {\n        var _this4 = this;\n\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                // 如果外面是點選[全部]進來的 \n                if (this.titlenum == -1) {\n                  // 沒有早盤的話跑今日\n                  if (this.$store.state.match.Matchitems.length == 0) {\n                    this.tabshow(1).then(function () {\n                      // 沒有今日的話跑滾球\n                      if (_this4.$store.state.match.Matchitems.length == 0) {\n                        _this4.tabshow(2);\n                      }\n                    });\n                  }\n                } // 如果外面是點選[早盤]進來的 \n                else if (this.titlenum == 0) {\n                    this.tabshow(0);\n                  } // 如果外面是點選[今日]進來的 \n                  else if (this.titlenum == 1) {\n                      this.tabshow(1);\n                    } // 如果外面是點選[滾球]進來的 \n                    else if (this.titlenum == 2) {\n                        this.tabshow(2);\n                      }\n\n                this.cycling();\n\n              case 2:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function _default() {\n        return _default2.apply(this, arguments);\n      }\n\n      return _default;\n    }(),\n    //畫面一進來時候获取早盤玩法\n    initGetMatchPlay: function () {\n      var _initGetMatchPlay = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee3() {\n        var _this5 = this;\n\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                this.tabshow(0).then(function () {\n                  _this5.default();\n                });\n\n              case 1:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function initGetMatchPlay() {\n        return _initGetMatchPlay.apply(this, arguments);\n      }\n\n      return initGetMatchPlay;\n    }(),\n    //获取赛事玩法\n    getMatchPlay: function () {\n      var _getMatchPlay = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee4() {\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                this.$store.dispatch(\"asyncGetMatchplay\", {\n                  id: this.playtype\n                });\n\n              case 1:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function getMatchPlay() {\n        return _getMatchPlay.apply(this, arguments);\n      }\n\n      return getMatchPlay;\n    }(),\n    tabshow: function () {\n      var _tabshow = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee5(id) {\n        return regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                this.$store.commit(\"uploading\", true);\n                this.loading = true;\n                this.playtype = id;\n\n                if (id == 0) {\n                  this.tab1 = true;\n                  this.tab2 = false;\n                  this.tab3 = false;\n                }\n\n                if (id == 1) {\n                  this.tab1 = false;\n                  this.tab2 = true;\n                  this.tab3 = false;\n                }\n\n                if (id == 2) {\n                  this.tab1 = false;\n                  this.tab2 = false;\n                  this.tab3 = true;\n                }\n\n                _context5.next = 8;\n                return this.$store.dispatch(\"asyncGetMatchplay\", {\n                  id: id\n                });\n\n              case 8:\n                this.cycling();\n\n              case 9:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function tabshow(_x) {\n        return _tabshow.apply(this, arguments);\n      }\n\n      return tabshow;\n    }(),\n    cycling: function cycling() {\n      var _this6 = this;\n\n      // 早盤\n      if (this.tab1) {\n        // 停止全部計時器\n        this.destroyed(); // 再開啟計時器\n\n        this.timer.timer1 = setInterval(function () {\n          _this6.getMatchPlay();\n        }, 30000);\n        this.countDownTime = 30;\n        this.countDown();\n      } // 今日\n\n\n      if (this.tab2) {\n        // 停止全部計時器\n        this.destroyed(); // 再開啟計時器\n\n        this.timer.timer2 = setInterval(function () {\n          _this6.getMatchPlay();\n        }, 30000);\n        this.countDownTime = 30;\n        this.countDown();\n      } // 滾球\n\n\n      if (this.tab3) {\n        // 停止全部計時器\n        this.destroyed(); // 再開啟計時器\n\n        this.timer.timer3 = setInterval(function () {\n          _this6.getMatchPlay();\n        }, 2000);\n      }\n    },\n    // 倒數計時\n    countDown: function countDown() {\n      var _this7 = this;\n\n      this.countDownTimer = setInterval(function () {\n        if (_this7.countDownTime <= 0) {\n          _this7.countDownTime = 30;\n        }\n\n        _this7.countDownTime = _this7.countDownTime - 1;\n      }, 1000);\n    },\n    // 手動刷新\n    refresh: function refresh() {\n      this.getMatchPlay();\n      this.cycling();\n      var vm = this;\n      var m = vm.$message({\n        message: this.$t(\"RefreshedSuccessfully\"),\n        duration: 3000,\n        type: \"success\",\n        center: true\n      });\n      setTimeout(function () {\n        m.close();\n      }, 2000);\n    },\n    // 停止全部計時器\n    destroyed: function destroyed() {\n      clearInterval(this.timer.timer1);\n      clearInterval(this.timer.timer2);\n      clearInterval(this.timer.timer3);\n      clearInterval(this.countDownTimer);\n    },\n    gettitlenum: function gettitlenum() {\n      if (this.$store.state.match.titlenum == 2) {\n        this.tabshow(2);\n        this.$store.commit(\"uptitlenum\", {\n          id: -1\n        });\n        return;\n      }\n\n      if (this.$store.state.match.titlenum == 0) {\n        this.tabshow(0);\n        this.$store.commit(\"uptitlenum\", {\n          id: -1\n        });\n        return;\n      }\n    },\n    // 新賠率\n    newChangeOdds: function () {\n      var _newChangeOdds = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee6() {\n        var _this8 = this;\n\n        var data;\n        return regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                if (!(this.playId == -1)) {\n                  _context6.next = 2;\n                  break;\n                }\n\n                return _context6.abrupt(\"return\");\n\n              case 2:\n                data = {\n                  playId: this.playId,\n                  betType: 1\n                };\n                _context6.next = 5;\n                return apiGetBetResponse(data, true).then(function (res) {\n                  if (res.Code === 600) {\n                    _this8.$message({\n                      message: res.Message,\n                      duration: 3000,\n                      type: \"error\",\n                      center: true\n                    });\n                  } else {\n                    _this8.betinfo = res;\n                    _this8.newOdds = _this8.betinfo.OddsValue;\n                  }\n                });\n\n              case 5:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function newChangeOdds() {\n        return _newChangeOdds.apply(this, arguments);\n      }\n\n      return newChangeOdds;\n    }(),\n    closeOddsChange: function closeOddsChange() {\n      this.getMatchPlay();\n      this.showbet = false;\n      this.IsOddsChange = false;\n    },\n    // 俱樂部投注\n    goClubBet: function goClubBet(item) {\n      var _this9 = this;\n\n      // 判斷有無獨贏玩法\n      if (item.CanJoinGambling == true) {\n        localStorage.setItem(\"matchItemId\", item.MatchItemId);\n        setTimeout(function () {\n          _this9.$router.push(\"InitiateActivities\");\n        }, 250);\n      } else {\n        var vm = this;\n        var m = vm.$message({\n          message: \"无独赢赔率，请选择其他比赛。\",\n          duration: 3000,\n          type: \"error\",\n          center: true\n        });\n        setTimeout(function () {\n          return m.close();\n        }, 2000);\n      }\n    }\n  },\n  // 跳出本頁時 vue hook(生命週期)\n  destroyed: function destroyed() {\n    clearInterval(this.timer.timer1);\n    clearInterval(this.timer.timer2);\n    clearInterval(this.timer.timer3);\n    clearInterval(this.countDownTimer); // this.$store.commit(\"upMatchitems\", \"\")\n  }\n};",null]}