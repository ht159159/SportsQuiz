{"remainingRequest":"C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\src\\components\\MainGame.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\src\\components\\MainGame.vue","mtime":1607656423521},{"path":"C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.sort\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\Yang\\\\Desktop\\\\\\u65B0\\u589E\\u8CC7\\u6599\\u593E\\\\\\u7ADE\\u731C\\u53EF\\u6362\\u8272\\u677F\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { apiGetRecommendMatchItem, apiGetBetResponse, apiBetRecommend, apiIsMaintenance } from \"@/api/match.js\";\nimport Tinder from \"vue-tinder\";\nimport Vue from \"vue\";\nimport { Dialog, Image } from \"vant\";\nimport { randomBytes } from \"crypto\";\nimport { betSuccess, betPass } from \"@/utils/medias\";\nimport { apiGetUserInfo } from \"@/api/User.js\";\nVue.use(Dialog).use(Image);\nexport default {\n  name: \"homeCard\",\n  components: {\n    Tinder: Tinder\n  },\n  data: function data() {\n    return {\n      isMaintenance: false,\n      isSwipe: true,\n      MatchList: [],\n      //比赛集\n      previousGame: null,\n      playIdIndex: 0,\n      //当前盘口位置\n      pageIndex: 1,\n      pageSize: 30,\n      blank: false\n    };\n  },\n  filters: {\n    host: function host(val) {\n      if (val) {\n        return \"主\";\n      } else if (!val) {\n        return \"客\";\n      }\n    }\n  },\n  computed: {},\n  created: function created() {\n    this.getMatchList();\n    var token = localStorage.getItem(\"token\");\n\n    if (token) {\n      this.getUserInfo();\n    }\n  },\n  methods: {\n    getUserInfo: function getUserInfo() {\n      var data = {};\n      apiGetUserInfo(data, true).then(function (res) {\n        localStorage.setItem(\"RankId\", res.RankId);\n        localStorage.setItem(\"nickName\", res.NickName);\n        localStorage.setItem(\"UImg\", res.UImg);\n      });\n    },\n    onSubmit: function onSubmit(item) {\n      if (this.$refs.tinder.queue.length == 1) {\n        this.getMatchList();\n        return;\n      } // item.type： 结果，'like'：右滑, 'nope'：左滑, 'super'：上滑\n      // item.key：  被移除卡片的 keyName\n      // item.item： queue 中的子对象\n\n\n      this.previousGame = item.item;\n\n      if (item.type == \"nope\") {\n        // 左滑音效\n        betPass.play();\n      }\n\n      if (item.type == \"like\") {\n        var token = localStorage.getItem(\"token\");\n\n        if (token) {\n          this.like(item.type); // 右滑音效\n\n          betSuccess.play();\n        } else {\n          this.$router.push(\"/myself\");\n        }\n      }\n    },\n    goGames: function goGames() {\n      this.$router.push(\"/gamesport\");\n    },\n    //获取比赛信息\n    getMatchList: function getMatchList() {\n      var _this = this;\n\n      // let data = {\n      //   index: this.pageIndex,\n      //   count: this.pageSize\n      // };\n      apiGetRecommendMatchItem(\"\").then(function (res) {\n        // this.pageIndex++;\n        if (res.length == 0) {\n          //维护检查\n          apiIsMaintenance().then(function (res) {\n            _this.isMaintenance = res.IsMaintenance;\n          });\n        } else {\n          _this.MatchList = res; // this.randomGames();\n        } // if (this.pageIndex > res.TotalPages) {\n        //   this.pageIndex = 1;\n        // }\n\n\n        if (_this.MatchList.length == 0) {\n          setTimeout(function () {\n            _this.blank = true;\n          }, 500);\n        } else {\n          _this.blank = false;\n        }\n      });\n    },\n    //右滑投注\n    like: function () {\n      var _like = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee(choice) {\n        var _this2 = this;\n\n        var data;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                console.log(choice);\n                data = {\n                  playId: this.previousGame.PlayId,\n                  betIntegral: this.previousGame.MinBetAmount\n                };\n                apiBetRecommend(data, true).then(function (res) {\n                  if (res.IsBetSucceed) {\n                    var m = _this2.$message({\n                      message: _this2.$t(\"BettingSuccessfulPrompt\") + res.AvailableIntegral,\n                      type: \"success\",\n                      duration: 2000\n                    });\n\n                    setTimeout(function () {\n                      return m.close();\n                    }, 2000);\n                  } else if (Math.abs(res.Code) >= 600) {\n                    var _m = _this2.$message({\n                      message: res.Message,\n                      type: \"error\",\n                      duration: 2000\n                    });\n\n                    setTimeout(function () {\n                      return _m.close();\n                    }, 2000);\n                  }\n                });\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function like(_x) {\n        return _like.apply(this, arguments);\n      }\n\n      return like;\n    }(),\n    // 隨機組合\n    randomGames: function randomGames() {\n      if (this.MatchList) {\n        this.MatchList.sort(function () {\n          return 0.5 - Math.random();\n        });\n      }\n    }\n  }\n};",null]}