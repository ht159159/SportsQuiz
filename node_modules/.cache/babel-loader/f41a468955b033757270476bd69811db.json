{"remainingRequest":"C:\\work\\竞猜可换色板\\node_modules\\babel-loader\\lib\\index.js!C:\\work\\竞猜可换色板\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\work\\竞猜可换色板\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\work\\竞猜可换色板\\src\\components\\FlowAd.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\work\\竞猜可换色板\\src\\components\\FlowAd.vue","mtime":1608885922143},{"path":"C:\\work\\竞猜可换色板\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\work\\竞猜可换色板\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\work\\竞猜可换色板\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\work\\竞猜可换色板\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:\\\\work\\\\\\u7ADE\\u731C\\u53EF\\u6362\\u8272\\u677F\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport model from \"@/components/model\";\nimport { apiGetFlowAdByType, apiWatchedFlowAd } from \"@/api/FlowAd.js\";\nexport default {\n  props: {\n    isOpenAd: Boolean,\n    adTypeId: Number,\n    AdObj: Object // isFinished: Boolean\n\n  },\n  components: {\n    model: model\n  },\n  watch: {\n    isOpenAd: function isOpenAd(bool) {\n      if (bool) {\n        this.getAdByType();\n      }\n    }\n  },\n  data: function data() {\n    return {\n      isOpen: this.isOpenAd,\n      adType: 0,\n      flowAdId: undefined,\n      isDataLoaded: true,\n      watchTime: 0,\n      FlowAdUrl: \"\",\n      openAdIframe: false,\n      restTime: 0,\n      isTimeUp: false,\n      timer: \"\",\n      dataLen: undefined,\n      isFasilAd: false,\n      isSucessAd: false,\n      reward: \"\",\n      isFinish: false,\n      lang: \"\"\n    };\n  },\n  created: function created() {\n    this.lang = JSON.parse(localStorage.getItem(\"lang\")).tag;\n  },\n  methods: {\n    // 獲取廣告\n    getAdByType: function () {\n      var _getAdByType = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var len;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                len = this.AdObj.Id;\n                this.dataLen = len;\n                this.flowAdId = this.AdObj.Id;\n                this.watchTime = this.AdObj.WatchTime;\n                this.FlowAdUrl = this.AdObj.FlowAdUrl;\n                this.reward = this.AdObj.Amount; // 取到廣告ID值之前按鈕先鎖住，等取到之後再解鎖\n\n                this.isDataLoaded = false;\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getAdByType() {\n        return _getAdByType.apply(this, arguments);\n      }\n\n      return getAdByType;\n    }(),\n    // 取消觀看廣告按鈕\n    cancelBtn: function cancelBtn() {\n      this.isOpen = false;\n      this.$emit(\"update:isOpenAd\", this.isOpen);\n    },\n    // 確認觀看廣告按鈕\n    confirmBtnEvent: function () {\n      var _confirmBtnEvent = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2() {\n        var vm, m;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                this.isOpen = false;\n                this.$emit(\"update:isOpenAd\", this.isOpen);\n\n                if (this.dataLen > 0) {\n                  this.openAdIframe = true;\n                  this.countDownTimer();\n                } else {\n                  vm = this;\n                  m = vm.$message({\n                    message: \"目前無廣告\",\n                    duration: 3000,\n                    type: \"error\",\n                    center: true\n                  });\n                  setTimeout(function () {\n                    return m.close();\n                  }, 2000);\n                }\n\n              case 3:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function confirmBtnEvent() {\n        return _confirmBtnEvent.apply(this, arguments);\n      }\n\n      return confirmBtnEvent;\n    }(),\n    // 計時器\n    countDownTimer: function countDownTimer() {\n      var _this = this;\n\n      this.isTimeUp = false;\n      this.timer = \"\";\n      clearInterval(this.timer);\n      this.restTime = this.watchTime;\n      this.timer = setInterval(function () {\n        if (_this.restTime == 0) {\n          _this.isTimeUp = true;\n          return;\n        }\n\n        _this.restTime = _this.restTime - 1;\n      }, 1000);\n    },\n    // 點擊關閉廣告\n    closeAd: function closeAd() {\n      var _this2 = this;\n\n      var data = {\n        Id: this.flowAdId\n      };\n      apiWatchedFlowAd(data, true).then(function (res) {\n        // 清除計時器\n        if (_this2.isFasilAd == false) {\n          clearInterval(_this2.timer);\n          _this2.timer = \"\";\n        } // 觀看完成成功 & 失敗情況\n\n\n        if (Math.abs(res.Code) >= 600) {\n          _this2.isFasilAd = true;\n        } else {\n          _this2.isFasilAd = false;\n          _this2.openAdIframe = false;\n          _this2.isSucessAd = true;\n        }\n      });\n    },\n    // 觀看廣告失敗取消按鈕\n    failCancelBtn: function failCancelBtn() {\n      this.isFasilAd = false;\n      this.openAdIframe = false;\n      clearInterval(this.timer);\n    },\n    // 觀看廣告失敗確認按鈕\n    failConfirmBtn: function failConfirmBtn() {\n      var _this3 = this;\n\n      this.isFasilAd = false;\n      this.openAdIframe = false;\n      this.getAdByType().then(function () {\n        _this3.confirmBtnEvent();\n      });\n    }\n  },\n  // 離開本頁時清除計時器\n  destroyed: function destroyed() {\n    this.timer = \"\";\n    clearInterval(this.timer);\n  }\n};",{"version":3,"sources":["FlowAd.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"flowAd\">\r\n    <transition name=\"fade\">\r\n      <model v-if=\"isOpenAd\"></model>\r\n    </transition>\r\n    <transition name=\"fade\">\r\n      <div class=\"fancyBox\" v-if=\"isOpenAd\">\r\n        <div class=\"fancyBox-close\" :disabled=\"isDataLoaded\" @click=\"cancelBtn()\"></div>\r\n        <div :class=\"[lang == 'zh-CN' ? 'fancyBoxTop-cn' : lang == 'en-US' ? 'fancyBoxTop-us' : 'fancyBoxTop-tw']\"></div>\r\n        <span class=\"fancyText\">{{ $t('ReceiveAward') }}</span><!--金币-->\r\n        <!--是否觀看廣告按鈕-->\r\n        <div class=\"gold-wrap\">\r\n          <span>+</span>\r\n          <span class=\"gold-num\">{{ reward }}</span>\r\n          <span>{{ $t('Coins') }} </span><!--金币-->\r\n        </div>\r\n        <div class=\"fancy-box-btn-wrap\">\r\n          <!-- <input type=\"button\" class=\"commit\" :class=\"[isDataLoaded ? 'disable' : 'cancelBtn']\"  :value=\" $t('Cancel')\" :disabled=\"isDataLoaded\" @click=\"cancelBtn()\"> -->\r\n          <input type=\"button\" class=\"commit\" :class=\"[isDataLoaded ? 'disable' : 'confirmBtn']\"  :value=\"$t('WatchAds')\" :disabled=\"isDataLoaded\" @click=\"confirmBtnEvent()\" >\r\n        </div>\r\n      </div>\r\n    </transition>\r\n\r\n    <!-- 觀看廣告失敗彈窗 -->\r\n    <transition name=\"fade\">\r\n      <model v-if=\"isFasilAd\"></model>\r\n    </transition>\r\n    <transition name=\"fade\">\r\n      <div class=\"fancyBox\" v-if=\"isFasilAd\">\r\n        <span>{{ $t('WatchAdsAgain') }}?</span\r\n        ><!--是否觀看廣告按鈕-->\r\n        <div class=\"fancy-box-btn-wrap\">\r\n          <input type=\"button\" class=\"commit cancelBtn\"  :value=\" $t('Cancel')\"  @click=\"failCancelBtn()\">\r\n          <input type=\"button\" class=\"commit confirmBtn\" :value=\" $t('Confirm')\" @click=\"failConfirmBtn()\" >\r\n        </div>\r\n      </div>\r\n    </transition>\r\n\r\n    <!-- iframe -->\r\n    <div class=\"iframe-wrap\" v-if=\"openAdIframe\">\r\n      <div class=\"count-down\">\r\n        <div class=\"count-down-wrap\" v-if=\"!isTimeUp\">\r\n          <span>{{ $t('Reciprocal') }}: </span> <!--剩餘-->\r\n          <span>{{ restTime }}</span>\r\n          <span>{{ $t('Second') }}</span> <!--秒-->\r\n        </div>\r\n        <div class=\"closeAd-wrap\" v-if=\"isTimeUp\" @click=\"closeAd()\">\r\n          <!-- <div class=\"closeAd\"></div> -->\r\n          <span>{{ $t('Close') }}</span>\r\n        </div>\r\n      </div>\r\n      <iframe :src=\"FlowAdUrl\" frameborder=\"0\" width=\"100%\" height=\"100%\"></iframe>\r\n    </div>\r\n\r\n    <!-- 錯誤訊息 -->\r\n\r\n    <!-- 領取成功彈窗 -->\r\n    <transition name=\"fade\">\r\n      <model v-if=\"isSucessAd\"></model>\r\n    </transition>\r\n    <transition name=\"fade\">\r\n      <div class=\"fancyBox\" v-if=\"isSucessAd\">\r\n        <div :class=\"[lang == 'zh-CN' ? 'fancyBoxTop-cn' : lang == 'en-US' ? 'fancyBoxTop-us' : 'fancyBoxTop-tw']\"></div>\r\n        <span class=\"fancyText\">{{ $t('SuccessfullyReceived') }}</span><!--領取成功-->\r\n        <div class=\"gold-wrap\">\r\n          <span>+</span>\r\n          <span class=\"gold-num\">{{ reward }}</span>\r\n          <span>{{ $t('Coins') }} </span><!--金币-->\r\n        </div>\r\n        <div class=\"fancy-box-btn-wrap\">\r\n          <input type=\"button\" class=\"commit confirmBtn\" :value=\" $t('Confirm')\" @click=\"isSucessAd = !isSucessAd\" >\r\n        </div>\r\n        <!-- <span class=\"tipText\">需看完小视频，中途退出没有奖励哦</span> -->\r\n      </div>\r\n    </transition>\r\n  </div>\r\n</template>\r\n<script>\r\nimport model from \"@/components/model\";\r\nimport { apiGetFlowAdByType, apiWatchedFlowAd } from \"@/api/FlowAd.js\";\r\nexport default {\r\n  props: {\r\n    isOpenAd: Boolean,\r\n    adTypeId: Number,\r\n    AdObj: Object,\r\n    // isFinished: Boolean\r\n  },\r\n  components: {\r\n    model\r\n  },\r\n  watch: {\r\n    isOpenAd: function(bool) {\r\n      if(bool) {\r\n        this.getAdByType();\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      isOpen: this.isOpenAd,\r\n      adType: 0,\r\n      flowAdId: undefined,\r\n      isDataLoaded: true,\r\n      watchTime: 0,\r\n      FlowAdUrl: \"\",\r\n      openAdIframe: false,\r\n      restTime: 0,\r\n      isTimeUp: false,\r\n      timer: \"\",\r\n      dataLen: undefined,\r\n      isFasilAd: false,\r\n      isSucessAd: false,\r\n      reward: \"\",\r\n      isFinish: false,\r\n      lang: \"\",\r\n    };\r\n  },\r\n  created() {\r\n    this.lang = JSON.parse(localStorage.getItem(\"lang\")).tag;\r\n  },\r\n  methods: {\r\n    // 獲取廣告\r\n    async getAdByType() {\r\n      let len = this.AdObj.Id;\r\n      this.dataLen = len;\r\n      this.flowAdId = this.AdObj.Id;\r\n      this.watchTime = this.AdObj.WatchTime;\r\n      this.FlowAdUrl = this.AdObj.FlowAdUrl;\r\n      this.reward = this.AdObj.Amount;\r\n      // 取到廣告ID值之前按鈕先鎖住，等取到之後再解鎖\r\n      this.isDataLoaded = false;\r\n    },\r\n    // 取消觀看廣告按鈕\r\n    cancelBtn() {\r\n      this.isOpen = false;\r\n      this.$emit(\"update:isOpenAd\", this.isOpen);\r\n    },\r\n    // 確認觀看廣告按鈕\r\n    async confirmBtnEvent() {\r\n      this.isOpen = false;\r\n      this.$emit(\"update:isOpenAd\", this.isOpen);\r\n\r\n      if (this.dataLen > 0) {\r\n        this.openAdIframe = true;\r\n        this.countDownTimer();\r\n      } else {\r\n        let vm = this;\r\n        const m = vm.$message({\r\n          message: \"目前無廣告\",\r\n          duration: 3000,\r\n          type: \"error\",\r\n          center: true\r\n        });\r\n        setTimeout(() => m.close(), 2000);\r\n      }\r\n    },\r\n\r\n    // 計時器\r\n    countDownTimer() {\r\n      this.isTimeUp = false;\r\n      this.timer = \"\";\r\n      clearInterval(this.timer);\r\n      this.restTime = this.watchTime;\r\n      this.timer = setInterval(() => {\r\n        if (this.restTime == 0) {\r\n          this.isTimeUp = true;\r\n          return;\r\n        }\r\n        this.restTime = this.restTime - 1;\r\n      }, 1000);\r\n    },\r\n\r\n    // 點擊關閉廣告\r\n    closeAd() {\r\n      let data = {\r\n        Id: this.flowAdId\r\n      }\r\n      apiWatchedFlowAd(data, true).then(res => {\r\n        // 清除計時器\r\n        if (this.isFasilAd == false) {\r\n          clearInterval(this.timer);\r\n          this.timer = \"\";\r\n        }\r\n        // 觀看完成成功 & 失敗情況\r\n        if (Math.abs(res.Code) >= 600) {\r\n          this.isFasilAd = true;\r\n        } else {\r\n          this.isFasilAd = false;\r\n          this.openAdIframe = false;\r\n          this.isSucessAd = true;\r\n        }\r\n      });\r\n    },\r\n\r\n    // 觀看廣告失敗取消按鈕\r\n    failCancelBtn() {\r\n      this.isFasilAd = false;\r\n      this.openAdIframe = false;\r\n      clearInterval(this.timer);\r\n    },\r\n    // 觀看廣告失敗確認按鈕\r\n    failConfirmBtn() {\r\n      this.isFasilAd = false;\r\n      this.openAdIframe = false;\r\n\r\n      this.getAdByType().then(() => {\r\n        this.confirmBtnEvent();\r\n      })\r\n    },\r\n  },\r\n\r\n  // 離開本頁時清除計時器\r\n  destroyed() {\r\n    this.timer = \"\";\r\n    clearInterval(this.timer);\r\n  },\r\n};\r\n</script>\r\n"],"sourceRoot":"src/components"}]}