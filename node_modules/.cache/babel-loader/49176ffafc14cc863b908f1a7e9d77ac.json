{"remainingRequest":"C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\src\\views\\club\\ClubActivities.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\src\\views\\club\\ClubActivities.vue","mtime":1606980099172},{"path":"C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport back from \"@/components/Botton/back.vue\";\nimport model from \"@/components/model\";\nimport { apiBuyClubActivityTicket, apiUpdateClubActivityStatus, apiGetClubActivityList } from \"@/api/ClubActivitys.js\";\nimport { apiGetClubGamblingList, apiUpdateClubGamblingsStatus } from \"@/api/ClubGamblings.js\";\nexport default {\n  components: {\n    back: back,\n    model: model\n  },\n  data: function data() {\n    return {\n      lang: \"\",\n      isEnglish: false,\n      isManagement: 0,\n      clubId: undefined,\n      isOpen: false,\n      activeCategoryIndex: 0,\n      tabIndex: 0,\n      betTabIndex: 0,\n      latestActivitiesObj: [],\n      historyActivitiesObj: [],\n      isTicketTipOpen: false,\n      ticketTipText: \"\".concat(this.$t(\"RuleOfActivity\"), \"\\uFF1A<br />1\\u3001\").concat(this.$t(\"VictoryOrDefeat\"), \"\\uFF1A<br />\\u2460\").concat(this.$t(\"VictoryOrDefeatOne\"), \"<br />\\u2461\").concat(this.$t(\"VictoryOrDefeatTwo\"), \"<br />2\\u3001\").concat(this.$t(\"ParticipationRules\"), \"\\uFF1A<br />\\u2460\").concat(this.$t(\"ParticipationRulesOne\"), \"<br />\\u2461\").concat(this.$t(\"ParticipationRulesTwo\"), \"<br />3\\u3001\").concat(this.$t(\"RewardRules\"), \"\\uFF1A<br />\\u2460\").concat(this.$t(\"RewardRulesOne\"), \"<br />\\u2461\").concat(this.$t(\"RewardRulesTwo\"), \"<br />\\u2462\").concat(this.$t(\"RewardRulesThree\"), \"<br />\").concat(this.$t(\"ActivityRulesWarning\")),\n      avtiveId: \"\",\n      activeNodata: false,\n      historyNoData: false,\n      matchName: \"\",\n      // 投注活動\n      betMyList: [],\n      betOtherList: [],\n      betMyListNoData: false,\n      betOtherListNoData: false,\n      wipeLoading: false,\n      callBackMsg: \"\",\n      // v-infinite-scroll 套件\n      busy: false,\n      immediate: false,\n      lastestIndexNum: 1,\n      historyIndexNum: 1,\n      lastestTotalPages: \"\",\n      historyTotalPages: \"\",\n      // 彈窗\n      isTicketTipType: \"\",\n      deleteData: \"\"\n    };\n  },\n  created: function created() {\n    // 讀取語系\n    this.lang = JSON.parse(localStorage.getItem(\"lang\")).tag; // 讀取是否為管理階\n\n    this.isManagement = localStorage.getItem(\"isManagement\"); // 取得clubId\n\n    this.clubId = localStorage.getItem(\"ClubId\");\n\n    if (localStorage.getItem(\"activeCategoryIndex\") == null) {\n      localStorage.setItem(\"activeCategoryIndex\", 0);\n    }\n\n    if (localStorage.getItem(\"tabIndex\") == null) {\n      localStorage.setItem(\"tabIndex\", 0);\n    }\n\n    if (localStorage.getItem(\"betTabIndex\") == null) {\n      localStorage.setItem(\"betTabIndex\", 0);\n    }\n\n    if (localStorage.getItem(\"activeCategoryIndex\") == \"0\") {\n      this.getLastestActivies();\n      this.activeCategoryIndex = 0;\n      this.tabIndex = localStorage.getItem(\"tabIndex\");\n\n      if (this.tabIndex == 1) {\n        this.getHistoryActivies();\n      }\n    } else if (localStorage.getItem(\"activeCategoryIndex\") == \"1\") {\n      this.activeCategoryIndex = 1;\n      this.getActiveBetList();\n      this.betTabIndex = localStorage.getItem(\"betTabIndex\");\n    }\n  },\n  methods: {\n    // 獲取最新活動\n    getLastestActivies: function getLastestActivies() {\n      var _this = this;\n\n      var data = {\n        Type: 1,\n        index: this.lastestIndexNum,\n        count: 10\n      };\n      apiGetClubActivityList(data, true).then(function (res) {\n        if (res.Code == \"600\") {\n          _this.isOpen = true;\n          _this.callBackMsg = res.Message;\n          _this.busy = true;\n          return;\n        }\n\n        res.Data.Data.length <= 0 ? _this.activeNodata = true : _this.activeNodata = false; // 俱樂部活動頁的資料\n\n        _this.latestActivitiesObj = res.Data.Data;\n        _this.lastestTotalPages = res.Data.TotalPages;\n      }); // this.busy = false;\n\n      this.tabIndex = 0;\n      localStorage.setItem(\"activeCategoryIndex\", this.activeCategoryIndex);\n    },\n    // 無限加載最新活動\n    loadLastest: function loadLastest() {\n      var _this2 = this;\n\n      if (this.lastestIndexNum >= this.lastestTotalPages) {\n        return;\n      }\n\n      this.busy = true;\n      this.lastestIndexNum++;\n      var data = {\n        Type: 1,\n        index: this.lastestIndexNum,\n        count: 10\n      };\n      apiGetClubActivityList(data, true).then(function (res) {\n        if (res.Code == \"600\") {\n          _this2.isOpen = true;\n          _this2.callBackMsg = res.Message;\n          _this2.busy = true;\n          return;\n        } // 俱樂部活動頁的資料\n\n\n        if (res.Data.Data.length == 0) {\n          _this2.busy = true;\n        } else if (res.Data.Data.length > 0) {\n          res.Data.Data.forEach(function (el) {\n            _this2.latestActivitiesObj.push(el);\n\n            _this2.busy = false;\n          });\n        }\n      });\n    },\n    // 獲取歷史活動\n    getHistoryActivies: function getHistoryActivies() {\n      var _this3 = this;\n\n      var data = {\n        Type: 2,\n        index: this.historyIndexNum,\n        count: 10\n      };\n      apiGetClubActivityList(data, true).then(function (res) {\n        if (res.Code == \"600\") {\n          _this3.isOpen = true;\n          _this3.callBackMsg = res.Message;\n          return;\n        }\n\n        res.Data.Data.length <= 0 ? _this3.historyNoData = true : _this3.historyNoData = false; // 俱樂部活動頁的資料\n\n        _this3.historyActivitiesObj = res.Data.Data;\n        _this3.historyTotalPages = res.Data.TotalPages;\n      });\n      this.tabIndex = 1;\n      localStorage.setItem(\"activeCategoryIndex\", this.activeCategoryIndex);\n    },\n    // 無限加載歷史活動\n    loadHistory: function loadHistory() {\n      var _this4 = this;\n\n      if (this.historyIndexNum >= this.historyTotalPages) {\n        return;\n      }\n\n      this.busy = true;\n      this.historyIndexNum++;\n      var data = {\n        Type: 2,\n        index: this.historyIndexNum,\n        count: 10\n      };\n      apiGetClubActivityList(data, true).then(function (res) {\n        if (res.Code == \"600\") {\n          _this4.isOpen = true;\n          _this4.callBackMsg = res.Message;\n          _this4.busy = true;\n          return;\n        } // 俱樂部活動頁的資料\n\n\n        if (res.Data.Data.length == 0) {\n          _this4.busy = true;\n        } else if (res.Data.Data.length > 0) {\n          res.Data.Data.forEach(function (el) {\n            _this4.historyActivitiesObj.push(el);\n\n            _this4.busy = false;\n          });\n        }\n      });\n    },\n    // 取得俱樂部投注列表\n    getActiveBetList: function getActiveBetList() {\n      var _this5 = this;\n\n      apiGetClubGamblingList(\"\", true).then(function (res) {\n        _this5.betMyList = res.Data.MyGamblings;\n        _this5.betOtherList = res.Data.OtherGamblings;\n\n        if (_this5.betMyList == null || _this5.betMyList.length == 0) {\n          _this5.betMyListNoData = true;\n        }\n\n        if (_this5.betOtherList == null || _this5.betOtherList.length == 0) {\n          _this5.betOtherListNoData = true;\n        }\n      });\n      this.betTabIndex = 0;\n      localStorage.setItem(\"activeCategoryIndex\", this.activeCategoryIndex);\n    },\n    // 切換俱樂部挑戰分頁\n    changeTabIndex: function changeTabIndex(index) {\n      this.tabIndex = index;\n      localStorage.setItem(\"tabIndex\", index); // 最新\n\n      if (index == 0) {\n        this.latestActivitiesObj = [];\n        this.lastestIndexNum = 1;\n        this.busy = false;\n        this.getLastestActivies();\n      } // 歷史\n\n\n      if (index == 1) {\n        this.historyActivitiesObj = [];\n        this.historyIndexNum = 1;\n        this.busy = false;\n        this.getHistoryActivies();\n      }\n    },\n    // 切換俱樂部投注分頁\n    changeBetTabIndex: function changeBetTabIndex(index) {\n      this.betTabIndex = index;\n      localStorage.setItem(\"betTabIndex\", index);\n    },\n    // 活動開啟發佈頁面\n    activesRelease: function activesRelease() {\n      this.$router.push('/ClubActivitiesRelease');\n    },\n    // 購買活動門票\n    getTicket: function getTicket() {\n      var _this6 = this;\n\n      console.log(this.avtiveId);\n      var data = {\n        ClubActivityId: this.avtiveId\n      };\n      apiBuyClubActivityTicket(data, true).then(function (res) {\n        if (Math.abs(res.Code) >= 600) {\n          var _vm = _this6;\n\n          var _m = _vm.$message({\n            message: res.Message,\n            duration: 3000,\n            type: \"error\",\n            center: true\n          });\n\n          setTimeout(function () {\n            return _m.close();\n          }, 2000);\n          return;\n        }\n\n        localStorage.setItem(\"AcvtiveId\", _this6.avtiveId);\n        var vm = _this6;\n        var m = vm.$message({\n          message: _this6.$t('SuccessfulPurchase'),\n          duration: 3000,\n          type: \"success\",\n          center: true\n        });\n        setTimeout(function () {\n          return m.close();\n        }, 2000);\n        setTimeout(function () {\n          _this6.isTicketTipOpen = false;\n\n          _this6.$router.push(\"/ClubActivityMatch\");\n        }, 3000);\n      });\n    },\n    // 繼續下注\n    continueBet: function continueBet(avtiveId) {\n      localStorage.setItem(\"AcvtiveId\", avtiveId);\n      this.$router.push(\"/ClubActivityMatch\");\n    },\n    // 參加成功\n    goResultDetail: function goResultDetail(avtiveId) {\n      localStorage.setItem(\"AcvtiveId\", avtiveId);\n      this.$router.push(\"/ActivityMatchResultDetail\");\n    },\n    // 刪除最新活動\n    deleteActive: function deleteActive() {\n      var _this7 = this;\n\n      var data = {\n        Status: -1,\n        ClubActivityId: this.avtiveId\n      };\n      apiUpdateClubActivityStatus(data, true).then(function (res) {\n        if (Math.abs(res.Code) >= 600) {\n          var vm = _this7;\n          var x = vm.$message({\n            message: res.Message,\n            duration: 3000,\n            type: \"warning\",\n            center: true\n          });\n          setTimeout(function () {\n            return x.close();\n          }, 1000);\n        } else {\n          var _vm2 = _this7;\n\n          var m = _vm2.$message({\n            message: _this7.$t('successfullyDeleted'),\n            duration: 3000,\n            type: \"success\",\n            center: true\n          });\n\n          setTimeout(function () {\n            m.close();\n\n            if (_this7.tabIndex == 0) {\n              _this7.getLastestActivies();\n\n              _this7.tabIndex = 0;\n              return;\n            }\n\n            if (_this7.tabIndex == 1) {\n              _this7.getHistoryActivies();\n\n              _this7.tabIndex = 1;\n              return;\n            }\n          }, 1000);\n        }\n\n        _this7.isTicketTipOpen = false;\n      });\n    },\n    // 前往俱樂部投注\n    goBet: function goBet(id) {\n      var _this8 = this;\n\n      localStorage.setItem(\"betId\", id);\n      setTimeout(function () {\n        _this8.$router.push(\"/clubActiveBet\");\n      }, 250);\n    },\n    // 查看單一賽果 type:  1 = 發起人賽果;  2 = 其他人賽果\n    goBetResult: function goBetResult(type, id) {\n      var _this9 = this;\n\n      localStorage.setItem(\"betId\", id);\n      localStorage.setItem(\"singleResult\", true);\n\n      if (type == 1) {\n        setTimeout(function () {\n          _this9.$router.push(\"/InitiatorBetResult\");\n        }, 250);\n      } else {\n        setTimeout(function () {\n          _this9.$router.push(\"/BetResult\");\n        }, 250);\n      }\n    },\n    // 俱樂部投注刪除\n    betDelete: function betDelete() {\n      var _this10 = this;\n\n      var data = {\n        Id: this.deleteData.Id,\n        Status: -1\n      };\n      apiUpdateClubGamblingsStatus(data, true).then(function (res) {\n        if (Math.abs(res.Code) >= 600) {\n          var vm = _this10;\n          var m = vm.$message({\n            message: res.Message,\n            duration: 3000,\n            type: \"warning\",\n            center: true\n          });\n          setTimeout(function () {\n            return m.close();\n          }, 2000);\n          _this10.isTicketTipOpen = false;\n          return;\n        }\n\n        if (res.Success) {\n          var _vm3 = _this10;\n\n          var _m2 = _vm3.$message({\n            message: _this10.$t('successfullyDeleted'),\n            duration: 3000,\n            type: \"success\",\n            center: true\n          });\n\n          setTimeout(function () {\n            return _m2.close();\n          }, 2000); // 再獲取一次列表\n\n          _this10.getActiveBetList();\n\n          _this10.isTicketTipOpen = false;\n          return;\n        } else if (res.Success == false) {\n          var _vm4 = _this10;\n\n          var _m3 = _vm4.$message({\n            message: _this10.$t(\"DataError\"),\n            duration: 3000,\n            type: \"warning\",\n            center: true\n          });\n\n          setTimeout(function () {\n            return _m3.close();\n          }, 2000);\n          return;\n        }\n\n        _this10.isTicketTipOpen = false;\n      });\n    },\n    //刪除活動function選擇\n    deleteFunction: function deleteFunction() {\n      this.isTicketTipType == 'delete' ? this.deleteActive() : this.betDelete();\n    },\n    //彈窗顯示\n    isTicketTipShow: function isTicketTipShow(e, delData) {\n      this.isTicketTipType = e.toElement.className;\n      this.deleteData = delData;\n      this.isTicketTipOpen = !this.isTicketTipOpen;\n    },\n    // 彈窗確認按鈕事件\n    confirmBtnEvent: function confirmBtnEvent() {\n      this.$router.push(\"/CreateClub\");\n    }\n  }\n};",null]}