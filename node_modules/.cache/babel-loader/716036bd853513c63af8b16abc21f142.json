{"remainingRequest":"C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\src\\views\\club\\CreateClubSet.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\src\\views\\club\\CreateClubSet.vue","mtime":1605499100502},{"path":"C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.typed.uint8-array\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.regexp.to-string\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport back from \"@/components/Botton/back.vue\"; // import { apiGetMissionList, apiAddMission, apiReceiveMissionReward } from \"@/api/mission.js\";\n// import { apiGetMatchs } from \"@/api/match\";\n\nimport { apiGetClubMatchs } from \"@/api/ClubActivitys.js\";\nimport { apiClubUpload, apiMemApplyClub } from \"@/api/Club\";\nimport { swiper, swiperSlide, directive } from \"vue-awesome-swiper\";\nimport \"swiper/css/swiper.css\";\nexport default {\n  components: {\n    back: back,\n    swiper: swiper,\n    swiperSlide: swiperSlide\n  },\n  directives: {\n    swiper: directive\n  },\n  data: function data() {\n    return {\n      noMission: false,\n      checkList: [],\n      matchsList: [],\n      busy: false,\n      loading: false,\n      push: true,\n      IndexNum: 1,\n      noMore: false,\n      clubName: '',\n      clubSlogan: '',\n      upImg: false,\n      getClubMatchsData: {\n        matchTypeId: 2,\n        index: 1,\n        count: 8,\n        havaPlay: true,\n        matchItemTypeId: -1\n      },\n      totalPages: \"\",\n      swiperOptions: {\n        pagination: {\n          el: '.swiper-pagination',\n          dynamicBullets: true\n        } // Some Swiper option/callback...\n\n      }\n    };\n  },\n  created: function created() {// this.getTaskList(this.categoryType);\n  },\n  computed: {\n    swiper: function swiper() {\n      return this.$refs.mySwiper.swiper;\n    }\n  },\n  mounted: function mounted() {\n    var _this2 = this;\n\n    // console.log('Current Swiper instance object', this.swiper)\n    apiGetClubMatchs(this.getClubMatchsData, true).then(function (res) {\n      // this.swiper.appendSlide('<div class=\"swiper-slide\">加載中.......</div>')\n      _this2.totalPages = res.Data.TotalPages;\n\n      for (var i = 0; res.Data.TotalPages > i; i++) {\n        _this2.matchsList.push([]);\n      }\n\n      ;\n\n      for (var _i = 0; res.Data.Data.length > _i; _i++) {\n        _this2.matchsList[_this2.swiper.activeIndex].push(res.Data.Data[_i]);\n      }\n\n      ;\n      _this2.getClubMatchsData.index++;\n    });\n    this.swiper.on('slideChange', function () {\n      // console.log(this.swiper.activeIndex); //滑动打印当前索引\n      if (_this2.getClubMatchsData.index > _this2.totalPages) {\n        return;\n      }\n\n      _this2.onLoad(_this2.swiper.activeIndex);\n    }); //   let data1 = {\n    //   matchTypeId: 2,\n    //   index: 1,\n    //   count: 10,\n    //   havaPlay: true,\n    //   matchItemTypeId: -1\n    // };\n    // apiGetMatchs(data1, true).then(res => {\n    //   console.log(res)\n    //   this.matchsList = res.Data;\n    // });\n  },\n  methods: {\n    creat: function creat() {\n      var _this3 = this;\n\n      if (this.clubName == \"\") {\n        this.$message({\n          message: this.$t(\"FillYourClub\"),\n          type: \"error\",\n          center: true,\n          duration: 1200\n        });\n      } else if (this.clubSlogan == \"\") {\n        this.$message({\n          message: this.$t(\"FillYourClubSlogan\"),\n          type: \"error\",\n          center: true,\n          duration: 1200\n        });\n      } else if (this.checkList.toString() == \"\") {\n        this.$message({\n          message: this.$t(\"FillYourFavoriteEvent\"),\n          type: \"error\",\n          center: true,\n          duration: 1200\n        });\n      } else if (localStorage.getItem(\"imgName\") == \"\") {\n        this.$message({\n          message: this.$t(\"UploadYourClubLogo\"),\n          type: \"error\",\n          center: true,\n          duration: 1200\n        });\n      } else {\n        var memApplyClubData = {\n          ClubName: this.clubName,\n          SloganLabel: this.clubSlogan,\n          MatchId: this.checkList.toString() + \",\",\n          ClubImg: localStorage.getItem(\"imgName\"),\n          UName: localStorage.getItem(\"uname\")\n        };\n        apiMemApplyClub(memApplyClubData, true).then(function (res) {\n          if (res.Success) {\n            _this3.$message({\n              message: res.Message,\n              type: \"success\",\n              center: true,\n              duration: 1200\n            });\n\n            _this3.$router.push(\"/Myself\");\n          } else {\n            _this3.$message({\n              message: res.Message,\n              type: \"error\",\n              center: true,\n              duration: 1200\n            });\n          }\n        });\n      }\n    },\n    onLoad: function onLoad(activeIndex) {\n      var _this4 = this;\n\n      // this.busy = true;\n      //  let data1 = {\n      //   matchTypeId: 2,\n      //   index: this.IndexNum,\n      //   count: 8,\n      //   havaPlay: true,\n      //   matchItemTypeId: -1\n      // }\n      apiGetClubMatchs(this.getClubMatchsData, true).then(function (res) {\n        // if(res.Data.length == 0){\n        //   this.swiper.appendSlide('<div class=\"swiper-slide\">noMore.......</div>')\n        //   this.noMore = true\n        //   // this.push = false;\n        //   return\n        // }\n        // this.swiper.appendSlide('<div class=\"swiper-slide\">加載中.......</div>')\n        for (var i = 0; res.Data.Data.length > i; i++) {\n          _this4.matchsList[activeIndex].push(res.Data.Data[i]);\n        } // for(let i = 0; res.Data.length>i; i++){\n        //   this.matchsList.push(res.Data[i])\n        //   this.busy = false;\n        // }\n\n\n        _this4.getClubMatchsData.index++;\n      });\n    },\n    // 图片上传功能\n    tirggerFile: function tirggerFile(event) {\n      var file = event.target.files[0];\n      var imgSize = file.size;\n      var param = new FormData(); // 创建form对象\n\n      param.append('file', file, file.name); // 通过append向form对象添加数据\n\n      param.append('type', '1'); // 添加form表单中其他数据\n      // console.log(param.get('file')) // FormData私有类对象，访问不到，可以通过get判断值是否传进去\n\n      if (!event.target.files.length) return;\n\n      if (imgSize / 1024 > 10000) {\n        this.$message({\n          message: this.$t(\"PictureIsTooBig\"),\n          type: \"warning\",\n          center: true,\n          duration: 1200\n        });\n      } else {\n        this.imgPreview(file);\n      }\n    },\n    // 获取图片\n    imgPreview: function imgPreview(file, callback) {\n      var _this = this; // this指向问题，所以在外面先定义\n\n\n      var config = {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        },\n        contentType: false,\n        //required\n        processData: false // required\n\n      }; // 判断是否支持FileReader\n\n      if (!file || !window.FileReader) return; // 创建一个reader\n\n      var reader = new FileReader(); // 将图片转成base64格式\n\n      reader.readAsDataURL(file);\n\n      reader.onloadend = function () {\n        var result = this.result;\n        var img = new Image();\n        img.src = result; // console.log('============未压缩图片===========')\n\n        img.onload = function () {\n          var data = _this.compress(img);\n\n          _this.imgUrl = result;\n\n          var blob = _this.dataURItoBlob(data); // console.log('*******base64转blob对象******')\n\n\n          var param = new FormData(); // 创建form对象\n\n          param.append('file', blob, file.name); // 通过append向form对象添加数据\n\n          param.append('type', \"club\");\n          apiClubUpload(param, config).then(function (res) {\n            if (res.Success) {\n              _this.$message({\n                message: _this.$t(\"UploadSuccessfully\"),\n                type: \"success\",\n                center: true,\n                duration: 1200\n              }); //顯示圖片\n\n\n              _this.upImg = true;\n              document.querySelector('#demo').setAttribute('src', result);\n              localStorage.setItem(\"imgName\", file.name);\n            } else {\n              _this.$message({\n                message: _this.$t(\"UploadFailed\"),\n                type: \"error\",\n                center: true,\n                duration: 1200\n              });\n            }\n          });\n        };\n      };\n    },\n    // 压缩图片\n    compress: function compress(img) {\n      var canvas = document.createElement('canvas');\n      var ctx = canvas.getContext('2d'); // let initSize = img.src.length\n\n      var width = img.width;\n      var height = img.height;\n      canvas.width = width;\n      canvas.height = height; // 铺底色\n\n      ctx.fillStyle = '#fff';\n      ctx.fillRect(0, 0, canvas.width, canvas.height);\n      ctx.drawImage(img, 0, 0, width, height); // 进行最小压缩\n\n      var ndata = canvas.toDataURL('image/jpeg', 0.1); // console.log('*******压缩后的图片大小*******')\n\n      return ndata;\n    },\n    dataURItoBlob: function dataURItoBlob(base64Data) {\n      var byteString;\n      if (base64Data.split(',')[0].indexOf('base64') >= 0) byteString = atob(base64Data.split(',')[1]);else byteString = unescape(base64Data.split(',')[1]);\n      var mimeString = base64Data.split(',')[0].split(':')[1].split(';')[0];\n      var ia = new Uint8Array(byteString.length);\n\n      for (var i = 0; i < byteString.length; i++) {\n        ia[i] = byteString.charCodeAt(i);\n      }\n\n      return new Blob([ia], {\n        type: mimeString\n      });\n    }\n  },\n  destroyed: function destroyed() {\n    localStorage.setItem(\"imgName\", \"\");\n  }\n};",{"version":3,"sources":["CreateClubSet.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <main class=\"createClubSet\">\r\n    <div class=\"createClubRule-header\" style=\"position:fixed;top: 0\">\r\n      <back class=\"back-icon img-he\"></back>\r\n      <h3>{{ $t(\"CreateClub\") }}</h3>\r\n    </div>\r\n\r\n    <div class=\"club-Box\">\r\n      <!-- <div class=\"noMissionBg\">\r\n        <img class=\"noMission\" v-if=\"noMission\" src=\"../../assets/noInfo.png\" alt />\r\n        <p>{{ $t(\"NoInformation\") }}</p>\r\n      </div> -->\r\n      <div class=\"createSet\">\r\n        <div class=\"setField\">\r\n          <div class=\"title\">\r\n            <div class=\"title-list\"></div>\r\n            <p>\r\n              {{ $t(\"FillYourClub\") }}\r\n              <span class=\"required\">*</span>\r\n            </p>\r\n          </div>\r\n          <input type=\"text\" class=\"setInformation\" v-model=\"clubName\" />\r\n        </div>\r\n\r\n        <div class=\"setField\">\r\n          <div class=\"title\">\r\n            <div class=\"title-list\"></div>\r\n            <p>\r\n              {{ $t(\"FillYourClubSlogan\") }}\r\n              <span class=\"required\">*</span>\r\n            </p>\r\n          </div>\r\n          <input type=\"text\" class=\"setInformation\" v-model=\"clubSlogan\" />\r\n        </div>\r\n\r\n        <div class=\"setField\">\r\n          <div class=\"title\">\r\n            <div class=\"title-list\"></div>\r\n            <p>\r\n              {{ $t(\"FillYourFavoriteEvent\") }}\r\n              <span class=\"multipleChoice\">({{ $t(\"MultipleChoice\") }})</span>\r\n            </p>\r\n          </div>\r\n          <!-- <div class=\"chooseRace\">\r\n            <img src=\"../../assets/club/club-chooseLogo.png\" class=\"race\">\r\n\r\n          </div>-->\r\n  <swiper ref=\"mySwiper\" :options=\"swiperOptions\">\r\n    <swiper-slide v-for=\"(matchsListItem, matchsListItemI) in matchsList\" :key=matchsListItemI>\r\n      <el-checkbox-group v-model=\"checkList\">\r\n        <div class=\"push\" v-if=\"matchsList[matchsListItemI].length < 1\" style='font-size: .24rem;text-align:center;line-height: .48rem'>{{ $t(\"WipeLoading\") }}</div>\r\n        <el-checkbox class=\"chooseRace\" v-for=\"(item,i) in matchsListItem\" :key=i :label=\"item.MatchId\">\r\n          <img v-if=\"item.MatchImg\" :src=\"item.MatchImg\" class=\"race\" />\r\n          <img v-else src=\"@/assets/instead_logo1.png\" alt=\"\" class=\"sport-main-collapse-img\">\r\n          <p>{{ item.MatchName }}</p>\r\n        </el-checkbox>\r\n        <!-- <div class=\"push\" v-if=\"push\" style='font-size: .24rem;text-align:center;line-height: .48rem'>{{ $t(\"WipeLoading\") }}</div>\r\n        <div class=\"noMore\" v-if=\"noMore\" style='font-size: .24rem;text-align:center;line-height: .48rem'>没有更多了</div> -->\r\n      </el-checkbox-group>\r\n    </swiper-slide>\r\n    <!-- <swiper-slide> 加載中..456.....</swiper-slide> -->\r\n    <!-- <swiper-slide>Slide 1</swiper-slide>\r\n    <swiper-slide>Slide 2</swiper-slide>\r\n    <swiper-slide>Slide 3</swiper-slide>\r\n    <swiper-slide>Slide 4</swiper-slide>\r\n    <swiper-slide>Slide 5</swiper-slide> -->\r\n    <div class=\"swiper-pagination\" slot=\"pagination\"></div>\r\n  </swiper>\r\n\r\n\r\n          <!-- <el-checkbox-group v-model=\"checkList\" v-infinite-scroll=\"onLoad\" infinite-scroll-disabled=\"busy\" infinite-scroll-immediate=\"immediate\">\r\n            <el-checkbox class=\"chooseRace\" v-for=\"(item,i) in matchsList\" :key=i :label=\"item.MatchId\">\r\n              <img v-if=\"item.MatchImg\" :src=\"item.MatchImg\" class=\"race\" />\r\n              <img v-else src=\"@/assets/instead_logo1.png\" alt=\"\" class=\"sport-main-collapse-img\">\r\n            </el-checkbox>\r\n          <div class=\"push\" v-if=\"push\" style='font-size: .24rem;text-align:center;line-height: .48rem'>{{ $t(\"WipeLoading\") }}</div>\r\n          <div class=\"noMore\" v-if=\"noMore\" style='font-size: .24rem;text-align:center;line-height: .48rem'>没有更多了</div>\r\n          </el-checkbox-group> -->\r\n        </div>\r\n\r\n        <div class=\"setField\">\r\n          <div class=\"title\">\r\n            <div class=\"title-list\"></div>\r\n            <p>\r\n              {{ $t(\"UploadYourClubLogo\") }}\r\n              <span class=\"required\">*</span>\r\n            </p>\r\n          </div>\r\n          <div class=\"uploadRulesBox\">\r\n            <div class=\"uploadRules\">\r\n              <div class=\"uploadRulesNumber\">1</div>\r\n              <div class=\"uploadRulesContent\">{{ $t(\"ClubLOGOuploadRules\") }}</div>\r\n            </div>\r\n          </div>\r\n          <div class=\"uploadImg\">\r\n            <div v-if=\"!upImg\" class=\"uploadIcon\"></div>\r\n            <div v-if=\"!upImg\" class=\"uploadContent\">{{ $t(\"AddPictures\") }}</div>\r\n            <div v-if=\"!upImg\" class=\"uploadContent\">{{ $t(\"RecommendedImageSize\") }}</div>\r\n            <img id=\"demo\" alt=\"\">\r\n            <input type=\"file\" class=\"imgInput\" name=\"saveFile\" @change=\"tirggerFile($event)\"/>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <button class=\"changeBtn\" @click=\"creat\">{{ $t(\"ConfirmSubmission\") }}</button>\r\n  </main>\r\n</template>\r\n\r\n<script>\r\nimport back from \"@/components/Botton/back.vue\";\r\n// import { apiGetMissionList, apiAddMission, apiReceiveMissionReward } from \"@/api/mission.js\";\r\n// import { apiGetMatchs } from \"@/api/match\";\r\nimport { apiGetClubMatchs } from \"@/api/ClubActivitys.js\";\r\nimport { apiClubUpload, apiMemApplyClub } from \"@/api/Club\";\r\nimport { swiper, swiperSlide, directive } from \"vue-awesome-swiper\";\r\nimport \"swiper/css/swiper.css\";\r\n\r\nexport default {\r\n  components: {\r\n    back,\r\n    swiper,\r\n    swiperSlide\r\n  },\r\n  directives: {\r\n    swiper: directive\r\n  },\r\n  data() {\r\n    return {\r\n      noMission: false,\r\n      checkList: [],\r\n      matchsList: [],\r\n      busy: false,\r\n      loading: false,\r\n      push: true,\r\n      IndexNum: 1,\r\n      noMore: false,\r\n      clubName: '',\r\n      clubSlogan: '',\r\n      upImg: false,\r\n      getClubMatchsData:{\r\n        matchTypeId: 2,\r\n        index: 1,\r\n        count: 8,\r\n        havaPlay: true,\r\n        matchItemTypeId: -1\r\n      },\r\n      totalPages: \"\",\r\n\r\n      swiperOptions: {\r\n        pagination: {\r\n          el: '.swiper-pagination',\r\n          dynamicBullets: true\r\n        },\r\n        // Some Swiper option/callback...\r\n      }\r\n    };\r\n  },\r\n\r\n  created() {\r\n    // this.getTaskList(this.categoryType);\r\n\r\n  },\r\n  computed: {\r\n    swiper() {\r\n      return this.$refs.mySwiper.swiper\r\n    }\r\n  },\r\n  mounted() {\r\n    // console.log('Current Swiper instance object', this.swiper)\r\n    apiGetClubMatchs(this.getClubMatchsData, true).then(res => {\r\n      // this.swiper.appendSlide('<div class=\"swiper-slide\">加載中.......</div>')\r\n      this.totalPages = res.Data.TotalPages;\r\n      for(let i = 0; res.Data.TotalPages>i; i++){\r\n        this.matchsList.push([])\r\n      };\r\n      for(let i = 0; res.Data.Data.length>i; i++){\r\n        this.matchsList[this.swiper.activeIndex].push(res.Data.Data[i])\r\n      };\r\n      this.getClubMatchsData.index++;\r\n    })\r\n\r\n    this.swiper.on('slideChange', ()=> { \r\n      // console.log(this.swiper.activeIndex); //滑动打印当前索引\r\n      if(this.getClubMatchsData.index > this.totalPages) {\r\n        return\r\n      }\r\n      this.onLoad(this.swiper.activeIndex);\r\n    });\r\n      //   let data1 = {\r\n      //   matchTypeId: 2,\r\n      //   index: 1,\r\n      //   count: 10,\r\n      //   havaPlay: true,\r\n      //   matchItemTypeId: -1\r\n      // };\r\n      // apiGetMatchs(data1, true).then(res => {\r\n      //   console.log(res)\r\n      //   this.matchsList = res.Data;\r\n      // });\r\n  },\r\n  methods: {\r\n    creat () {\r\n      if(this.clubName == \"\"){\r\n        this.$message({\r\n          message: this.$t(\"FillYourClub\"),\r\n          type: \"error\",\r\n          center: true,\r\n          duration: 1200\r\n        });\r\n      }else if(this.clubSlogan == \"\"){\r\n        this.$message({\r\n          message: this.$t(\"FillYourClubSlogan\"),\r\n          type: \"error\",\r\n          center: true,\r\n          duration: 1200\r\n        });\r\n      }else if(this.checkList.toString() == \"\"){\r\n        this.$message({\r\n          message: this.$t(\"FillYourFavoriteEvent\"),\r\n          type: \"error\",\r\n          center: true,\r\n          duration: 1200\r\n        });\r\n      }else if(localStorage.getItem(\"imgName\") == \"\"){\r\n        this.$message({\r\n          message: this.$t(\"UploadYourClubLogo\"),\r\n          type: \"error\",\r\n          center: true,\r\n          duration: 1200\r\n        });\r\n      }else {\r\n        let memApplyClubData = {\r\n          ClubName: this.clubName,\r\n          SloganLabel: this.clubSlogan,\r\n          MatchId: this.checkList.toString()+\",\",\r\n          ClubImg: localStorage.getItem(\"imgName\"),\r\n          UName: localStorage.getItem(\"uname\")\r\n        }\r\n        apiMemApplyClub(memApplyClubData, true).then(res =>{\r\n          if(res.Success){\r\n            this.$message({\r\n              message: res.Message,\r\n              type: \"success\",\r\n              center: true,\r\n              duration: 1200\r\n            });\r\n            this.$router.push(\"/Myself\");\r\n          }else{\r\n            this.$message({\r\n              message: res.Message,\r\n              type: \"error\",\r\n              center: true,\r\n              duration: 1200\r\n            });\r\n          }\r\n        })\r\n      }\r\n    },\r\n    onLoad(activeIndex) {\r\n      // this.busy = true;\r\n      //  let data1 = {\r\n      //   matchTypeId: 2,\r\n      //   index: this.IndexNum,\r\n      //   count: 8,\r\n      //   havaPlay: true,\r\n      //   matchItemTypeId: -1\r\n      // }\r\n       apiGetClubMatchs(this.getClubMatchsData, true).then(res => {\r\n        // if(res.Data.length == 0){\r\n        //   this.swiper.appendSlide('<div class=\"swiper-slide\">noMore.......</div>')\r\n        //   this.noMore = true\r\n        //   // this.push = false;\r\n        //   return\r\n        // }\r\n        // this.swiper.appendSlide('<div class=\"swiper-slide\">加載中.......</div>')\r\n        for(let i = 0; res.Data.Data.length>i; i++){\r\n          this.matchsList[activeIndex].push(res.Data.Data[i])\r\n        }\r\n        // for(let i = 0; res.Data.length>i; i++){\r\n        //   this.matchsList.push(res.Data[i])\r\n        //   this.busy = false;\r\n        // }\r\n        this.getClubMatchsData.index++\r\n       })\r\n    },\r\n    // 图片上传功能\r\n    tirggerFile (event) {\r\n      let file = event.target.files[0]\r\n      let imgSize = file.size\r\n      var param = new FormData() // 创建form对象\r\n      param.append('file', file, file.name) // 通过append向form对象添加数据\r\n      param.append('type', '1') // 添加form表单中其他数据\r\n      // console.log(param.get('file')) // FormData私有类对象，访问不到，可以通过get判断值是否传进去\r\n\r\n      if (!event.target.files.length) return\r\n      if (imgSize / 1024 > 10000) {\r\n        this.$message({\r\n          message: this.$t(\"PictureIsTooBig\"),\r\n          type: \"warning\",\r\n          center: true,\r\n          duration: 1200\r\n        });\r\n      } else {\r\n        this.imgPreview(file)\r\n      }\r\n    },\r\n\r\n    // 获取图片\r\n    imgPreview (file, callback) {\r\n      let _this = this // this指向问题，所以在外面先定义\r\n      let config = {\r\n        headers: { 'Content-Type': 'multipart/form-data' },\r\n        contentType: false, //required\r\n        processData: false // required\r\n      }\r\n      // 判断是否支持FileReader\r\n      if (!file || !window.FileReader) return\r\n      // 创建一个reader\r\n      var reader = new FileReader()\r\n      // 将图片转成base64格式\r\n      reader.readAsDataURL(file)\r\n      reader.onloadend = function () {\r\n        let result = this.result\r\n        let img = new Image()\r\n        img.src = result\r\n        // console.log('============未压缩图片===========')\r\n        img.onload = function () {\r\n          let data = _this.compress(img)\r\n\r\n          _this.imgUrl = result\r\n\r\n          let blob = _this.dataURItoBlob(data)\r\n\r\n          // console.log('*******base64转blob对象******')\r\n          let param = new FormData() // 创建form对象\r\n          param.append('file', blob, file.name) // 通过append向form对象添加数据\r\n          param.append('type', \"club\")\r\n\r\n          apiClubUpload(param, config).then(res => {\r\n            if (res.Success) {\r\n              _this.$message({\r\n                message: _this.$t(\"UploadSuccessfully\"),\r\n                type: \"success\",\r\n                center: true,\r\n                duration: 1200\r\n              });\r\n              //顯示圖片\r\n              _this.upImg = true\r\n              document.querySelector('#demo').setAttribute('src', result);\r\n              localStorage.setItem(\"imgName\", file.name)\r\n            }else {\r\n              _this.$message({\r\n                message: _this.$t(\"UploadFailed\"),\r\n                type: \"error\",\r\n                center: true,\r\n                duration: 1200\r\n              });\r\n            }\r\n          })\r\n        }\r\n      }\r\n    },\r\n    // 压缩图片\r\n    compress (img) {\r\n      let canvas = document.createElement('canvas')\r\n      let ctx = canvas.getContext('2d')\r\n      // let initSize = img.src.length\r\n      let width = img.width\r\n      let height = img.height\r\n      canvas.width = width\r\n      canvas.height = height\r\n      // 铺底色\r\n      ctx.fillStyle = '#fff'\r\n      ctx.fillRect(0, 0, canvas.width, canvas.height)\r\n      ctx.drawImage(img, 0, 0, width, height)\r\n\r\n      // 进行最小压缩\r\n      let ndata = canvas.toDataURL('image/jpeg', 0.1)\r\n      // console.log('*******压缩后的图片大小*******')\r\n      return ndata\r\n    },\r\n    dataURItoBlob (base64Data) {\r\n      var byteString\r\n      if (base64Data.split(',')[0].indexOf('base64') >= 0) byteString = atob(base64Data.split(',')[1])\r\n      else byteString = unescape(base64Data.split(',')[1])\r\n      var mimeString = base64Data\r\n        .split(',')[0]\r\n        .split(':')[1]\r\n        .split(';')[0]\r\n      var ia = new Uint8Array(byteString.length)\r\n      for (var i = 0; i < byteString.length; i++) {\r\n        ia[i] = byteString.charCodeAt(i)\r\n      }\r\n      return new Blob([ia], { type: mimeString })\r\n    }\r\n  },\r\n  destroyed() {\r\n    localStorage.setItem(\"imgName\",\"\")\r\n  }\r\n};\r\n</script>\r\n"],"sourceRoot":"src/views/club"}]}