{"remainingRequest":"C:\\work\\竞猜可换色板\\node_modules\\babel-loader\\lib\\index.js!C:\\work\\竞猜可换色板\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\work\\竞猜可换色板\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\work\\竞猜可换色板\\src\\views\\club\\MemberManagement.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\work\\竞猜可换色板\\src\\views\\club\\MemberManagement.vue","mtime":1606980099240},{"path":"C:\\work\\竞猜可换色板\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\work\\竞猜可换色板\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\work\\竞猜可换色板\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\work\\竞猜可换色板\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:\\\\work\\\\\\u7ADE\\u731C\\u53EF\\u6362\\u8272\\u677F\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport back from \"@/components/Botton/back.vue\";\nimport model from \"@/components/model\";\nimport { apiGetMyClubManagement, apiAuditClubMem, apiGetClubRole, apiModifyClubRole } from \"@/api/Club.js\";\nexport default {\n  name: \"memberManagement\",\n  components: {\n    back: back,\n    model: model\n  },\n  data: function data() {\n    return {\n      totalMembers: 0,\n      yesterdayAdd: 0,\n      btnChoice: 0,\n      closedIndex: undefined,\n      isOpen: false,\n      clubId: undefined,\n      UName: \"\",\n      UId: \"\",\n      underReviewNum: undefined,\n      type: 0,\n      memberList: [],\n      unMemberList: [],\n      pkId: undefined,\n      callBackMsg: \"\",\n      clubRoleList: [],\n      clubRole: \"\",\n      isOpenChat: false\n    };\n  },\n  created: function created() {\n    // 獲取clubId\n    this.clubId = localStorage.getItem(\"ClubId\"); // 獲取成員管理數據\n\n    this.getMyClubManagement();\n  },\n  methods: {\n    allMember: function allMember() {\n      this.btnChoice = 0;\n      this.getMyClubManagement();\n    },\n    underReview: function underReview() {\n      this.btnChoice = 1;\n      this.getMyClubManagement();\n    },\n    // 開啟彈窗\n    openFancyBox: function openFancyBox(type) {\n      var _this = this;\n\n      this.isOpen = true;\n      this.type = type; // type = 1 ， 點選會員進階跳出彈窗時，需跑API撈取升級資訊列表\n\n      if (type == 1) {\n        apiGetClubRole(\"\", true).then(function (res) {\n          _this.clubRoleList = res.Data;\n        });\n      }\n    },\n    // type : 1 = 升級修改會員; 2 = 移除會員; 3 = 通過審核; 4 = 拒絕審核\n    confirmBtnEvent: function () {\n      var _confirmBtnEvent = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee(type) {\n        var _this2 = this;\n\n        var data, _data, _data2, _data3;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (type === 1) {\n                  data = {\n                    UId: this.UId,\n                    RoleId: this.clubRole\n                  };\n                  apiModifyClubRole(data, true).then(function (res) {\n                    if (res.Success) {\n                      _this2.type = 5;\n                      _this2.callBackMsg = _this2.$t(\"SuccessfulOperation\");\n                    } else {\n                      _this2.type = 5;\n                      _this2.callBackMsg = res.Message;\n                    }\n                  });\n                }\n\n                if (!(type === 2)) {\n                  _context.next = 5;\n                  break;\n                }\n\n                _data = {\n                  MemClubChangeId: this.pkId,\n                  ClubId: this.clubId,\n                  UId: this.UId,\n                  Type: 2,\n                  // 2 踢人\n                  Status: 1 // status = 1是同意  2是不同意\n\n                };\n                _context.next = 5;\n                return apiAuditClubMem(_data, true).then(function (res) {\n                  if (res.Success) {\n                    _this2.type = 5;\n                    _this2.callBackMsg = _this2.$t(\"SuccessfulOperation\");\n                  } else {\n                    _this2.type = 5;\n                    _this2.callBackMsg = res.Message;\n                  }\n                }).then(function () {\n                  _this2.getMyClubManagement();\n                });\n\n              case 5:\n                if (!(type === 3)) {\n                  _context.next = 9;\n                  break;\n                }\n\n                _data2 = {\n                  MemClubChangeId: this.pkId,\n                  ClubId: this.clubId,\n                  UId: this.UId,\n                  Type: 0,\n                  // 0 審核\n                  Status: 1 // status = 1是同意  2是不同意\n\n                };\n                _context.next = 9;\n                return apiAuditClubMem(_data2, true).then(function (res) {\n                  if (res.Success) {\n                    _this2.type = 5;\n                    _this2.callBackMsg = _this2.$t(\"SuccessfulOperation\");\n                  } else {\n                    _this2.type = 5;\n                    _this2.callBackMsg = res.Message;\n                  }\n                }).then(function () {\n                  _this2.getMyClubManagement();\n                });\n\n              case 9:\n                if (!(type === 4)) {\n                  _context.next = 13;\n                  break;\n                }\n\n                _data3 = {\n                  MemClubChangeId: this.pkId,\n                  ClubId: this.clubId,\n                  UId: this.UId,\n                  Type: 0,\n                  // 0 審核\n                  Status: 2 // status = 1是同意  2是不同意\n\n                };\n                _context.next = 13;\n                return apiAuditClubMem(_data3, true).then(function (res) {\n                  if (res.Success) {\n                    _this2.type = 5;\n                    _this2.callBackMsg = _this2.$t(\"SuccessfulOperation\");\n                  } else {\n                    _this2.type = 5;\n                    _this2.callBackMsg = res.Message;\n                  }\n                }).then(function () {\n                  _this2.getMyClubManagement();\n                });\n\n              case 13:\n                // 回傳訊息\n                if (type === 5) {\n                  this.isOpen = false;\n                } // 無會員錯誤訊息\n\n\n                if (type === 6) {\n                  this.$router.push(\"/CreateClub\");\n                }\n\n                this.getMyClubManagement();\n\n              case 16:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function confirmBtnEvent(_x) {\n        return _confirmBtnEvent.apply(this, arguments);\n      }\n\n      return confirmBtnEvent;\n    }(),\n    // 獲取成員管理數據\n    getMyClubManagement: function getMyClubManagement() {\n      var _this3 = this;\n\n      var data = {\n        ClubId: this.clubId\n      };\n      apiGetMyClubManagement(data, true).then(function (res) {\n        // 無會員時跳出彈窗錯誤訊息\n        if (Math.abs(res.Code) >= 600) {\n          _this3.isOpen = true;\n          _this3.type = 6;\n          _this3.callBackMsg = res.Message;\n          return;\n        }\n\n        _this3.memberList = res.Data.Members;\n        _this3.unMemberList = res.Data.UnMembers;\n        _this3.totalMembers = res.Data.PeoNum;\n        _this3.yesterdayAdd = res.Data.YesterdayPeoNum;\n        _this3.underReviewNum = _this3.unMemberList.length;\n      });\n    },\n    // 發送訊息\n    openChat: function openChat() {\n      this.isOpenChat = true;\n    }\n  }\n};",{"version":3,"sources":["MemberManagement.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwIA,OAAA,IAAA,MAAA,8BAAA;AACA,OAAA,KAAA,MAAA,oBAAA;AACA,SAAA,sBAAA,EAAA,eAAA,EAAA,cAAA,EAAA,iBAAA,QAAA,eAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,kBADA;AAEA,EAAA,UAAA,EAAA;AACA,IAAA,IAAA,EAAA,IADA;AAEA,IAAA,KAAA,EAAA;AAFA,GAFA;AAMA,EAAA,IANA,kBAMA;AACA,WAAA;AACA,MAAA,YAAA,EAAA,CADA;AAEA,MAAA,YAAA,EAAA,CAFA;AAGA,MAAA,SAAA,EAAA,CAHA;AAIA,MAAA,WAAA,EAAA,SAJA;AAKA,MAAA,MAAA,EAAA,KALA;AAMA,MAAA,MAAA,EAAA,SANA;AAOA,MAAA,KAAA,EAAA,EAPA;AAQA,MAAA,GAAA,EAAA,EARA;AASA,MAAA,cAAA,EAAA,SATA;AAUA,MAAA,IAAA,EAAA,CAVA;AAWA,MAAA,UAAA,EAAA,EAXA;AAYA,MAAA,YAAA,EAAA,EAZA;AAaA,MAAA,IAAA,EAAA,SAbA;AAcA,MAAA,WAAA,EAAA,EAdA;AAeA,MAAA,YAAA,EAAA,EAfA;AAgBA,MAAA,QAAA,EAAA,EAhBA;AAiBA,MAAA,UAAA,EAAA;AAjBA,KAAA;AAmBA,GA1BA;AA2BA,EAAA,OA3BA,qBA2BA;AACA;AACA,SAAA,MAAA,GAAA,YAAA,CAAA,OAAA,CAAA,QAAA,CAAA,CAFA,CAIA;;AACA,SAAA,mBAAA;AACA,GAjCA;AAkCA,EAAA,OAAA,EAAA;AACA,IAAA,SADA,uBACA;AACA,WAAA,SAAA,GAAA,CAAA;AACA,WAAA,mBAAA;AACA,KAJA;AAKA,IAAA,WALA,yBAKA;AACA,WAAA,SAAA,GAAA,CAAA;AACA,WAAA,mBAAA;AACA,KARA;AAUA;AACA,IAAA,YAXA,wBAWA,IAXA,EAWA;AAAA;;AACA,WAAA,MAAA,GAAA,IAAA;AACA,WAAA,IAAA,GAAA,IAAA,CAFA,CAIA;;AACA,UAAA,IAAA,IAAA,CAAA,EAAA;AACA,QAAA,cAAA,CAAA,EAAA,EAAA,IAAA,CAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,UAAA,KAAA,CAAA,YAAA,GAAA,GAAA,CAAA,IAAA;AACA,SAFA;AAGA;AACA,KArBA;AAuBA;AACA,IAAA,eAxBA;AAAA;AAAA;AAAA,+CAwBA,IAxBA;AAAA;;AAAA;;AAAA;AAAA;AAAA;AAAA;AAyBA,oBAAA,IAAA,KAAA,CAAA,EAAA;AACA,kBAAA,IADA,GACA;AACA,oBAAA,GAAA,EAAA,KAAA,GADA;AAEA,oBAAA,MAAA,EAAA,KAAA;AAFA,mBADA;AAKA,kBAAA,iBAAA,CAAA,IAAA,EAAA,IAAA,CAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,wBAAA,GAAA,CAAA,OAAA,EAAA;AACA,sBAAA,MAAA,CAAA,IAAA,GAAA,CAAA;AACA,sBAAA,MAAA,CAAA,WAAA,GAAA,MAAA,CAAA,EAAA,CAAA,qBAAA,CAAA;AACA,qBAHA,MAGA;AACA,sBAAA,MAAA,CAAA,IAAA,GAAA,CAAA;AACA,sBAAA,MAAA,CAAA,WAAA,GAAA,GAAA,CAAA,OAAA;AACA;AACA,mBARA;AASA;;AAvCA,sBAwCA,IAAA,KAAA,CAxCA;AAAA;AAAA;AAAA;;AAyCA,gBAAA,KAzCA,GAyCA;AACA,kBAAA,eAAA,EAAA,KAAA,IADA;AAEA,kBAAA,MAAA,EAAA,KAAA,MAFA;AAGA,kBAAA,GAAA,EAAA,KAAA,GAHA;AAIA,kBAAA,IAAA,EAAA,CAJA;AAIA;AACA,kBAAA,MAAA,EAAA,CALA,CAKA;;AALA,iBAzCA;AAAA;AAAA,uBAgDA,eAAA,CAAA,KAAA,EAAA,IAAA,CAAA,CACA,IADA,CACA,UAAA,GAAA,EAAA;AACA,sBAAA,GAAA,CAAA,OAAA,EAAA;AACA,oBAAA,MAAA,CAAA,IAAA,GAAA,CAAA;AACA,oBAAA,MAAA,CAAA,WAAA,GAAA,MAAA,CAAA,EAAA,CAAA,qBAAA,CAAA;AACA,mBAHA,MAGA;AACA,oBAAA,MAAA,CAAA,IAAA,GAAA,CAAA;AACA,oBAAA,MAAA,CAAA,WAAA,GAAA,GAAA,CAAA,OAAA;AACA;AACA,iBATA,EAUA,IAVA,CAUA,YAAA;AACA,kBAAA,MAAA,CAAA,mBAAA;AACA,iBAZA,CAhDA;;AAAA;AAAA,sBA8DA,IAAA,KAAA,CA9DA;AAAA;AAAA;AAAA;;AA+DA,gBAAA,MA/DA,GA+DA;AACA,kBAAA,eAAA,EAAA,KAAA,IADA;AAEA,kBAAA,MAAA,EAAA,KAAA,MAFA;AAGA,kBAAA,GAAA,EAAA,KAAA,GAHA;AAIA,kBAAA,IAAA,EAAA,CAJA;AAIA;AACA,kBAAA,MAAA,EAAA,CALA,CAKA;;AALA,iBA/DA;AAAA;AAAA,uBAsEA,eAAA,CAAA,MAAA,EAAA,IAAA,CAAA,CACA,IADA,CACA,UAAA,GAAA,EAAA;AACA,sBAAA,GAAA,CAAA,OAAA,EAAA;AACA,oBAAA,MAAA,CAAA,IAAA,GAAA,CAAA;AACA,oBAAA,MAAA,CAAA,WAAA,GAAA,MAAA,CAAA,EAAA,CAAA,qBAAA,CAAA;AACA,mBAHA,MAGA;AACA,oBAAA,MAAA,CAAA,IAAA,GAAA,CAAA;AACA,oBAAA,MAAA,CAAA,WAAA,GAAA,GAAA,CAAA,OAAA;AACA;AACA,iBATA,EAUA,IAVA,CAUA,YAAA;AACA,kBAAA,MAAA,CAAA,mBAAA;AACA,iBAZA,CAtEA;;AAAA;AAAA,sBAoFA,IAAA,KAAA,CApFA;AAAA;AAAA;AAAA;;AAqFA,gBAAA,MArFA,GAqFA;AACA,kBAAA,eAAA,EAAA,KAAA,IADA;AAEA,kBAAA,MAAA,EAAA,KAAA,MAFA;AAGA,kBAAA,GAAA,EAAA,KAAA,GAHA;AAIA,kBAAA,IAAA,EAAA,CAJA;AAIA;AACA,kBAAA,MAAA,EAAA,CALA,CAKA;;AALA,iBArFA;AAAA;AAAA,uBA4FA,eAAA,CAAA,MAAA,EAAA,IAAA,CAAA,CACA,IADA,CACA,UAAA,GAAA,EAAA;AACA,sBAAA,GAAA,CAAA,OAAA,EAAA;AACA,oBAAA,MAAA,CAAA,IAAA,GAAA,CAAA;AACA,oBAAA,MAAA,CAAA,WAAA,GAAA,MAAA,CAAA,EAAA,CAAA,qBAAA,CAAA;AACA,mBAHA,MAGA;AACA,oBAAA,MAAA,CAAA,IAAA,GAAA,CAAA;AACA,oBAAA,MAAA,CAAA,WAAA,GAAA,GAAA,CAAA,OAAA;AACA;AACA,iBATA,EAUA,IAVA,CAUA,YAAA;AACA,kBAAA,MAAA,CAAA,mBAAA;AACA,iBAZA,CA5FA;;AAAA;AA0GA;AACA,oBAAA,IAAA,KAAA,CAAA,EAAA;AACA,uBAAA,MAAA,GAAA,KAAA;AACA,iBA7GA,CA+GA;;;AACA,oBAAA,IAAA,KAAA,CAAA,EAAA;AACA,uBAAA,OAAA,CAAA,IAAA,CAAA,aAAA;AACA;;AAEA,qBAAA,mBAAA;;AApHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAuHA;AACA,IAAA,mBAxHA,iCAwHA;AAAA;;AACA,UAAA,IAAA,GAAA;AACA,QAAA,MAAA,EAAA,KAAA;AADA,OAAA;AAGA,MAAA,sBAAA,CAAA,IAAA,EAAA,IAAA,CAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA;AACA,YAAA,IAAA,CAAA,GAAA,CAAA,GAAA,CAAA,IAAA,KAAA,GAAA,EAAA;AACA,UAAA,MAAA,CAAA,MAAA,GAAA,IAAA;AACA,UAAA,MAAA,CAAA,IAAA,GAAA,CAAA;AACA,UAAA,MAAA,CAAA,WAAA,GAAA,GAAA,CAAA,OAAA;AACA;AACA;;AACA,QAAA,MAAA,CAAA,UAAA,GAAA,GAAA,CAAA,IAAA,CAAA,OAAA;AACA,QAAA,MAAA,CAAA,YAAA,GAAA,GAAA,CAAA,IAAA,CAAA,SAAA;AACA,QAAA,MAAA,CAAA,YAAA,GAAA,GAAA,CAAA,IAAA,CAAA,MAAA;AACA,QAAA,MAAA,CAAA,YAAA,GAAA,GAAA,CAAA,IAAA,CAAA,eAAA;AAEA,QAAA,MAAA,CAAA,cAAA,GAAA,MAAA,CAAA,YAAA,CAAA,MAAA;AACA,OAdA;AAeA,KA3IA;AA6IA;AACA,IAAA,QA9IA,sBA8IA;AACA,WAAA,UAAA,GAAA,IAAA;AACA;AAhJA;AAlCA,CAAA","sourcesContent":["<template>\r\n  <div class=\"member-management\">\r\n    <div class=\"member-management-header\">\r\n      <div class=\"member-management-header-wrap\">\r\n        <back class=\"back-icon img-he\"></back>\r\n        <h3>{{ $t(\"MemberManagement\") }}</h3>\r\n        <!--成员管理-->\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"member-info\">\r\n      <div class=\"totalMembers\">\r\n        {{ $t(\"TotalNumberOfClubs\") }}:{{ totalMembers }}\r\n      </div>\r\n      <!--俱乐部总人数-->\r\n      <div class=\"yesterdayAdd\">\r\n        {{ $t(\"ClubAddedYesterday\") }}:{{ yesterdayAdd }}\r\n      </div>\r\n      <!--俱乐部昨日新增-->\r\n    </div>\r\n\r\n    <div class=\"member-management-content\">\r\n      <div class=\"managementBtn\">\r\n        <!--所有成员-->\r\n        <div\r\n          :class=\"[btnChoice == 0 ? 'onFocus' : 'notFocus']\"\r\n          @click=\"allMember()\"\r\n        >\r\n          {{ $t(\"AllMembers\") }}\r\n        </div>\r\n\r\n        <!--待审核-->\r\n        <div\r\n          class=\"under-review\"\r\n          :class=\"[btnChoice == 1 ? 'onFocus' : 'notFocus']\"\r\n          @click=\"underReview()\"\r\n        >\r\n          {{ $t(\"UnderReview\") }}\r\n          <span v-if=\"underReviewNum > 0\">{{ underReviewNum }}</span>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 所有成员 -->\r\n      <div class=\"member-list-wrap\" v-if=\"btnChoice === 0\">\r\n        <div class=\"member-list\" v-for=\"(list, index) in memberList\">\r\n          <img :src=\"list.UImg\" alt=\"\" />\r\n          <div class=\"member-list-info\">\r\n            <p class=\"member-list-info-name\">{{ list.NickName }}</p>\r\n            <!--发送消息-->\r\n            <!-- <div class=\"member-list-send-message\" @click=\"openChat()\">{{ $t(\"SendMessage\") }}</div> -->\r\n            <div class=\"member-list-info-vip-wrap\">\r\n              <p>{{ $t('Office') }} : {{ list.RoleName }}</p>\r\n              <p>{{ $t('VIPLevel') }}: {{ list.Vip }}</p>  <!--VIP等級-->\r\n            </div>\r\n            <div class=\"member-list-info-last-bet-time\">{{ $t(\"LastBetTime\") }} : {{ list.LastBetTime }}</div> <!--最後投注時間-->\r\n          </div>\r\n          <div class=\"member-list-btn-wrap\">\r\n            <div class=\"drop\" @click=\"openFancyBox(1); UId = list.UId;\"></div>\r\n            <!-- 踢人 -->\r\n            <div class=\"closed\" @click=\"openFancyBox(2); pkId = list.PkId; UId = list.UId;\"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 待审核 -->\r\n      <div class=\"member-list-wrap\" v-if=\"btnChoice === 1\">\r\n        <div class=\"member-list\" v-for=\"list in unMemberList\">\r\n          <img :src=\"list.UImg\" alt=\"\" />\r\n          <div class=\"member-list-info\">\r\n            <p class=\"member-list-info-name\">{{ list.NickName }}</p>\r\n            <div class=\"member-list-info-detail\">\r\n              <p>\r\n                {{ $t(\"NumberOfBets\") }}: {{ list.BetCount }}{{ $t(\"Times\") }}\r\n              </p>\r\n              <!--投注数-->\r\n              <p>{{ $t(\"VIPLevel\") }}: {{ list.Vip }}</p>\r\n              <!--VIP等级-->\r\n            </div>\r\n          </div>\r\n          <div class=\"member-list-btn-wrap\">\r\n            <!--通过-->\r\n            <div class=\"member-list-btn pass\" @click=\" openFancyBox(3); pkId = list.PkId; UId = list.UId;\">\r\n              {{ $t(\"Pass\") }}\r\n            </div>\r\n            <!--拒绝-->\r\n            <div class=\"member-list-btn reject\" @click=\"openFancyBox(4); pkId = list.PkId; UId = list.UId;\">\r\n              {{ $t(\"Reject\") }}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 發送訊息 -->\r\n    <div class=\"chat\" v-if=\"isOpenChat\">\r\n      \r\n    </div>\r\n\r\n    <!-- 彈窗 -->\r\n    <transition name=\"fade\">\r\n\t\t  <model v-if=\"isOpen\"></model>\r\n\t  </transition>\r\n\t  <transition name=\"fade\">\r\n\t\t<div class=\"fancy-box\" v-if=\"isOpen\">\r\n\t\t\t<img src=\"../../assets/club/ticket-header.png\" alt=\"\">\r\n      <div class=\"fancy-box-content\">\r\n\t\t\t  <div class=\"upgrade\" v-if=\"type == 1\">\r\n          <p>{{ $t(\"AdjustTheRole\") }}</p>\r\n          <!-- <select v-model=\"clubRole\">\r\n            <option value=\"\" disabled selected>--請選擇--</option>\r\n            <option class=\"upgrade-option\" v-for=\"role in clubRoleList\" :value=\"role.Id\">{{ role.Name }}</option>\r\n          </select> -->\r\n          <el-select v-model=\"clubRole\" :placeholder='$t(\"Select\")'>\r\n            <el-option\r\n              v-for=\"item in clubRoleList\"\r\n              :key=\"item.value\"\r\n              :label=\"item.Name\"\r\n              :value=\"item.Id\">\r\n            </el-option>\r\n          </el-select>\r\n        </div>\r\n        <p v-if=\"type == 2\">{{ $t(\"RemoveMember\") }}?</p><!--是否將此會員汰除-->\r\n        <p v-if=\"type == 3\">{{ $t(\"JoinMember\") }}?</v-pre><!--是否加入此會員-->\r\n        <p v-if=\"type == 4\">{{ $t(\"RejectMember\") }}?</p><!--是否拒絕此會員-->\r\n        <p v-if=\"type == 5\">{{ callBackMsg }}</p><!--錯誤訊息-->\r\n        <p v-if=\"type == 6\">{{ callBackMsg }}</p><!--無會員訊息-->\r\n      </div>\r\n\t\t\t<div class=\"fancy-box-btn\">\r\n\t\t\t\t<div class=\"fancy-box-btn-confirm\" @click=\"confirmBtnEvent(type)\">{{ $t('Confirm') }}</div>\r\n\t\t\t\t<div class=\"fancy-box-btn-cancel\" @click=\"isOpen = !isOpen\" v-if=\"type !== 5 && type !== 6\">{{ $t('Cancel') }}</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</transition>\r\n  </div>\r\n</template>\r\n<script>\r\nimport back from \"@/components/Botton/back.vue\";\r\nimport model from \"@/components/model\";\r\nimport { apiGetMyClubManagement, apiAuditClubMem, apiGetClubRole, apiModifyClubRole } from \"@/api/Club.js\";\r\nexport default {\r\n  name: \"memberManagement\",\r\n  components: {\r\n    back,\r\n    model,\r\n  },\r\n  data() {\r\n    return {\r\n      totalMembers: 0,\r\n      yesterdayAdd: 0,\r\n      btnChoice: 0,\r\n      closedIndex: undefined,\r\n      isOpen: false,\r\n      clubId: undefined,\r\n      UName: \"\",\r\n      UId: \"\",\r\n      underReviewNum: undefined,\r\n      type: 0,\r\n      memberList: [],\r\n      unMemberList: [],\r\n      pkId: undefined,\r\n      callBackMsg: \"\",\r\n      clubRoleList: [],\r\n      clubRole: \"\",\r\n      isOpenChat: false,\r\n    };\r\n  },\r\n  created() {\r\n    // 獲取clubId\r\n    this.clubId = localStorage.getItem(\"ClubId\");\r\n\r\n    // 獲取成員管理數據\r\n    this.getMyClubManagement();\r\n  },\r\n  methods: {\r\n    allMember() {\r\n      this.btnChoice = 0;\r\n      this.getMyClubManagement();\r\n    },\r\n    underReview() {\r\n      this.btnChoice = 1;\r\n      this.getMyClubManagement();\r\n    },\r\n\r\n    // 開啟彈窗\r\n    openFancyBox(type) {\r\n      this.isOpen = true;\r\n      this.type = type;\r\n\r\n      // type = 1 ， 點選會員進階跳出彈窗時，需跑API撈取升級資訊列表\r\n      if (type == 1) {\r\n        apiGetClubRole(\"\", true).then(res => {\r\n          this.clubRoleList = res.Data;\r\n      });\r\n      }\r\n    },\r\n\r\n    // type : 1 = 升級修改會員; 2 = 移除會員; 3 = 通過審核; 4 = 拒絕審核\r\n    async confirmBtnEvent(type) {\r\n      if (type === 1) {\r\n        let data = {\r\n          UId: this.UId,\r\n          RoleId: this.clubRole\r\n        }\r\n        apiModifyClubRole(data, true).then(res => {\r\n          if (res.Success) {\r\n            this.type = 5;\r\n            this.callBackMsg = this.$t(\"SuccessfulOperation\");\r\n          }else {\r\n            this.type = 5;\r\n            this.callBackMsg = res.Message;\r\n          }\r\n      });\r\n      }\r\n      if (type === 2) {\r\n        let data = {\r\n          MemClubChangeId: this.pkId,\r\n          ClubId: this.clubId,\r\n          UId: this.UId,\r\n          Type: 2, // 2 踢人\r\n          Status: 1 // status = 1是同意  2是不同意\r\n        };\r\n        await apiAuditClubMem(data, true)\r\n          .then(res => {\r\n            if (res.Success) {\r\n              this.type = 5;\r\n              this.callBackMsg = this.$t(\"SuccessfulOperation\");\r\n            } else {\r\n              this.type = 5;\r\n              this.callBackMsg = res.Message;\r\n            }\r\n          })\r\n          .then(() => {\r\n            this.getMyClubManagement();\r\n          });\r\n      }\r\n      if (type === 3) {\r\n        let data = {\r\n          MemClubChangeId: this.pkId,\r\n          ClubId: this.clubId,\r\n          UId: this.UId,\r\n          Type: 0, // 0 審核\r\n          Status: 1 // status = 1是同意  2是不同意\r\n        };\r\n        await apiAuditClubMem(data, true)\r\n          .then(res => {\r\n            if (res.Success) {\r\n              this.type = 5;\r\n              this.callBackMsg = this.$t(\"SuccessfulOperation\");\r\n            } else {\r\n              this.type = 5;\r\n              this.callBackMsg = res.Message;\r\n            }\r\n          })\r\n          .then(() => {\r\n            this.getMyClubManagement();\r\n          });\r\n      }\r\n      if (type === 4) {\r\n          let data = {\r\n          MemClubChangeId: this.pkId,\r\n          ClubId: this.clubId,\r\n          UId: this.UId,\r\n          Type: 0, // 0 審核\r\n          Status: 2 // status = 1是同意  2是不同意\r\n        };\r\n        await apiAuditClubMem(data, true)\r\n          .then(res => {\r\n            if (res.Success) {\r\n              this.type = 5;\r\n              this.callBackMsg = this.$t(\"SuccessfulOperation\");\r\n            } else {\r\n              this.type = 5;\r\n              this.callBackMsg = res.Message;\r\n            }\r\n          })\r\n          .then(() => {\r\n            this.getMyClubManagement();\r\n          });\r\n      }\r\n      // 回傳訊息\r\n      if (type === 5) {\r\n        this.isOpen = false;\r\n      }\r\n\r\n      // 無會員錯誤訊息\r\n      if (type === 6) {\r\n        this.$router.push(\"/CreateClub\");\r\n      }\r\n\r\n      this.getMyClubManagement();\r\n    },\r\n\r\n    // 獲取成員管理數據\r\n    getMyClubManagement() {\r\n      let data = {\r\n        ClubId: this.clubId\r\n      };\r\n      apiGetMyClubManagement(data, true).then(res => {\r\n        // 無會員時跳出彈窗錯誤訊息\r\n        if (Math.abs(res.Code) >= 600) {\r\n          this.isOpen = true;\r\n          this.type = 6;\r\n          this.callBackMsg = res.Message;\r\n          return;\r\n        }\r\n        this.memberList = res.Data.Members;\r\n        this.unMemberList = res.Data.UnMembers;\r\n        this.totalMembers = res.Data.PeoNum;\r\n        this.yesterdayAdd = res.Data.YesterdayPeoNum;\r\n\r\n        this.underReviewNum = this.unMemberList.length;\r\n      })\r\n    },\r\n\r\n    // 發送訊息\r\n    openChat() {\r\n      this.isOpenChat = true\r\n    }\r\n  }\r\n};\r\n</script>\r\n"],"sourceRoot":"src/views/club"}]}