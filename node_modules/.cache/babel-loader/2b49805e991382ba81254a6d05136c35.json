{"remainingRequest":"C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\src\\views\\club\\MemberManagement.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\src\\views\\club\\MemberManagement.vue","mtime":1606980099240},{"path":"C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Yang\\Desktop\\新增資料夾\\竞猜可换色板\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\Yang\\\\Desktop\\\\\\u65B0\\u589E\\u8CC7\\u6599\\u593E\\\\\\u7ADE\\u731C\\u53EF\\u6362\\u8272\\u677F\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport back from \"@/components/Botton/back.vue\";\nimport model from \"@/components/model\";\nimport { apiGetMyClubManagement, apiAuditClubMem, apiGetClubRole, apiModifyClubRole } from \"@/api/Club.js\";\nexport default {\n  name: \"memberManagement\",\n  components: {\n    back: back,\n    model: model\n  },\n  data: function data() {\n    return {\n      totalMembers: 0,\n      yesterdayAdd: 0,\n      btnChoice: 0,\n      closedIndex: undefined,\n      isOpen: false,\n      clubId: undefined,\n      UName: \"\",\n      UId: \"\",\n      underReviewNum: undefined,\n      type: 0,\n      memberList: [],\n      unMemberList: [],\n      pkId: undefined,\n      callBackMsg: \"\",\n      clubRoleList: [],\n      clubRole: \"\",\n      isOpenChat: false\n    };\n  },\n  created: function created() {\n    // 獲取clubId\n    this.clubId = localStorage.getItem(\"ClubId\"); // 獲取成員管理數據\n\n    this.getMyClubManagement();\n  },\n  methods: {\n    allMember: function allMember() {\n      this.btnChoice = 0;\n      this.getMyClubManagement();\n    },\n    underReview: function underReview() {\n      this.btnChoice = 1;\n      this.getMyClubManagement();\n    },\n    // 開啟彈窗\n    openFancyBox: function openFancyBox(type) {\n      var _this = this;\n\n      this.isOpen = true;\n      this.type = type; // type = 1 ， 點選會員進階跳出彈窗時，需跑API撈取升級資訊列表\n\n      if (type == 1) {\n        apiGetClubRole(\"\", true).then(function (res) {\n          _this.clubRoleList = res.Data;\n        });\n      }\n    },\n    // type : 1 = 升級修改會員; 2 = 移除會員; 3 = 通過審核; 4 = 拒絕審核\n    confirmBtnEvent: function () {\n      var _confirmBtnEvent = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee(type) {\n        var _this2 = this;\n\n        var data, _data, _data2, _data3;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (type === 1) {\n                  data = {\n                    UId: this.UId,\n                    RoleId: this.clubRole\n                  };\n                  apiModifyClubRole(data, true).then(function (res) {\n                    if (res.Success) {\n                      _this2.type = 5;\n                      _this2.callBackMsg = _this2.$t(\"SuccessfulOperation\");\n                    } else {\n                      _this2.type = 5;\n                      _this2.callBackMsg = res.Message;\n                    }\n                  });\n                }\n\n                if (!(type === 2)) {\n                  _context.next = 5;\n                  break;\n                }\n\n                _data = {\n                  MemClubChangeId: this.pkId,\n                  ClubId: this.clubId,\n                  UId: this.UId,\n                  Type: 2,\n                  // 2 踢人\n                  Status: 1 // status = 1是同意  2是不同意\n\n                };\n                _context.next = 5;\n                return apiAuditClubMem(_data, true).then(function (res) {\n                  if (res.Success) {\n                    _this2.type = 5;\n                    _this2.callBackMsg = _this2.$t(\"SuccessfulOperation\");\n                  } else {\n                    _this2.type = 5;\n                    _this2.callBackMsg = res.Message;\n                  }\n                }).then(function () {\n                  _this2.getMyClubManagement();\n                });\n\n              case 5:\n                if (!(type === 3)) {\n                  _context.next = 9;\n                  break;\n                }\n\n                _data2 = {\n                  MemClubChangeId: this.pkId,\n                  ClubId: this.clubId,\n                  UId: this.UId,\n                  Type: 0,\n                  // 0 審核\n                  Status: 1 // status = 1是同意  2是不同意\n\n                };\n                _context.next = 9;\n                return apiAuditClubMem(_data2, true).then(function (res) {\n                  if (res.Success) {\n                    _this2.type = 5;\n                    _this2.callBackMsg = _this2.$t(\"SuccessfulOperation\");\n                  } else {\n                    _this2.type = 5;\n                    _this2.callBackMsg = res.Message;\n                  }\n                }).then(function () {\n                  _this2.getMyClubManagement();\n                });\n\n              case 9:\n                if (!(type === 4)) {\n                  _context.next = 13;\n                  break;\n                }\n\n                _data3 = {\n                  MemClubChangeId: this.pkId,\n                  ClubId: this.clubId,\n                  UId: this.UId,\n                  Type: 0,\n                  // 0 審核\n                  Status: 2 // status = 1是同意  2是不同意\n\n                };\n                _context.next = 13;\n                return apiAuditClubMem(_data3, true).then(function (res) {\n                  if (res.Success) {\n                    _this2.type = 5;\n                    _this2.callBackMsg = _this2.$t(\"SuccessfulOperation\");\n                  } else {\n                    _this2.type = 5;\n                    _this2.callBackMsg = res.Message;\n                  }\n                }).then(function () {\n                  _this2.getMyClubManagement();\n                });\n\n              case 13:\n                // 回傳訊息\n                if (type === 5) {\n                  this.isOpen = false;\n                } // 無會員錯誤訊息\n\n\n                if (type === 6) {\n                  this.$router.push(\"/CreateClub\");\n                }\n\n                this.getMyClubManagement();\n\n              case 16:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function confirmBtnEvent(_x) {\n        return _confirmBtnEvent.apply(this, arguments);\n      }\n\n      return confirmBtnEvent;\n    }(),\n    // 獲取成員管理數據\n    getMyClubManagement: function getMyClubManagement() {\n      var _this3 = this;\n\n      var data = {\n        ClubId: this.clubId\n      };\n      apiGetMyClubManagement(data, true).then(function (res) {\n        // 無會員時跳出彈窗錯誤訊息\n        if (Math.abs(res.Code) >= 600) {\n          _this3.isOpen = true;\n          _this3.type = 6;\n          _this3.callBackMsg = res.Message;\n          return;\n        }\n\n        _this3.memberList = res.Data.Members;\n        _this3.unMemberList = res.Data.UnMembers;\n        _this3.totalMembers = res.Data.PeoNum;\n        _this3.yesterdayAdd = res.Data.YesterdayPeoNum;\n        _this3.underReviewNum = _this3.unMemberList.length;\n      });\n    },\n    // 發送訊息\n    openChat: function openChat() {\n      this.isOpenChat = true;\n    }\n  }\n};",null]}