(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0a4bda"],{"0873":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{staticClass:"clubAdPutIn"},[a("div",{staticClass:"clubAdPutIn-header",staticStyle:{position:"fixed",top:"0"}},[a("back",{staticClass:"back-icon img-he"}),a("h3",[t._v(t._s(t.$t("Advertising")))])],1),a("div",{staticClass:"club-Box"},[a("div",{staticClass:"createSet"},[a("div",{staticClass:"setField"},[a("div",{staticClass:"title"},[a("div",{staticClass:"title-list"}),a("p",[t._v("\n            "+t._s(t.$t("PlaceAd"))+"\n            ")])]),a("div",{staticClass:"uploadImg"},[t.upImg?t._e():a("div",{staticClass:"uploadIcon"}),t.upImg?t._e():a("div",{staticClass:"uploadContent"},[t._v(t._s(t.$t("UploadYourClubLogo")))]),t.upImg?t._e():a("div",{staticClass:"uploadContent"},[t._v(t._s(t.$t("RecommendedImageSize")))]),a("img",{attrs:{id:"demo",alt:""}}),a("input",{staticClass:"imgInput",attrs:{type:"file",name:"saveFile"},on:{change:function(e){return t.tirggerFile(e)}}})]),a("div",{staticClass:"changeAdTitle"},[t._v(t._s(t.$t("PleaseSelectAd")))]),a("el-checkbox-group",{attrs:{border:""},model:{value:t.checkList,callback:function(e){t.checkList=e},expression:"checkList"}},t._l(t.typeList,(function(e,s){return a("el-checkbox",{key:s,staticClass:"chooseRace",attrs:{border:"",label:e.typeName},on:{change:function(e){return t.bindCheckBox(s)}}})})),1),a("div",{staticClass:"uploadRulesBox"},[a("div",{staticClass:"uploadRules"},[a("div",{staticClass:"uploadRulesContent"},[t._v(t._s(t.$t("AdvertisingPriceRules"))+" : "),a("br"),t._v("\n              "+t._s(t.$t("AdvertisingPriceRulesContent"))),a("br"),t._v("\n              "+t._s(t.$t("Top"))+"："+t._s(t.recommendPrice)+t._s(t.$t("Coins"))+"/"+t._s(t.$t("Day"))),a("br"),t._v("\n              "+t._s(t.$t("Popular"))+"："+t._s(t.popularPrice)+t._s(t.$t("Coins"))+"/"+t._s(t.$t("Day"))+"\n            ")])])])],1)])]),a("div",{staticClass:"btnBox"},[a("button",{staticClass:"changeBtn",on:{click:t.clubAdPutInSubmit}},[t._v(t._s(t.$t("ConfirmSubmission")))]),a("button",{staticClass:"changeBtn depositBtn",on:{click:t.deposit}},[t._v(t._s(t.$t("Deposit")))])])])},i=[],n=(a("34ef"),a("28a5"),a("7f7f"),a("cc22")),c=a("a5c1"),o={components:{back:n["a"]},data:function(){return{noMission:!1,typeList:[{typeName:this.$t("Top"),price:0},{typeName:this.$t("Popular"),price:0}],checkList:[],submitClubAdData:{ClubId:"",Type:"",Day:"",Img:"",Amount:"",UName:""},upImg:!1,recommendPrice:"",popularPrice:""}},created:function(){this.submitClubAdData.ClubId=localStorage.getItem("ClubId"),this.submitClubAdData.UName=localStorage.getItem("uname")},mounted:function(){var t=this;Object(c["f"])("",!0).then((function(e){t.recommendPrice=e.Data.RecommendPrice,t.popularPrice=e.Data.PopularPrice,t.typeList[0].price=e.Data.MaxDay*e.Data.RecommendPrice,t.typeList[1].price=e.Data.MaxDay*e.Data.PopularPrice,t.submitClubAdData.Day=e.Data.MaxDay}))},methods:{tirggerFile:function(t){var e=t.target.files[0],a=e.size,s=new FormData;s.append("file",e,e.name),s.append("type","1"),t.target.files.length&&(a/1024>1e4?this.$message({message:this.$t("PictureIsTooBig"),type:"warning",center:!0,duration:1200}):this.imgPreview(e))},imgPreview:function(t,e){var a=this,s={headers:{"Content-Type":"multipart/form-data"},contentType:!1,processData:!1};if(t&&window.FileReader){var i=new FileReader;i.readAsDataURL(t),i.onloadend=function(){var e=this.result,i=new Image;i.src=e,i.onload=function(){var n=a.compress(i);a.imgUrl=e;var o=a.dataURItoBlob(n),r=new FormData;r.append("file",o,t.name),r.append("type","clubad"),Object(c["c"])(r,s).then((function(s){s.Success?(a.$message({message:a.$t("UploadSuccessfully"),type:"success",center:!0,duration:1200}),a.upImg=!0,document.querySelector("#demo").setAttribute("src",e),a.submitClubAdData.Img=t.name):a.$message({message:a.$t("UploadFailed"),type:"error",center:!0,duration:1200})}))}}}},compress:function(t){var e=document.createElement("canvas"),a=e.getContext("2d"),s=t.width,i=t.height;e.width=s,e.height=i,a.fillStyle="#fff",a.fillRect(0,0,e.width,e.height),a.drawImage(t,0,0,s,i);var n=e.toDataURL("image/jpeg",.1);return n},dataURItoBlob:function(t){var e;e=t.split(",")[0].indexOf("base64")>=0?atob(t.split(",")[1]):unescape(t.split(",")[1]);for(var a=t.split(",")[0].split(":")[1].split(";")[0],s=new Uint8Array(e.length),i=0;i<e.length;i++)s[i]=e.charCodeAt(i);return new Blob([s],{type:a})},bindCheckBox:function(t){this.submitClubAdData.Type=t,this.submitClubAdData.Amount=this.typeList[t].price,this.checkList.length>1&&this.checkList.splice(0,1),0==this.checkList.length&&(this.submitClubAdData.Type="",this.submitClubAdData.Amount="")},clubAdPutInSubmit:function(){var t=this;this.upImg?""===this.submitClubAdData.Type?this.$message({message:this.$t("PleaseSelectAd"),type:"error",center:!0,duration:1200}):Object(c["z"])(this.submitClubAdData,!0).then((function(e){Math.abs(e.Code)>=600?t.$message({message:e.Message,type:"error",center:!0,duration:1200}):(t.$message({message:e.Message,type:"success",center:!0,duration:1200}),t.$router.push("/myAuthority"))})):this.$message({message:this.$t("UploadYourClubLogo"),type:"error",center:!0,duration:1200})},deposit:function(){this.$router.push("/recharge")}}},r=o,l=a("2877"),u=Object(l["a"])(r,s,i,!1,null,null,null);e["default"]=u.exports}}]);